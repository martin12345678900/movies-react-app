(this["webpackJsonpmovie-react-app"]=this["webpackJsonpmovie-react-app"]||[]).push([[0],{10:function(e,t,a){e.exports={createPage:"Decorate_createPage__3Wn0Q",createFormWrapper:"Decorate_createFormWrapper__2FwBu",createFormTitle:"Decorate_createFormTitle__1yns7",movieTitle:"Decorate_movieTitle__3I_Y7",movieDescription:"Decorate_movieDescription__3j-t1",movieImageURL:"Decorate_movieImageURL__2UDhI",createMovieBtn:"Decorate_createMovieBtn__2OGDp"}},100:function(e,t,a){},101:function(e,t,a){},13:function(e,t,a){e.exports={navListItem:"Navigation_navListItem__2qYtC",navListLink:"Navigation_navListLink__V8qGO",navListWrapper:"Navigation_navListWrapper__4BGZB",searchFormWrapper:"Navigation_searchFormWrapper__1D6k6",searchInput:"Navigation_searchInput__3njbn",searchBtn:"Navigation_searchBtn__20J2k"}},206:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(87),i=a.n(s),c=(a(100),a(9)),o=(a(101),a(4)),u=a(11),l=a(60),m=a.n(l),p=a(0);var d=function(){return Object(p.jsx)("div",{className:m.a.logo,children:Object(p.jsx)(u.b,{className:m.a.navListLink,to:"/",children:"#Enjoy Movies"})})},h=a(2),v=a.n(h),j=a(3),b=a(13),f=a.n(b);function x(e,t){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,a);case 3:if(!1!==(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:throw r=e.sent,new Error(r.message);case 11:return e.prev=11,e.next=14,n.json();case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(11),e.abrupt("return",n);case 20:e.next=26;break;case 22:throw e.prev=22,e.t1=e.catch(0),alert(e.t1.message),e.t1;case 26:case"end":return e.stop()}}),e,null,[[0,22],[11,17]])})))).apply(this,arguments)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n={method:e,headers:{}};return t&&(n.headers["X-Authorization"]=t),a&&(n.headers["Content-Type"]="application/json",n.body=JSON.stringify(a)),n}var g="https://cars-react-app-server.herokuapp.com";function w(e){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("get"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,a){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(v.a.mark((function e(t,a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("post",a,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,a){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(v.a.mark((function e(t,a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("put",a,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return T.apply(this,arguments)}function T(){return(T=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("delete",a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return B.apply(this,arguments)}function B(){return(B=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/movies");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return M.apply(this,arguments)}function M(){return(M=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/movies/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,a,n){return S.apply(this,arguments)}function S(){return(S=Object(j.a)(v.a.mark((function e(t,a,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/data/movies",r,{title:t,description:a,img:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,a,n,r){return U.apply(this,arguments)}function U(){return(U=Object(j.a)(v.a.mark((function e(t,a,n,r,s){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/movies/".concat(r),s,{title:t,description:a,img:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return P.apply(this,arguments)}function P(){return(P=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("/data/movies/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/data/likes",a,{movieId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return(H=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/likes?where=movieId%3D%22".concat(t,"%22&distinct=_ownerId&count"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/likes?where=movieId%3D%22".concat(t,"%22%20and%20_ownerId%3D%22").concat(a,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return G.apply(this,arguments)}function G(){return(G=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/movies?where=title%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return(K=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/comments?where=movieId%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t,a,n){return X.apply(this,arguments)}function X(){return(X=Object(j.a)(v.a.mark((function e(t,a,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/data/comments",r,{author:t,content:a,movieId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=r.a.createContext("No Provider :("),ee=a(35),te=a.n(ee);var ae=function(e){var t=e.message,a=e.closeModalClickHandler;return Object(p.jsx)("div",{className:te.a.overlay,children:Object(p.jsxs)("div",{className:te.a.modal,children:[Object(p.jsx)("p",{className:te.a.message,children:t}),Object(p.jsx)("button",{onClick:a,className:te.a.action,children:"Okay"})]})})},ne=a(95);var re=function(e,t,a,n){var r=Object(ne.a)({initialValues:e,validateOnChange:a,validationSchema:t,onSubmit:n});return{handleSubmit:r.handleSubmit,handleChange:r.handleChange,handleBlur:r.handleBlur,touched:r.touched,errors:r.errors,values:r.values}};var se=function(e){var t=e.history,a=e.location,r=Object(n.useContext)($),s=r.currentUserData,i=r.setCurrentUserData,o=Object(n.useState)(null),l=Object(c.a)(o,2),m=l[0],d=l[1],h=re({searchMovie:""},void 0,!1,(function(e,a){var n=e.searchMovie,r=a.resetForm;!function(){var e=Object(j.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(n);case 2:void 0===(a=e.sent)[0]?d("Sorry, there are no search results :("):t.push("/movies/details/".concat(a[0]._id)),r();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()})),b=h.handleSubmit,x=h.handleChange,O=h.values;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{className:f.a.navListWrapper,children:[s.authorizationToken&&s.userId?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("li",{className:f.a.navListItem,children:Object(p.jsx)(u.b,{className:f.a.navListLink,to:"/movies/create",children:"Create Movie Article"})}),Object(p.jsx)("li",{className:f.a.navListItem,children:Object(p.jsx)(u.b,{onClick:Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cars-react-app-server.herokuapp.com/users/logout");case 2:i({authToken:null,userId:null,username:null}),t.push("/");case 4:case"end":return e.stop()}}),e)}))),className:f.a.navListLink,children:"Logout \u270b"})})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("li",{className:f.a.navListItem,children:Object(p.jsx)(u.b,{className:f.a.navListLink,to:"/auth/register",children:"Sign up \u270d"})}),Object(p.jsx)("li",{className:f.a.navListItem,children:Object(p.jsx)(u.b,{className:f.a.navListLink,to:"/auth/login",children:"Log in \ud83d\udd11"})})]}),Object(p.jsx)("li",{className:[f.a.navListItem,f.a.searchFormWrapper].join(" "),children:Object(p.jsxs)("form",{onSubmit:b,children:[Object(p.jsx)("input",{className:f.a.searchInput,type:"text",name:"searchMovie",placeholder:"SEARCH MOVIE...",onChange:x,value:O.searchMovie}),Object(p.jsx)("button",{className:f.a.searchBtn,type:"submit",children:"\ud83d\udd0d"})]})})]})}),m?Object(p.jsx)(ae,{message:m,closeModalClickHandler:function(){d(null),t.push(a.pathname)}}):null]})},ie=a(90),ce=a.n(ie);var oe=function(){return Object(p.jsxs)("header",{className:ce.a.header,children:[Object(p.jsx)(d,{}),Object(p.jsx)(o.a,{component:se})]})},ue=a(8),le=a(36),me=a.n(le);var pe=function(){return Object(p.jsx)("section",{children:Object(p.jsxs)("article",{className:me.a.homePage,children:[Object(p.jsx)("img",{className:me.a.moviesBackgroundImage,src:"https://slicksmovieblog.files.wordpress.com/2014/08/cropped-movie-banner-e1408372575210.jpg",alt:"Movie"}),Object(p.jsx)("h2",{className:me.a.moviesForumTitle,children:"Movies Forum"}),Object(p.jsx)("p",{className:me.a.moviesForumDescription,children:"Search for newest movies, post new movies, share opinions and likes anywhere, anytime!"})]})})},de=a(37),he=a.n(de);var ve=function(e){var t=e.title,a=e.img,n=e._id;return Object(p.jsxs)("div",{className:he.a.movieCard,children:[Object(p.jsxs)("article",{className:"card-header-main",children:[Object(p.jsx)("img",{className:he.a.movieCardImage,src:a,alt:"Movie Card"}),Object(p.jsx)("h3",{className:he.a.movieCardTitle,children:t})]}),Object(p.jsx)("article",{className:"card-footer",children:Object(p.jsx)(u.b,{to:"/movies/details/".concat(n),className:he.a.movieCardButton,children:"Details"})})]})},je=a(48),be=a.n(je);var fe=function(){return Object(p.jsxs)("div",{className:be.a.loaderContainer,children:[Object(p.jsxs)("h2",{className:be.a.loaderHeading,children:["Please wait",Object(p.jsx)("span",{children:"."}),Object(p.jsx)("span",{children:"."}),Object(p.jsx)("span",{children:"."})]}),Object(p.jsx)("div",{className:be.a.loaderAnimation})]})};var xe=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!0),i=Object(c.a)(s,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,r(t),u(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pe,{}),Object(p.jsx)("section",{children:Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{style:{fontSize:35,fontWeight:500,fontFamily:"Courier New",textAlign:"center",marginTop:40},children:"Movie Articles"}),Object(p.jsx)("div",{className:"card-wrapper",children:o?Object(p.jsx)(fe,{}):a.map((function(e,t){return Object(p.jsx)(ve,Object(ue.a)({},e),t)}))})]})})]})},Oe=a(6),_e=a.n(Oe),ge=a(12);var we=function(e){var t=e.history,a=Object(n.useContext)($).setCurrentUserData,r=ge.a().shape({email:ge.c().email("Invalid email format!").max(25,"Your email must not be longer than 25 charackters!").min(10,"Your email should be at least 10 charackters!").required("This field is required!"),password:ge.c().min(6,"Password must be at least 6 charcakters!").max(15,"Password should not be longer than 15 charackters!").matches(/[A-Za-z0-9]+/,"Password should contain uppercase,lowercase charackters and digits!").required("This field is required!"),repassword:ge.c().oneOf([ge.b("password"),null],"Passwords must match!").required("This field is required!"),username:ge.c().matches(/[A-Z][A-Za-z0-9]+/,"Username have to start with uppercase letter and continue with lowercase or digits!").trim().required("Username is required for posting new comments!")}),s=re({email:"",password:"",username:""},r,!1,function(){var e=Object(j.a)(v.a.mark((function e(n){var r,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.email,s=n.password,i=n.username,function(){var e=Object(j.a)(v.a.mark((function e(){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cars-react-app-server.herokuapp.com/users/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s,username:i})});case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,a({authorizationToken:c.accessToken,userId:c._id,username:c.username}),t.push("/");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=s.handleSubmit,c=s.handleChange,o=s.handleBlur,u=s.touched,l=s.errors,m=s.values;return Object(p.jsx)("section",{className:_e.a.authView,children:Object(p.jsx)("div",{className:_e.a.cont,children:Object(p.jsx)("div",{className:_e.a.mainBox,children:Object(p.jsx)("div",{className:_e.a.create,children:Object(p.jsxs)("form",{onSubmit:i,children:[Object(p.jsx)("h2",{className:_e.a.authTitle,children:"CREATE ACCOUNT"}),u.username&&l.username?Object(p.jsx)("div",{className:"error",children:l.username}):null,Object(p.jsx)("input",{className:_e.a.user,type:"text",placeholder:"\u2713  YOUR USERNAME",name:"username",onChange:c,onBlur:o,value:m.username}),u.email&&l.email?Object(p.jsx)("div",{className:"error",children:l.email}):null,Object(p.jsx)("input",{className:_e.a.email,type:"email",placeholder:"\ud83d\udd11 YOUR EMAIL",name:"email",onChange:c,onBlur:o,value:m.email}),u.password&&l.password?Object(p.jsx)("div",{className:"error",children:l.password}):null,Object(p.jsx)("input",{className:_e.a.pass,type:"password",placeholder:"\ud83d\udd12 PASSWORD",name:"password",onChange:c,onBlur:o,value:m.password}),u.repassword&&l.repassword?Object(p.jsx)("div",{className:"error",children:l.repassword}):null,Object(p.jsx)("input",{className:_e.a.pass,type:"password",placeholder:"\ud83d\udd13 CONFIRM PASSWORD",name:"repassword",onChange:c,onBlur:o,value:m.repassword}),Object(p.jsx)("button",{type:"submit",className:_e.a.auth,children:"Create Account"})]})})})})})};var Ne=function(e){var t=e.history,a=Object(n.useContext)($).setCurrentUserData,r=re({email:"",password:""},void 0,!1,function(){var e=Object(j.a)(v.a.mark((function e(n){var r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.email,s=n.password,function(){var e=Object(j.a)(v.a.mark((function e(){var n,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cars-react-app-server.herokuapp.com/users/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s})});case 2:return n=e.sent,e.next=5,n.json();case 5:i=e.sent,a({authorizationToken:i.accessToken,userId:i._id,username:i.username}),t.push("/");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s=r.handleSubmit,i=r.handleChange,c=r.values;return Object(p.jsx)("section",{className:_e.a.authView,children:Object(p.jsx)("div",{className:_e.a.cont,children:Object(p.jsx)("div",{className:_e.a.mainBox,children:Object(p.jsx)("div",{className:_e.a.create,children:Object(p.jsxs)("form",{onSubmit:s,children:[Object(p.jsx)("h2",{className:_e.a.authTitle,children:"SIGN UP"}),Object(p.jsx)("input",{className:_e.a.email,type:"email",name:"email",placeholder:"\ud83d\udd11 YOUR EMAIL",onChange:i,value:c.email}),Object(p.jsx)("input",{className:_e.a.pass,type:"password",name:"password",placeholder:"\ud83d\udd12 PASSWORD",onChange:i,value:c.passsword}),Object(p.jsx)("button",{type:"submit",className:_e.a.auth,children:"LOG IN"})]})})})})})},ke=a(10),ye=a.n(ke);var Ie=function(e){var t=e.history,a=Object(n.useContext)($).currentUserData,r=ge.a().shape({movieTitle:ge.c().matches(/[A-Z][a-z0-9]+/,"Title should start with uppercase and continue with lowercase and numbers").min(6,"Movie title should be at least 6 symbols!").max(20,"Movie title should not be longer than 20 symbols!").required("This field is required!"),movieDescription:ge.c().max(100,"Movie description should not be longer than 100 symbols!")}),s=re({movieTitle:"",movieDescription:"",movieImage:""},r,!1,(function(e){var n=e.movieTitle,r=e.movieDescription,s=e.movieImage;!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(n,r,s,a.authorizationToken);case 2:t.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()})),i=s.handleSubmit,c=s.handleChange,o=s.handleBlur,u=s.errors,l=s.values,m=s.touched;return Object(p.jsx)("section",{className:ye.a.createPage,children:Object(p.jsxs)("div",{className:ye.a.createFormWrapper,children:[Object(p.jsx)("h2",{className:ye.a.createFormTitle,children:"CREATE MOVIE ARTICLE"}),Object(p.jsxs)("form",{onSubmit:i,children:[m.movieTitle&&u.movieTitle?Object(p.jsx)("div",{className:"error",children:u.movieTitle}):null,Object(p.jsx)("input",{className:ye.a.movieTitle,type:"text",name:"movieTitle",placeholder:"ENTER MOVIE TITLE",onChange:c,onBlur:o,value:l.movieTitle}),m.movieDescription&&u.movieDescription?Object(p.jsx)("div",{className:"error",children:u.movieDescription}):null,Object(p.jsx)("textarea",{className:ye.a.movieDescription,type:"text",name:"movieDescription",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",onChange:c,onBlur:o,value:l.movieDescription}),m.movieImage&&u.movieImage?Object(p.jsx)("div",{className:"error",children:u.movieImage}):null,Object(p.jsx)("input",{className:ye.a.movieImageURL,type:"text",name:"movieImage",placeholder:"ENTER MOVIE IMAGE URL",onChange:c,onBlur:o,value:l.movieImage}),Object(p.jsx)("button",{className:ye.a.createMovieBtn,type:"submit",children:"CREATE"})]})]})})},Ce=a(27),De=a.n(Ce),Te=a(38),Le=a.n(Te),Be=a(49),Ee=a.n(Be);var Me=function(e){var t=e.content,a=e.author;return Object(p.jsx)("div",{className:Ee.a.commentUser,children:Object(p.jsxs)("p",{className:Ee.a.commentUserContent,children:["\ud83d\udcad ",t,Object(p.jsxs)("i",{className:Ee.a.commentUserName,children:["- ",a]})]})})};var Ae=function(e){var t=e.movieId,a=e.ownerId,r=e.dispatch,s=e.state,i=Object(n.useContext)($).currentUserData;Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,J(t);case 3:e.t1=e.sent,e.t2={type:"load-movie-articles",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,s.isFormSubmited,r]);var c=ge.a().shape({content:ge.c().max(100,"Your comment should not be longer than 100 charackters!").min(1,"Your comment should be at lest 1 charackter long!").trim()}),o=re({content:""},c,!0,function(){var e=Object(j.a)(v.a.mark((function e(a,n){var s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.content,c=n.resetForm,function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(i.username,s,t,i.authorizationToken);case 2:r({type:"post-movie-article-comment"}),c();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),u=o.handleSubmit,l=o.handleChange,m=o.values,d=o.errors,h=o.touched;return Object(p.jsxs)("div",{className:Le.a.comments,children:[Object(p.jsx)("h2",{className:Le.a.commentTitle,children:"Leave your comments here: \ud83d\udcac"}),s.areCommentsLoading?Object(p.jsx)(fe,{}):s.movieArticleComments.map((function(e,t){return Object(p.jsx)(Me,{content:e.content,author:e.author},t)})),i.userId!==a&&i.userId?Object(p.jsxs)("form",{onSubmit:u,children:[h.content&&d.content?Object(p.jsx)("div",{className:"error",children:d.content}):null,Object(p.jsx)("textarea",{className:Le.a.commentInput,name:"content",rows:"4",cols:"50",placeholder:"Enter your expression from this movie",onChange:l,value:m.content}),Object(p.jsx)("button",{className:Le.a.commentSubmit,type:"submit",children:"Post comment"})]}):null]})},Se=a(21),Fe=a.n(Se);var Ue=function(e){var t=e.ownerId,a=e.movieId,r=e.dispatch,s=e.state,i=Object(n.useContext)($).currentUserData,c=Object(o.f)();return Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,z(a);case 3:e.t1=e.sent,e.t2={type:"get-movie-likes",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,s.isLiked,r]),Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,q(a,i.userId);case 3:e.t1=e.sent,e.t2={type:"get-movie-likes-from-user",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,i.userId,s.isLiked,r]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:Fe.a.movieDetailsButtonWrapper,children:[i.userId?i.userId!==t?Object(p.jsx)(p.Fragment,{children:s.movieArticleLikesFromUser.length?null:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{onClick:function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"set-is-liked-to-true"}),e.next=3,W(a,i.authorizationToken);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()},className:[Fe.a.movieDetailsBtnLike,Fe.a.movieBtn].join(" "),children:"Like \ud83d\udc4d"})})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:function(){return r({type:"delete-current-movie"})},className:[Fe.a.movieDetailsBtnDelete,Fe.a.movieBtn].join(" "),children:"\u274c Delete"}),Object(p.jsx)(u.b,{to:"/movies/edit/".concat(a),className:[Fe.a.movieDetailsBtnEdit,Fe.a.movieBtn].join(" "),children:"\u270d Edit"})]}):null,s.deleteMovieArticleConfirmation?Object(p.jsx)(ae,{message:s.deleteMovieArticleConfirmation,closeModalClickHandler:Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(a,i.authorizationToken);case 2:c.push("/");case 3:case"end":return e.stop()}}),e)})))}):null]}),Object(p.jsxs)("span",{className:Fe.a.movieLikes,children:["Likes: ",s.numberOfLikes]})]})},Re="load-movie-articles",Pe="post-movie-article-comment",We="get-movie-article",Ve="get-movie-likes",ze="get-movie-likes-from-user",He="set-is-liked-to-true",qe="delete-current-movie";var Ye=function(e,t){switch(t.type){case Re:return Object(ue.a)(Object(ue.a)({},e),{},{movieArticleComments:t.payload,areCommentsLoading:!1,isFormSubmited:!1});case Pe:return Object(ue.a)(Object(ue.a)({},e),{},{isFormSubmited:!0});case We:return Object(ue.a)(Object(ue.a)({},e),{},{movieArticle:t.payload});case Ve:return Object(ue.a)(Object(ue.a)({},e),{},{numberOfLikes:t.payload});case ze:return Object(ue.a)(Object(ue.a)({},e),{},{movieArticleLikesFromUser:t.payload});case He:return Object(ue.a)(Object(ue.a)({},e),{},{isLiked:!0});case qe:return Object(ue.a)(Object(ue.a)({},e),{},{deleteMovieArticleConfirmation:"Are u sure u want to delete this movie article?!"});default:return e}};var Ze=function(e){var t=e.match.params.movieId,a=Object(n.useReducer)(Ye,{movieArticle:{},movieArticleComments:[],areCommentsLoading:!0,isFormSubmited:!1,numberOfLikes:0,movieArticleLikesFromUser:[],isLiked:!1,deleteMovieArticleConfirmation:""}),r=Object(c.a)(a,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,E(t);case 3:e.t1=e.sent,e.t2={type:"get-movie-article",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(p.jsx)("section",{id:"details-view",children:Object(p.jsxs)("div",{className:De.a.movieContainer,children:[Object(p.jsxs)("h1",{className:De.a.movieDetailsTitle,children:["Movie title: ",s.movieArticle.title]}),Object(p.jsx)("img",{className:De.a.movieDetailsImg,src:s.movieArticle.img,alt:"movie"}),Object(p.jsxs)("div",{className:De.a.movieDetailsInfo,children:[Object(p.jsx)("h3",{className:De.a.movieDetailsInfoImg,children:"Movie Description"}),Object(p.jsx)("p",{className:De.a.movieDetailsInfoParagraph,children:s.movieArticle.description}),Object(p.jsx)(Ue,{dispatch:i,movieId:t,ownerId:s.movieArticle._ownerId,state:s}),Object(p.jsx)(Ae,{dispatch:i,movieId:t,ownerId:s.movieArticle._ownerId,state:s})]})]})})};var Ge=function(e){var t=e.match,a=e.history,r=Object(n.useState)({}),s=Object(c.a)(r,2),i=s[0],o=s[1],u=Object(n.useContext)($).currentUserData;return Object(n.useEffect)((function(){return E(t.params.movieId).then((function(e){return o(e)}))}),[t.params.movieId]),Object(p.jsx)("section",{className:ye.a.createPage,children:Object(p.jsxs)("div",{className:ye.a.createFormWrapper,children:[Object(p.jsx)("h2",{className:ye.a.createFormTitle,children:"EDIT MOVIE ARTICLE"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target,r=n.movieTitle,s=n.movieDescription,i=n.movieImage;!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(r.value,s.value,i.value,t.params.movieId,u.authorizationToken);case 2:a.push("/movies/details/".concat(t.params.movieId));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()},children:[Object(p.jsx)("input",{className:ye.a.movieTitle,type:"text",name:"movieTitle",placeholder:"ENTER MOVIE TITLE",defaultValue:i.title}),Object(p.jsx)("textarea",{className:ye.a.movieDescription,type:"text",name:"movieDescription",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",defaultValue:i.description}),Object(p.jsx)("input",{className:ye.a.movieImageURL,type:"text",name:"movieImage",placeholder:"ENTER MOVIE IMAGE URL",defaultValue:i.img}),Object(p.jsx)("button",{className:ye.a.createMovieBtn,type:"submit",children:"EDIT"})]})]})})};var Je=function(){return Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/",exact:!0,component:xe}),Object(p.jsx)(o.a,{path:"/auth/register",exact:!0,component:we}),Object(p.jsx)(o.a,{path:"/auth/login",exact:!0,component:Ne}),Object(p.jsx)(o.a,{path:"/movies/create",exact:!0,component:Ie}),Object(p.jsx)(o.a,{path:"/movies/details/:movieId",exact:!0,component:Ze}),Object(p.jsx)(o.a,{path:"/movies/edit/:movieId",exact:!0,component:Ge})]})},Ke=a(94),Qe=a.n(Ke);var Xe=function(){return Object(p.jsx)("footer",{children:Object(p.jsx)("div",{className:Qe.a.footer,children:Object(p.jsx)("p",{children:"Site created via M.Kolev. All rights reserved"})})})};var $e=function(){var e=Object(n.useState)({authorizationToken:null,userId:null,username:null}),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)($.Provider,{value:{currentUserData:a,setCurrentUserData:r},children:[Object(p.jsx)(oe,{}),Object(p.jsx)(Je,{})]}),Object(p.jsx)(Xe,{})]})},et=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,207)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),s(e),i(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(u.a,{children:Object(p.jsx)(o.a,{component:$e,exact:!0})})}),document.getElementById("root")),et()},21:function(e,t,a){e.exports={movieDetailsButtonWrapper:"DetailsButtons_movieDetailsButtonWrapper__3mvip",movieDetailsBtnDelete:"DetailsButtons_movieDetailsBtnDelete__1iHRH",movieDetailsBtnEdit:"DetailsButtons_movieDetailsBtnEdit__29_wv",movieDetailsBtnLike:"DetailsButtons_movieDetailsBtnLike__2UFd_",movieBtn:"DetailsButtons_movieBtn__2_EDE",movieLikes:"DetailsButtons_movieLikes__2R3Aq"}},27:function(e,t,a){e.exports={movieContainer:"Details_movieContainer__bXLeu",movieDetailsImg:"Details_movieDetailsImg__HdUz9",movieDetailsTitle:"Details_movieDetailsTitle__fsiae",movieDetailsInfo:"Details_movieDetailsInfo__1pco2",movieDetailsInfoImg:"Details_movieDetailsInfoImg__1C1Zm",movieDetailsInfoParagraph:"Details_movieDetailsInfoParagraph__kE1fQ"}},35:function(e,t,a){e.exports={overlay:"Modal_overlay__1vrlA",modal:"Modal_modal__1avHu",action:"Modal_action__3uZn8",message:"Modal_message__77rZH"}},36:function(e,t,a){e.exports={homePage:"MoviesForum_homePage__3zcuu",moviesBackgroundImage:"MoviesForum_moviesBackgroundImage__32-7u",moviesForumTitle:"MoviesForum_moviesForumTitle__1QG1M",moviesForumDescription:"MoviesForum_moviesForumDescription__1ioAS"}},37:function(e,t,a){e.exports={movieCard:"MovieCard_movieCard__2xRsx",movieCardTitle:"MovieCard_movieCardTitle__1pj1T",movieCardImage:"MovieCard_movieCardImage__1JM2n",movieCardButton:"MovieCard_movieCardButton__tbmFH"}},38:function(e,t,a){e.exports={comments:"CommentSection_comments__1X8sj",commentTitle:"CommentSection_commentTitle__1PSk6",commentInput:"CommentSection_commentInput__7tDii",commentSubmit:"CommentSection_commentSubmit__3LZYb"}},48:function(e,t,a){e.exports={loaderContainer:"Loader_loaderContainer__2mtzF",loaderAnimation:"Loader_loaderAnimation__3BT-B",spin:"Loader_spin__1UXuz",loaderHeading:"Loader_loaderHeading__K4MYt",blink:"Loader_blink__1wsdb",empty:"Loader_empty__eMLRb"}},49:function(e,t,a){e.exports={commentUser:"CommentCard_commentUser__NVcTS",commentUserContent:"CommentCard_commentUserContent__2iR1j",commentUserName:"CommentCard_commentUserName__Ranbw"}},6:function(e,t,a){e.exports={authView:"Auth_authView__155wR",cont:"Auth_cont__2nI8n",mainBox:"Auth_mainBox__3-RK2",create:"Auth_create__2iWT1",authTitle:"Auth_authTitle__1WxSV",user:"Auth_user__BuWuK",email:"Auth_email__1z0K8",pass:"Auth_pass__1ZWqY",auth:"Auth_auth__3J_oc"}},60:function(e,t,a){e.exports={logo:"Logo_logo__2DDgH",navListLink:"Logo_navListLink__3iPSU"}},90:function(e,t,a){e.exports={header:"Header_header__39cre"}},94:function(e,t,a){e.exports={footer:"Footer_footer__1UlGQ"}}},[[206,1,2]]]);
//# sourceMappingURL=main.79978f44.chunk.js.map