(this["webpackJsonpmovie-react-app"]=this["webpackJsonpmovie-react-app"]||[]).push([[0],{10:function(e,t,a){e.exports={createPage:"Decorate_createPage__3Wn0Q",createFormWrapper:"Decorate_createFormWrapper__2FwBu",createFormTitle:"Decorate_createFormTitle__1yns7",movieTitle:"Decorate_movieTitle__3I_Y7",movieDescription:"Decorate_movieDescription__3j-t1",movieImageURL:"Decorate_movieImageURL__2UDhI",createMovieBtn:"Decorate_createMovieBtn__2OGDp"}},101:function(e,t,a){},102:function(e,t,a){},13:function(e,t,a){e.exports={navListItem:"Navigation_navListItem__2qYtC",navListLink:"Navigation_navListLink__V8qGO",navListWrapper:"Navigation_navListWrapper__4BGZB",searchFormWrapper:"Navigation_searchFormWrapper__1D6k6",searchInput:"Navigation_searchInput__3njbn",searchBtn:"Navigation_searchBtn__20J2k"}},19:function(e,t,a){e.exports={loader:"Loader_loader__2y3t2",dot:"Loader_dot__H9eJx",dot1:"Loader_dot1__30nbw",dot2:"Loader_dot2__Fr4J3",dot3:"Loader_dot3__1WDe9",dot4:"Loader_dot4__1X3Rj",reveal:"Loader_reveal__3Dyqj",slide:"Loader_slide__1aB-I"}},207:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(88),i=a.n(s),c=(a(101),a(8)),o=(a(102),a(4)),u=a(11),l=a(61),m=a.n(l),d=a(0);var p=function(){return Object(d.jsx)("div",{className:m.a.logo,children:Object(d.jsx)(u.b,{className:m.a.navListLink,to:"/",children:Object(d.jsx)("img",{src:"https://th.bing.com/th/id/R.5eebdba556754091bfcae7839bd65da6?rik=7mP2jf6zMqYapw&pid=ImgRaw&r=0",alt:"logo"})})})},h=a(2),v=a.n(h),j=a(3),b=a(13),x=a.n(b);function f(e,t){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(v.a.mark((function e(t,a){var r,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,a);case 3:if(!1!==(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:throw n=e.sent,new Error(n.message);case 11:return e.prev=11,e.next=14,r.json();case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(11),e.abrupt("return",r);case 20:e.next=26;break;case 22:throw e.prev=22,e.t1=e.catch(0),alert(e.t1.message),e.t1;case 26:case"end":return e.stop()}}),e,null,[[0,22],[11,17]])})))).apply(this,arguments)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={method:e,headers:{}};return t&&(r.headers["X-Authorization"]=t),a&&(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(a)),r}var g="https://cars-react-app-server.herokuapp.com";function w(e){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(g+t,_("get"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,a){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(v.a.mark((function e(t,a,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(g+t,_("post",a,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,a){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(v.a.mark((function e(t,a,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(g+t,_("put",a,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){return T.apply(this,arguments)}function T(){return(T=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(g+t,_("delete",a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return M.apply(this,arguments)}function M(){return(M=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/movies");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return(A=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/movies/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a,r){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(v.a.mark((function e(t,a,r,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/movies",n,{title:t,description:a,img:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,a,r,n){return U.apply(this,arguments)}function U(){return(U=Object(j.a)(v.a.mark((function e(t,a,r,n,s){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/data/movies/".concat(n),s,{title:t,description:a,img:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return P.apply(this,arguments)}function P(){return(P=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("/data/movies/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/likes",a,{movieId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return(H=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/likes?where=movieId%3D%22".concat(t,"%22&distinct=_ownerId&count"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/likes?where=movieId%3D%22".concat(t,"%22%20and%20_ownerId%3D%22").concat(a,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/movies?where=title%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/data/comments?where=movieId%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t,a,r){return X.apply(this,arguments)}function X(){return(X=Object(j.a)(v.a.mark((function e(t,a,r,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/comments",n,{author:t,content:a,movieId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=n.a.createContext("No Provider :("),ee=a(31),te=a.n(ee);var ae=function(e){var t=e.message,a=e.closeModalClickHandler,r=e.cancelActionHandler;return Object(d.jsx)("div",{className:te.a.overlay,children:Object(d.jsxs)("div",{className:te.a.modal,children:[Object(d.jsx)("p",{className:te.a.message,children:t}),Object(d.jsx)("button",{onClick:a,className:te.a.action,children:"Okay"}),r?Object(d.jsx)("button",{onClick:r,className:te.a.action,children:"Cancel"}):null]})})},re=a(96);var ne=function(e,t,a,r){var n=Object(re.a)({initialValues:e,validateOnChange:a,validationSchema:t,onSubmit:r});return{handleSubmit:n.handleSubmit,handleChange:n.handleChange,handleBlur:n.handleBlur,touched:n.touched,errors:n.errors,values:n.values}};var se=function(e){var t=e.history,a=e.location,n=Object(r.useState)(null),s=Object(c.a)(n,2),i=s[0],o=s[1],l=Object(r.useContext)($),m=l.currentUserData,p=l.setCurrentUserData,h=ne({searchMovie:""},void 0,!1,function(){var e=Object(j.a)(v.a.mark((function e(a,r){var n,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.searchMovie,s=r.resetForm,e.next=4,J(n);case 4:void 0===(i=e.sent)[0]?o("Sorry, there are no search results :("):t.push("/movies/details/".concat(i[0]._id)),s();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),b=h.handleSubmit,f=h.handleChange,O=h.values;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{className:x.a.navListWrapper,children:[m.authorizationToken&&m.userId?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:x.a.navListItem,children:Object(d.jsx)(u.b,{className:x.a.navListLink,to:"/movies/create",children:"Create Movie Article"})}),Object(d.jsx)("li",{className:x.a.navListItem,children:Object(d.jsx)(u.b,{onClick:Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cars-react-app-server.herokuapp.com/users/logout");case 2:p({authToken:null,userId:null,username:null});case 3:case"end":return e.stop()}}),e)}))),to:"/",className:x.a.navListLink,children:"Logout \u270b"})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:x.a.navListItem,children:Object(d.jsx)(u.b,{className:x.a.navListLink,to:"/auth/register",children:"Sign up \u270d"})}),Object(d.jsx)("li",{className:x.a.navListItem,children:Object(d.jsx)(u.b,{className:x.a.navListLink,to:"/auth/login",children:"Log in \ud83d\udd11"})})]}),Object(d.jsx)("li",{className:[x.a.navListItem,x.a.searchFormWrapper].join(" "),children:Object(d.jsxs)("form",{onSubmit:b,children:[Object(d.jsx)("input",{className:x.a.searchInput,type:"text",name:"searchMovie",placeholder:"SEARCH MOVIE...",onChange:f,value:O.searchMovie}),Object(d.jsx)("button",{className:x.a.searchBtn,type:"submit",children:"\ud83d\udd0d"})]})})]})}),i&&Object(d.jsx)(ae,{message:i,closeModalClickHandler:function(){o(null),t.push(a.pathname)}})]})},ie=a(91),ce=a.n(ie);var oe=function(){return Object(d.jsxs)("header",{className:ce.a.header,children:[Object(d.jsx)(p,{}),Object(d.jsx)(o.a,{component:se})]})},ue=a(9),le=a(39),me=a.n(le);var de=function(){return Object(d.jsx)("section",{children:Object(d.jsxs)("article",{className:me.a.homePage,children:[Object(d.jsx)("img",{className:me.a.moviesBackgroundImage,src:"https://slicksmovieblog.files.wordpress.com/2014/08/cropped-movie-banner-e1408372575210.jpg",alt:"Movie"}),Object(d.jsx)("h2",{className:me.a.moviesForumTitle,children:"Movies Forum"}),Object(d.jsx)("p",{className:me.a.moviesForumDescription,children:"Search for newest movies, post new movies, share opinions and likes anywhere, anytime!"})]})})},pe=a(32),he=a.n(pe),ve=a(15);var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=Object(r.useState)(e),i=Object(c.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)(!1),m=Object(c.a)(l,2),d=m[0],p=m[1];return Object(r.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(void 0,Object(ve.a)(a));case 2:r=e.sent,u(r),p(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,t]),n?[o,d]:o};var be=function(e){var t=e.title,a=e.img,r=e._id,n=je(0,z,[r],!1);return Object(d.jsxs)("div",{className:he.a.movieCard,children:[Object(d.jsxs)("article",{className:"card-header-main",children:[Object(d.jsx)("img",{className:he.a.movieCardImage,src:a,alt:"Movie Card"}),Object(d.jsx)("h3",{className:he.a.movieCardTitle,children:t})]}),Object(d.jsx)("article",{className:"card-footer",children:Object(d.jsx)(u.b,{to:"/movies/details/".concat(r),className:he.a.movieCardButton,children:"Details"})}),Object(d.jsxs)("span",{className:he.a.movieLikes,children:[n," Likes \ud83d\udc4d"]})]})},xe=a(19),fe=a.n(xe);var Oe=function(){return Object(d.jsxs)("div",{className:fe.a.loader,children:[Object(d.jsx)("div",{className:[fe.a.dot,fe.a.dot1].join(" ")}),Object(d.jsx)("div",{className:[fe.a.dot,fe.a.dot2].join(" ")}),Object(d.jsx)("div",{className:[fe.a.dot,fe.a.dot3].join(" ")}),Object(d.jsx)("div",{className:[fe.a.dot,fe.a.dot4].join(" ")})]})};var _e=function(){var e=je([],L,[],!0),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(de,{}),Object(d.jsx)("section",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{style:{fontSize:35,fontWeight:500,fontFamily:"Courier New",textAlign:"center",marginTop:40},children:"Movie Articles"}),Object(d.jsx)("div",{className:"card-wrapper",children:r?a.map((function(e,t){return Object(d.jsx)(be,Object(ue.a)({},e),t)})):Object(d.jsx)(Oe,{})})]})})]})},ge=a(6),we=a.n(ge),Ne=a(12);var Ie=function(e){var t=e.history,a=Object(r.useContext)($).setCurrentUserData,n=Ne.a().shape({email:Ne.c().email("Invalid email format!").max(25,"Your email must not be longer than 25 charackters!").min(10,"Your email should be at least 10 charackters!").required("This field is required!"),password:Ne.c().min(6,"Password must be at least 6 charcakters!").max(15,"Password should not be longer than 15 charackters!").matches(/[A-Za-z0-9]+/,"Password should contain uppercase,lowercase charackters and digits!").required("This field is required!"),repassword:Ne.c().oneOf([Ne.b("password"),null],"Passwords must match!").required("This field is required!"),username:Ne.c().matches(/[A-Z][A-Za-z0-9]+/,"Username have to start with uppercase letter and continue with lowercase or digits!").trim().required("Username is required!")}),s=ne({email:"",password:"",username:""},n,!1,function(){var e=Object(j.a)(v.a.mark((function e(r){var n,s,i,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.email,s=r.password,i=r.username,e.next=3,fetch("https://cars-react-app-server.herokuapp.com/users/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:s,username:i})});case 3:return c=e.sent,e.next=6,c.json();case 6:o=e.sent,a({authorizationToken:o.accessToken,userId:o._id,username:o.username}),t.push("/");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=s.handleSubmit,c=s.handleChange,o=s.handleBlur,u=s.touched,l=s.errors,m=s.values;return Object(d.jsx)("section",{className:we.a.authView,children:Object(d.jsx)("div",{className:we.a.cont,children:Object(d.jsx)("div",{className:we.a.mainBox,children:Object(d.jsx)("div",{className:we.a.create,children:Object(d.jsxs)("form",{onSubmit:i,children:[Object(d.jsx)("h2",{className:we.a.authTitle,children:"CREATE ACCOUNT"}),u.username&&l.username&&Object(d.jsx)("div",{className:"error",children:l.username}),Object(d.jsx)("input",{className:we.a.user,type:"text",placeholder:"\ud83d\udd11  YOUR USERNAME",name:"username",onChange:c,onBlur:o,value:m.username}),u.email&&l.email&&Object(d.jsx)("div",{className:"error",children:l.email}),Object(d.jsx)("input",{className:we.a.email,type:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",name:"email",onChange:c,onBlur:o,value:m.email}),u.password&&l.password&&Object(d.jsx)("div",{className:"error",children:l.password}),Object(d.jsx)("input",{className:we.a.pass,type:"password",placeholder:"\ud83d\udd12 PASSWORD",name:"password",onChange:c,onBlur:o,value:m.password}),u.repassword&&l.repassword&&Object(d.jsx)("div",{className:"error",children:l.repassword}),Object(d.jsx)("input",{className:we.a.pass,type:"password",placeholder:"\ud83d\udd13 CONFIRM PASSWORD",name:"repassword",onChange:c,onBlur:o,value:m.repassword}),Object(d.jsx)("button",{type:"submit",className:we.a.auth,children:"Create Account"})]})})})})})};var ye=function(e){var t=e.history,a=Object(r.useContext)($).setCurrentUserData,n=Object(r.useState)(""),s=Object(c.a)(n,2),i=s[0],o=s[1],u=ne({email:"",password:""},void 0,!1,function(){var e=Object(j.a)(v.a.mark((function e(r,n){var s,i,c,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.email,i=r.password,n.resetForm,e.next=4,fetch("https://cars-react-app-server.herokuapp.com/users/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:i})});case 4:return c=e.sent,e.next=7,c.json();case 7:u=e.sent,!1===c.ok?o("There occured an error while trying to login: ".concat(u.message)):(a({authorizationToken:u.accessToken,userId:u._id,username:u.username}),t.push("/"));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),l=u.handleSubmit,m=u.handleChange,p=u.values;return Object(d.jsxs)("section",{className:we.a.authView,children:[Object(d.jsx)("div",{className:we.a.cont,children:Object(d.jsx)("div",{className:we.a.mainBox,children:Object(d.jsx)("div",{className:we.a.create,children:Object(d.jsxs)("form",{onSubmit:l,children:[Object(d.jsx)("h2",{className:we.a.authTitle,children:"SIGN UP"}),Object(d.jsx)("input",{className:we.a.email,type:"email",name:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",onChange:m,value:p.email}),Object(d.jsx)("input",{className:we.a.pass,type:"password",name:"password",placeholder:"\ud83d\udd12 PASSWORD",onChange:m,value:p.passsword}),Object(d.jsx)("button",{type:"submit",className:we.a.auth,children:"LOG IN"})]})})})}),i&&Object(d.jsx)(ae,{message:i,closeModalClickHandler:function(){return o("")}})]})},ke=a(10),Ce=a.n(ke);var De=function(e){var t=e.history,a=Object(r.useContext)($).currentUserData,n=Ne.a().shape({movieTitle:Ne.c().matches(/[A-Z][a-z0-9]+/,"Title should start with uppercase and continue with lowercase and numbers").min(6,"Movie title should be at least 6 symbols!").max(50,"Movie title should not be longer than 50 symbols!").required("This field is required!"),movieDescription:Ne.c().max(100,"Movie description should not be longer than 100 symbols!")}),s=ne({movieTitle:"",movieDescription:"",movieImage:""},n,!1,function(){var e=Object(j.a)(v.a.mark((function e(r){var n,s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.movieTitle,s=r.movieDescription,i=r.movieImage,e.next=3,B(n,s,i,a.authorizationToken);case 3:t.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=s.handleSubmit,c=s.handleChange,o=s.handleBlur,u=s.errors,l=s.values,m=s.touched;return Object(d.jsx)("section",{className:Ce.a.createPage,children:Object(d.jsxs)("div",{className:Ce.a.createFormWrapper,children:[Object(d.jsx)("h2",{className:Ce.a.createFormTitle,children:"CREATE MOVIE ARTICLE"}),Object(d.jsxs)("form",{onSubmit:i,children:[m.movieTitle&&u.movieTitle&&Object(d.jsx)("div",{className:"error",children:u.movieTitle}),Object(d.jsx)("input",{className:Ce.a.movieTitle,type:"text",name:"movieTitle",placeholder:"ENTER MOVIE TITLE",onChange:c,onBlur:o,value:l.movieTitle}),m.movieDescription&&u.movieDescription&&Object(d.jsx)("div",{className:"error",children:u.movieDescription}),Object(d.jsx)("textarea",{className:Ce.a.movieDescription,type:"text",name:"movieDescription",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",onChange:c,onBlur:o,value:l.movieDescription}),m.movieImage&&u.movieImage&&Object(d.jsx)("div",{className:"error",children:u.movieImage}),Object(d.jsx)("input",{className:Ce.a.movieImageURL,type:"text",name:"movieImage",placeholder:"ENTER MOVIE IMAGE URL",onChange:c,onBlur:o,value:l.movieImage}),Object(d.jsx)("button",{className:Ce.a.createMovieBtn,type:"submit",children:"CREATE"})]})]})})},Te=a(29),Le=a.n(Te),Me=a(40),Se=a.n(Me),Ae=a(50),Be=a.n(Ae);var Ee=function(e){var t=e.content,a=e.author;return Object(d.jsx)("div",{className:Be.a.commentUser,children:Object(d.jsxs)("p",{className:Be.a.commentUserContent,children:["\ud83d\udcad ",t,Object(d.jsxs)("i",{className:Be.a.commentUserName,children:["- ",a]})]})})};var Fe=function(e){var t=e.movieId,a=e.ownerId,n=e.dispatch,s=e.state,i=Object(r.useContext)($).currentUserData;Object(r.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,G(t);case 3:e.t1=e.sent,e.t2={type:"load-movie-articles",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,s.isFormSubmited,n]);var c=Ne.a().shape({content:Ne.c().max(100,"Your comment should not be longer than 100 charackters!").min(1,"Your comment should be at lest 1 charackter long!").trim()}),o=ne({content:""},c,!0,function(){var e=Object(j.a)(v.a.mark((function e(a,r){var s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.content,c=r.resetForm,e.next=4,Q(i.username,s,t,i.authorizationToken);case 4:n({type:"post-movie-article-comment"}),c();case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),u=o.handleSubmit,l=o.handleChange,m=o.values,p=o.errors,h=o.touched;return Object(d.jsxs)("div",{className:Se.a.comments,children:[Object(d.jsx)("h2",{className:Se.a.commentTitle,children:"Leave your comments here: \ud83d\udcac"}),s.areCommentsLoading?Object(d.jsx)(Oe,{}):s.movieArticleComments.map((function(e,t){return Object(d.jsx)(Ee,{content:e.content,author:e.author},t)})),i.userId!==a&&i.userId&&Object(d.jsxs)("form",{onSubmit:u,children:[h.content&&p.content&&Object(d.jsx)("div",{className:"error",children:p.content}),Object(d.jsx)("textarea",{className:Se.a.commentInput,name:"content",rows:"4",cols:"50",placeholder:"Enter your expression from this movie",onChange:l,value:m.content}),Object(d.jsx)("button",{className:Se.a.commentSubmit,type:"submit",children:"Post comment"})]})]})},Ue=a(25),Re=a.n(Ue);var Pe=function(e){var t=e.ownerId,a=e.movieId,n=e.dispatch,s=e.state,i=Object(r.useContext)($).currentUserData,c=Object(o.f)();Object(r.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,q(a,i.userId);case 3:e.t1=e.sent,e.t2={type:"get-movie-likes-from-user",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,i.userId,s.isLiked,n]);var l=function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(a,i.authorizationToken);case 2:n({type:"set-is-liked-to-true"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:Re.a.movieDetailsButtonWrapper,children:[i.userId?i.userId!==t?Object(d.jsx)(d.Fragment,{children:!s.movieArticleLikesFromUser.length&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{onClick:l,className:[Re.a.movieDetailsBtnLike,Re.a.movieBtn].join(" "),children:"Like \ud83d\udc4d"})})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return n({type:"delete-current-movie"})},className:[Re.a.movieDetailsBtnDelete,Re.a.movieBtn].join(" "),children:"\u274c Delete"}),Object(d.jsx)(u.b,{to:"/movies/edit/".concat(a),className:[Re.a.movieDetailsBtnEdit,Re.a.movieBtn].join(" "),children:"\u270d Edit"})]}):null,s.deleteMovieArticleConfirmation&&Object(d.jsx)(ae,{message:s.deleteMovieArticleConfirmation,closeModalClickHandler:Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(a,i.authorizationToken);case 2:c.push("/");case 3:case"end":return e.stop()}}),e)}))),cancelActionHandler:function(){return n({type:"cancel-delete-movie"})}})]})})},We="load-movie-articles",Ve="post-movie-article-comment",ze="get-movie-article",He="get-movie-likes-from-user",qe="set-is-liked-to-true",Ye="delete-current-movie",Je="cancel-delete-movie";var Ze=function(e,t){switch(t.type){case We:return Object(ue.a)(Object(ue.a)({},e),{},{movieArticleComments:t.payload,areCommentsLoading:!1,isFormSubmited:!1});case Ve:return Object(ue.a)(Object(ue.a)({},e),{},{isFormSubmited:!0});case ze:return Object(ue.a)(Object(ue.a)({},e),{},{movieArticle:t.payload,isMovieLoading:!1});case He:return Object(ue.a)(Object(ue.a)({},e),{},{movieArticleLikesFromUser:t.payload});case qe:return Object(ue.a)(Object(ue.a)({},e),{},{isLiked:!0});case Ye:return Object(ue.a)(Object(ue.a)({},e),{},{deleteMovieArticleConfirmation:"Are u sure u want to delete this movie article?!"});case Je:return Object(ue.a)(Object(ue.a)({},e),{},{deleteMovieArticleConfirmation:null});default:return e}};var Ge=function(e){var t=e.match.params.movieId,a=Object(r.useReducer)(Ze,{movieArticle:{},movieArticleComments:[],areCommentsLoading:!0,isFormSubmited:!1,numberOfLikes:0,movieArticleLikesFromUser:[],isLiked:!1,deleteMovieArticleConfirmation:null,isMovieLoading:!0}),n=Object(c.a)(a,2),s=n[0],i=n[1];return Object(r.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=i,e.next=3,S(t);case 3:e.t1=e.sent,e.t2={type:"get-movie-article",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(d.jsx)(d.Fragment,{children:s.isMovieLoading?Object(d.jsx)(Oe,{}):Object(d.jsx)("section",{id:"details-view",children:Object(d.jsxs)("div",{className:Le.a.movieContainer,children:[Object(d.jsxs)("h1",{className:Le.a.movieDetailsTitle,children:["Movie title: ",s.movieArticle.title]}),Object(d.jsx)("img",{className:Le.a.movieDetailsImg,src:s.movieArticle.img,alt:"movie"}),Object(d.jsxs)("div",{className:Le.a.movieDetailsInfo,children:[Object(d.jsx)("h3",{className:Le.a.movieDetailsInfoImg,children:"Movie Description"}),Object(d.jsx)("p",{className:Le.a.movieDetailsInfoParagraph,children:s.movieArticle.description}),Object(d.jsx)(Pe,{dispatch:i,movieId:t,ownerId:s.movieArticle._ownerId,state:s}),Object(d.jsx)(Fe,{dispatch:i,movieId:t,ownerId:s.movieArticle._ownerId,state:s})]})]})})})};var Ke=function(e){var t=e.match,a=e.history,n=Object(r.useContext)($).currentUserData,s=je({},S,[t.params.movieId],!1),i=function(){var e=Object(j.a)(v.a.mark((function e(r){var s,i,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),s=r.target,i=s.movieTitle,c=s.movieDescription,o=s.movieImage,e.next=4,F(i.value,c.value,o.value,t.params.movieId,n.authorizationToken);case 4:a.push("/movies/details/".concat(t.params.movieId));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("section",{className:Ce.a.createPage,children:Object(d.jsxs)("div",{className:Ce.a.createFormWrapper,children:[Object(d.jsx)("h2",{className:Ce.a.createFormTitle,children:"EDIT MOVIE ARTICLE"}),Object(d.jsxs)("form",{onSubmit:i,children:[Object(d.jsx)("input",{className:Ce.a.movieTitle,type:"text",name:"movieTitle",placeholder:"ENTER MOVIE TITLE",defaultValue:s.title}),Object(d.jsx)("textarea",{className:Ce.a.movieDescription,type:"text",name:"movieDescription",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",defaultValue:s.description}),Object(d.jsx)("input",{className:Ce.a.movieImageURL,type:"text",name:"movieImage",placeholder:"ENTER MOVIE IMAGE URL",defaultValue:s.img}),Object(d.jsx)("button",{className:Ce.a.createMovieBtn,type:"submit",children:"EDIT"})]})]})})};var Qe=function(){return Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{path:"/",exact:!0,component:_e}),Object(d.jsx)(o.a,{path:"/auth/register",exact:!0,component:Ie}),Object(d.jsx)(o.a,{path:"/auth/login",exact:!0,component:ye}),Object(d.jsx)(o.a,{path:"/movies/create",exact:!0,component:De}),Object(d.jsx)(o.a,{path:"/movies/details/:movieId",exact:!0,component:Ge}),Object(d.jsx)(o.a,{path:"/movies/edit/:movieId",exact:!0,component:Ke})]})},Xe=a(95),$e=a.n(Xe);var et=function(){return Object(d.jsx)("footer",{children:Object(d.jsx)("div",{className:$e.a.footer,children:Object(d.jsx)("p",{children:"Site created via M.Kolev. All rights reserved"})})})};var tt=function(){var e=Object(r.useState)({authorizationToken:null,userId:null,username:null}),t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)($.Provider,{value:{currentUserData:a,setCurrentUserData:n},children:[Object(d.jsx)(oe,{}),Object(d.jsx)(Qe,{})]}),Object(d.jsx)(et,{})]})},at=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,208)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),s(e),i(e)}))};i.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(u.a,{children:Object(d.jsx)(o.a,{component:tt,exact:!0})})}),document.getElementById("root")),at()},25:function(e,t,a){e.exports={movieDetailsButtonWrapper:"DetailsButtons_movieDetailsButtonWrapper__3mvip",movieDetailsBtnDelete:"DetailsButtons_movieDetailsBtnDelete__1iHRH",movieDetailsBtnEdit:"DetailsButtons_movieDetailsBtnEdit__29_wv",movieDetailsBtnLike:"DetailsButtons_movieDetailsBtnLike__2UFd_",movieBtn:"DetailsButtons_movieBtn__2_EDE"}},29:function(e,t,a){e.exports={movieContainer:"Details_movieContainer__bXLeu",movieDetailsImg:"Details_movieDetailsImg__HdUz9",movieDetailsTitle:"Details_movieDetailsTitle__fsiae",movieDetailsInfo:"Details_movieDetailsInfo__1pco2",movieDetailsInfoImg:"Details_movieDetailsInfoImg__1C1Zm",movieDetailsInfoParagraph:"Details_movieDetailsInfoParagraph__kE1fQ"}},31:function(e,t,a){e.exports={overlay:"Modal_overlay__1vrlA",modal:"Modal_modal__1avHu",action:"Modal_action__3uZn8",message:"Modal_message__77rZH"}},32:function(e,t,a){e.exports={movieCard:"MovieCard_movieCard__2xRsx",movieCardTitle:"MovieCard_movieCardTitle__1pj1T",movieCardImage:"MovieCard_movieCardImage__1JM2n",movieCardButton:"MovieCard_movieCardButton__tbmFH",movieLikes:"MovieCard_movieLikes__3TvS0"}},39:function(e,t,a){e.exports={homePage:"MoviesForum_homePage__3zcuu",moviesBackgroundImage:"MoviesForum_moviesBackgroundImage__32-7u",moviesForumTitle:"MoviesForum_moviesForumTitle__1QG1M",moviesForumDescription:"MoviesForum_moviesForumDescription__1ioAS"}},40:function(e,t,a){e.exports={comments:"CommentSection_comments__1X8sj",commentTitle:"CommentSection_commentTitle__1PSk6",commentInput:"CommentSection_commentInput__7tDii",commentSubmit:"CommentSection_commentSubmit__3LZYb"}},50:function(e,t,a){e.exports={commentUser:"CommentCard_commentUser__NVcTS",commentUserContent:"CommentCard_commentUserContent__2iR1j",commentUserName:"CommentCard_commentUserName__Ranbw"}},6:function(e,t,a){e.exports={authView:"Auth_authView__155wR",cont:"Auth_cont__2nI8n",mainBox:"Auth_mainBox__3-RK2",create:"Auth_create__2iWT1",authTitle:"Auth_authTitle__1WxSV",user:"Auth_user__BuWuK",email:"Auth_email__1z0K8",pass:"Auth_pass__1ZWqY",auth:"Auth_auth__3J_oc"}},61:function(e,t,a){e.exports={logo:"Logo_logo__2DDgH",navListLink:"Logo_navListLink__3iPSU"}},91:function(e,t,a){e.exports={header:"Header_header__39cre"}},95:function(e,t,a){e.exports={footer:"Footer_footer__1UlGQ"}}},[[207,1,2]]]);
//# sourceMappingURL=main.82c7e547.chunk.js.map