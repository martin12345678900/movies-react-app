(this["webpackJsonpmovie-react-app-updated"]=this["webpackJsonpmovie-react-app-updated"]||[]).push([[0],{15:function(e,t,a){e.exports={loader:"Loader_loader__1HtLa",dot:"Loader_dot__2T9aA",dot1:"Loader_dot1__2C5YS",dot2:"Loader_dot2__NMjdT",dot3:"Loader_dot3__17RD4",dot4:"Loader_dot4__3eDyv",reveal:"Loader_reveal__3s-I9",slide:"Loader_slide__1Fty4"}},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(36),s=a.n(c),i=(a(84),a(85),a(2)),o=a.n(i),u=a(3),l=a(21),d={isAuthenticated:!1,userAuthState:{accessToken:null,_id:null,username:null}},m=Object(l.b)("auth/authenticate",function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cars-react-app-server.herokuapp.com/users/".concat(t.endpoint),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.userDataObj)});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(l.c)({name:"auth-slice",initialState:d,reducers:{handleLogout:function(e){e.userAuthState=d.userAuthState,e.isAuthenticated=d.isAuthenticated},setUserState:function(e,t){e.isAuthenticated=t.payload.isAuthenticated,e.userAuthState=t.payload.userAuthState}},extraReducers:function(e){e.addCase(m.fulfilled,(function(e,t){e.isAuthenticated=!0,e.userAuthState={accessToken:t.payload.accessToken,_id:t.payload._id,username:t.payload.username}})),e.addCase(m.rejected,(function(e){e.isAuthenticated=d.isAuthenticated,e.userAuthState=d.userAuthState}))}}),p=j.actions,h=p.handleLogout,b=p.setUserState,f=j.reducer,O=a(7),x=a(6),v=a(29),_=Object(l.c)({name:"cart-slice",initialState:{items:[],totalPrice:0,totalQuantity:0},reducers:{setCartItems:function(e,t){e.items=t.payload.items,e.totalPrice=t.payload.totalPrice,e.totalQuantity=t.payload.totalQuantity},addNewCartItem:function(e,t){var a=t.payload,r=e.items.find((function(e){return e._id===a._id}));r?(e.totalPrice+=Number(r.price),r.quantity++):(e.items.push(a),e.totalPrice+=Number(a.price)),e.totalQuantity++},deleteCartItem:function(e,t){var a=e.items.find((function(e){return e._id===t.payload}));e.items.splice(e.items.indexOf(a),1),e.totalQuantity-=Number(a.quantity),e.totalPrice-=Number(a.price)*Number(a.quantity)},decreaseCartItemQuantity:function(e,t){var a=e.items.find((function(e){return e._id===t.payload}));e.totalPrice-=Number(a.price),a.quantity--,e.totalQuantity--},checkout:function(e){e.items=[],e.totalPrice=0,e.totalQuantity=0}}}),N=_.actions,y=_.reducer,C=Object(l.a)({reducer:{auth:f,cart:y}}),w=v.c,A=function(){return Object(v.b)()},g=C,k=(a(90),a(0));var E=function(){return Object(k.jsx)("div",{className:"Logo",children:Object(k.jsx)(O.b,{to:"/",children:Object(k.jsx)("img",{src:"https://th.bing.com/th/id/R.5eebdba556754091bfcae7839bd65da6?rik=7mP2jf6zMqYapw&pid=ImgRaw&r=0",alt:"logo"})})})},I=a(4),S=(a(93),a(94),n.a.memo((function(e){var t=e.isActive,a=e.toogle;return Object(k.jsx)("button",{onClick:a,className:"hamburger hamburger--spin ".concat(t&&"is-active"),type:"button",children:Object(k.jsx)("span",{className:"hamburger-box",children:Object(k.jsx)("span",{className:"hamburger-inner"})})})})));var T=function(){var e=Object(r.useState)(!1),t=Object(I.a)(e,2),a=t[0],n=t[1],c=w((function(e){return e.auth.isAuthenticated})),s=w((function(e){return e.cart})),i=A(),o=Object(r.useCallback)((function(){n((function(e){return!e}))}),[]);return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("nav",{className:"Nav",children:[Object(k.jsx)("ul",{className:"Nav__list ".concat(a?"Nav__list--active":"Nav__list--unactive"),children:c?Object(k.jsxs)(r.Fragment,{children:[Object(k.jsx)("li",{children:Object(k.jsxs)(O.b,{to:"/cart",children:["Cart ",s.totalQuantity]})}),Object(k.jsx)("li",{children:Object(k.jsx)(O.b,{to:"/movies/create",children:"Create Movie Article"})}),Object(k.jsx)("li",{children:Object(k.jsx)(O.b,{to:"/",onClick:function(){return i(h())},children:"Logout"})}),Object(k.jsx)("li",{children:Object(k.jsx)(O.b,{to:"/filter",children:"Search Movies"})})]}):Object(k.jsxs)(r.Fragment,{children:[Object(k.jsx)("li",{children:Object(k.jsx)(O.b,{to:"/auth/register",children:"Sign up"})}),Object(k.jsx)("li",{children:Object(k.jsx)(O.b,{to:"/auth/login",children:"Sign in"})})]})}),Object(k.jsx)(S,{isActive:a,toogle:o})]})})};a(95);var D=function(){var e=w((function(e){return e.cart})),t=A();return Object(r.useEffect)((function(){try{var e=JSON.parse(window.localStorage.getItem("cart"));t(N.setCartItems({items:e.items,totalPrice:e.totalPrice,totalQuantity:e.totalQuantity}))}catch(a){console.error("Invalid cart state in the local storage!")}}),[t]),Object(r.useEffect)((function(){window.localStorage.setItem("cart",JSON.stringify(e))}),[e]),Object(k.jsxs)("header",{className:"Header",children:[Object(k.jsx)(E,{}),Object(k.jsx)(T,{})]})},L=a(8);a(96);var M=function(){return Object(k.jsx)("section",{className:"HomeWrapper",children:Object(k.jsx)("article",{className:"Home",children:Object(k.jsxs)("h2",{className:"HomeDetails",children:[Object(k.jsx)("span",{className:"HomeDetails__title",children:"Movies Forum"}),Object(k.jsx)("span",{className:"HomeDetails__description",children:"Search for newest movies, post new movies, share opinions and likes anywhere, anytime!"})]})})})};function R(e,t){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(o.a.mark((function e(t,a){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,a);case 3:if((r=e.sent).ok){e.next=12;break}return e.t0=Error,e.next=8,r.json();case 8:throw e.t1=e.sent.message,new e.t0(e.t1);case 12:return e.next=14,r.json();case 14:return n=e.sent,e.abrupt("return",n);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),alert(e.t2.message),new Error(e.t2.message||"Something went wrong !!!");case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function P(e,t,a){var r={method:e,headers:{}};return t&&(r.headers["X-Authorization"]=t),a&&(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(a)),r}var q="https://cars-react-app-server.herokuapp.com";function U(e){return V.apply(this,arguments)}function V(){return(V=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(q+t,P("GET"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a){return Q.apply(this,arguments)}function Q(){return(Q=Object(u.a)(o.a.mark((function e(t,a,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(q+t,P("POST",a,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,a){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(o.a.mark((function e(t,a,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(q+t,P("PUT",a,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(q+t,P("DELETE",a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return z.apply(this,arguments)}function z(){return(z=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/movies");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return $.apply(this,arguments)}function $(){return($=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/data/movies",t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("/data/movies/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/likes?where=movieId%3D%22".concat(t,"%22&distinct=_ownerId&count"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/comments?where=movieId%3D%22".concat(t,"%22&distinct=_ownerId&count"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/movies/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){return se.apply(this,arguments)}function se(){return(se=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/likes?where=movieId%3D%22".concat(t,"%22%20and%20_ownerId%3D%22").concat(a,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){return oe.apply(this,arguments)}function oe(){return(oe=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/data/likes",t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/comments?where=movieId%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){return me.apply(this,arguments)}function me(){return(me=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B("/data/comments",t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("/data/comments/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t,a){return be.apply(this,arguments)}function be(){return(be=Object(u.a)(o.a.mark((function e(t,a,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("/data/movies/".concat(t),a,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(97);var fe=function(e){var t=e._id,a=e.img,n=e.price,c=e.title,s=e.description,i=Object(r.useState)(0),l=Object(I.a)(i,2),d=l[0],m=l[1],j=Object(r.useState)(0),p=Object(I.a)(j,2),h=p[0],b=p[1],f=A(),x=w((function(e){return e.cart.items})),v=w((function(e){return e.auth.isAuthenticated}));Object(r.useEffect)((function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,X(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t]),Object(r.useEffect)((function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=b,e.next=3,te(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[t]);return Object(k.jsxs)("div",{className:"CardWrapper",children:[Object(k.jsxs)("div",{className:"Card Front",children:[Object(k.jsxs)("article",{children:[Object(k.jsx)("img",{className:"CardImage",src:a,alt:"Movie Card"}),Object(k.jsx)("h3",{className:"CardTitle",children:c})]}),Object(k.jsx)("article",{className:"card-footer",children:Object(k.jsx)(O.b,{to:"/movies/details/".concat(t),className:"CardButton",children:"Details"})}),Object(k.jsxs)("span",{className:"CardLikes",children:[d," Likes \ud83d\udc4d"]}),Object(k.jsxs)("span",{className:"CardComments",children:[h," Comments \ud83d\udcad"]})]}),Object(k.jsxs)("div",{className:"Card Back",children:[Object(k.jsxs)("span",{className:"Back__price",children:[n,"$"]}),Object(k.jsxs)("div",{className:"Back__buttons",children:[v&&Object(k.jsx)("button",{onClick:function(){var e=x.find((function(e){return e._id===t})),r=e?e.quantity:1;f(N.addNewCartItem({title:c,quantity:r,description:s,img:a,price:n,_id:t}))},className:"Back__cartBtn",type:"button",children:"Add To Cart"}),Object(k.jsx)(O.b,{to:"/movies/details/".concat(t),className:"".concat(!v&&"Back__detBtn--incorrect"," Back__detBtn"),children:"Check Details"})]})]})]})},Oe=a(15),xe=a.n(Oe);var ve=function(){return Object(k.jsxs)("div",{className:xe.a.loader,children:[Object(k.jsx)("div",{className:[xe.a.dot,xe.a.dot1].join(" ")}),Object(k.jsx)("div",{className:[xe.a.dot,xe.a.dot2].join(" ")}),Object(k.jsx)("div",{className:[xe.a.dot,xe.a.dot3].join(" ")}),Object(k.jsx)("div",{className:[xe.a.dot,xe.a.dot4].join(" ")})]})};a(98);var _e=function(){var e=Object(r.useState)([]),t=Object(I.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!0),s=Object(I.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){o(!0),G().then((function(e){return n(e)})).finally((function(){return o(!1)}))}),[]),i?Object(k.jsx)(ve,{}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(M,{}),Object(k.jsx)("section",{children:Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{className:"Heading",children:"Movie Articles"}),Object(k.jsx)("div",{className:"HeadingWrapper",children:a.map((function(e){return Object(k.jsx)(fe,Object(L.a)({},e),e._id)}))})]})})]})},Ne=a(13),ye=Ne.b().shape({email:Ne.d().email("Invalid email format!").max(25,"Your email must not be longer than 25 charackters!").min(10,"Your email should be at least 10 charackters!").required("Required email field!"),password:Ne.d().min(6,"Password must be at least 6 charcakters!").max(15,"Password should not be longer than 15 charackters!").matches(/[A-Za-z0-9]+/,"Password should contain uppercase,lowercase charackters and digits!").required("Required password field!"),repassword:Ne.d().oneOf([Ne.c("password"),null],"Passwords must match!").required("Required repassword field!"),username:Ne.d().matches(/[A-Z][A-Za-z0-9]+/,"Username have to start with uppercase letter and continue with lowercase or digits!").required("Required username field!")}),Ce=a(38);var we=function(e){var t=Object(r.useState)(e),a=Object(I.a)(t,2),n=a[0],c=a[1];return[n,function(e){c((function(t){return Object(L.a)(Object(L.a)({},t),{},Object(Ce.a)({},e.target.name,e.target.value))}))},function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.validate(n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0.errors[0]);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()]};a(75);var Ae=function(){var e=we({}),t=Object(I.a)(e,3),a=t[0],n=t[1],c=t[2],s=Object(r.useState)(null),i=Object(I.a)(s,2),l=i[0],d=i[1],j=A(),p=Object(x.f)(),h=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c(ye);case 3:"object"!==typeof(a=e.sent)?d(a):(r=a.email,n=a.username,s=a.password,j(m({endpoint:"register",userDataObj:{email:r,username:n,password:s}})),p.push("/"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("section",{className:"Auth",children:Object(k.jsx)("div",{className:"Main",children:Object(k.jsx)("div",{className:"AuthCreate",children:Object(k.jsxs)("form",{onSubmit:h,children:[Object(k.jsx)("h2",{className:"AuthCreate__title",children:"CREATE ACCOUNT"}),l&&Object(k.jsx)("div",{className:"error",children:l}),Object(k.jsx)("input",{className:"AuthCreate__user",type:"text",placeholder:"\ud83d\udd11  YOUR USERNAME",name:"username",onChange:n,value:a.username}),Object(k.jsx)("input",{className:"AuthCreate__email",type:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",name:"email",onChange:n,value:a.email}),Object(k.jsx)("input",{className:"AuthCreate__pass",type:"password",placeholder:"\ud83d\udd12 PASSWORD",name:"password",onChange:n,value:a.password}),Object(k.jsx)("input",{className:"AuthCreate__pass",type:"password",placeholder:"\ud83d\udd13 CONFIRM PASSWORD",name:"repassword",onChange:n,value:a.repassword}),Object(k.jsx)("button",{type:"submit",className:"AuthCreate__btn",children:"Create Account"})]})})})})};var ge=function(){var e=we({}),t=Object(I.a)(e,2),a=t[0],r=t[1],n=A(),c=Object(x.f)(),s=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n(m({endpoint:"login",userDataObj:{email:a.email,password:a.password}})),c.push("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("section",{className:"Auth",children:Object(k.jsx)("div",{className:"Main",children:Object(k.jsx)("div",{className:"AuthCreate",children:Object(k.jsxs)("form",{onSubmit:s,children:[Object(k.jsx)("h2",{className:"AuthCreate__title",children:"SIGN UP"}),Object(k.jsx)("input",{className:"AuthCreate__email",type:"email",name:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",onChange:r,value:a.email}),Object(k.jsx)("input",{className:"AuthCreate__pass",type:"password",name:"password",placeholder:"\ud83d\udd12 PASSWORD",onChange:r,value:a.password}),Object(k.jsx)("button",{type:"submit",className:"AuthCreate__btn",children:"LOG IN"})]})})})})},ke=Ne.b().shape({title:Ne.d().max(20,"Title must not be longer than 20 symbols!").required("Required title field!"),description:Ne.d().max(100,"Description must not be longer than 100 symbols!").required("Required description field!"),img:Ne.d().required("Required image field!"),price:Ne.a().required("Required price field!")});a(76);var Ee=function(){var e=we({}),t=Object(I.a)(e,3),a=t[0],n=t[1],c=t[2],s=Object(r.useState)(null),i=Object(I.a)(s,2),l=i[0],d=i[1],m=w((function(e){return e.auth.userAuthState.accessToken})),j=Object(x.f)(),p=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,r,n,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c(ke);case 3:if("object"===typeof(a=e.sent)){e.next=8;break}d(l),e.next=12;break;case 8:return r=a.title,n=a.description,s=a.price,i=a.img,e.next=11,Z(m,{title:r,description:n,price:s,img:i,likes:0});case 11:j.push("/");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("section",{className:"Create",children:Object(k.jsxs)("div",{className:"CreateWrapper",children:[Object(k.jsx)("h2",{className:"FormTitle",children:"CREATE MOVIE ARTICLE"}),Object(k.jsxs)("form",{className:"Form",onSubmit:p,children:[l&&Object(k.jsx)("div",{className:"error",children:l}),Object(k.jsx)("input",{className:"Form__title",type:"text",name:"title",placeholder:"ENTER MOVIE TITLE",onChange:n,value:a.title}),Object(k.jsx)("textarea",{className:"Form__description",name:"description",placeholder:"ENTER MOVIE DESCRIPTION",onChange:n,value:a.description}),Object(k.jsx)("input",{className:"Form__image",type:"text",name:"img",placeholder:"ENTER MOVIE IMAGE URL",onChange:n,value:a.img}),Object(k.jsx)("input",{className:"Form__price",type:"number",name:"price",placeholder:"ENTER MOVIE PRICE",onChange:n,value:a.price}),Object(k.jsx)("button",{className:"Form__btn",type:"submit",children:"CREATE"})]})]})})},Ie=(a(197),function(e){var t=e.content,a=e.author,r=e.deleteCurrentComment;return Object(k.jsx)("div",{className:"CommentUser",children:Object(k.jsxs)("p",{className:"CommentContent",children:["\ud83d\udcad ",t,r&&Object(k.jsx)("button",{onClick:r,className:"CommentDelete",children:"\u2716"}),Object(k.jsxs)("i",{className:"CommentName",children:["- ",a]})]})})}),Se=(a(198),n.a.memo((function(e){var t=e.movieArticle,a=e.movieArticleComments,n=e.postMovieArticleComment,c=e.removeMovieArticleCommentHandler,s=Object(r.useRef)(null),i=w((function(e){return e.auth})),l=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n(i.userAuthState.username,s.current.value);case 3:s.current.value="";case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"Comments",children:[Object(k.jsx)("h2",{className:"Comments__title",children:"Leave your comments here: \ud83d\udcac"}),a.map((function(e){return Object(k.jsx)(Ie,{content:e.content,author:e.author,deleteCurrentComment:i.userAuthState._id===e._ownerId&&c.bind(null,e._id)},e._id)})),i.userAuthState._id!==t._ownerId&&i.isAuthenticated&&Object(k.jsxs)("form",{onSubmit:l,className:"CommentForm",children:[Object(k.jsx)("textarea",{className:"CommentForm__input",name:"content",placeholder:"Enter your expression from this movie",rows:5,cols:50,ref:s}),Object(k.jsx)("button",{className:"CommentForm__submit",type:"submit",children:"Post comment"})]})]})}))),Te=(a(199),n.a.memo((function(e){var t=e.postMovieArticleLike,a=e.movieArticle,r=e.movieArticleLikesFromUser,n=w((function(e){return e.auth.userAuthState})),c=w((function(e){return e.cart.items})),s=A(),i=Object(x.f)();if(!n.accessToken)return Object(k.jsx)(k.Fragment,{});return Object(k.jsx)("div",{className:"ButtonsWrapper",children:n._id!==a._ownerId?Object(k.jsxs)("div",{className:"User",children:[0===r.length&&Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("button",{onClick:t,className:"User__like User__btn",children:"Like \ud83d\udc4d"})}),Object(k.jsx)("button",{onClick:function(){var e=c.find((function(e){return e._id===a._id})),t=e?e.quantity:1;s(N.addNewCartItem({title:a.title,quantity:t,description:a.description,img:a.img,price:a.price,_id:a._id}))},className:"User__add",children:"Add"})]}):Object(k.jsxs)("div",{className:"Owner",children:[Object(k.jsx)("button",{onClick:function(){return function(e,t){return K.apply(this,arguments)}(a._id,n.accessToken).then((function(){return i.push("/")}))},className:"Owner__delete Owner__btn",children:"\u274c Delete"}),Object(k.jsx)("button",{onClick:function(){return i.push({pathname:"/movies/edit/".concat(a._id),state:a})},className:"Owner__edit Owner__btn",children:"\u270d Edit"})]})})}))),De=a(10),Le={data:{movieArticle:{},movieArticleComments:[],movieArticleLikesFromUser:[]},UI:{isDataLoaded:!1}};function Me(e,t){switch(t.type){case"SET_MOVIE_ARTICLE_DATA":return{UI:{isDataLoaded:!0},data:{movieArticle:{_ownerId:t.payload.movieArticle._ownerId,title:t.payload.movieArticle.title,description:t.payload.movieArticle.description,_id:t.payload.movieArticle._id,img:t.payload.movieArticle.img,price:Number(t.payload.movieArticle.price)},movieArticleComments:t.payload.movieArticleComments,movieArticleLikesFromUser:t.payload.movieArticleLikesFromUser}};case"ADD_MOVIE_ARTICLE_COMMENT":return Object(L.a)(Object(L.a)({},e),{},{data:Object(L.a)(Object(L.a)({},e.data),{},{movieArticleComments:[].concat(Object(De.a)(e.data.movieArticleComments),[t.payload])})});case"DELETE_MOVIE_ARTICLE_COMMENT":return Object(L.a)(Object(L.a)({},e),{},{data:Object(L.a)(Object(L.a)({},e.data),{},{movieArticleComments:e.data.movieArticleComments.filter((function(e){return e._id!==t.payload}))})});case"ADD_MOVIE_ARTICLE_LIKE":return Object(L.a)(Object(L.a)({},e),{},{data:Object(L.a)(Object(L.a)({},e.data),{},{movieArticleLikesFromUser:[t.payload]})});default:throw new Error("Should not reach that case!Bad action!")}}a(200);var Re=function(){var e=Object(r.useReducer)(Me,Le),t=Object(I.a)(e,2),a=t[0],n=t[1],c=Object(x.g)().movieId,s=Object(r.useMemo)((function(){return JSON.parse(window.localStorage.getItem("user")).userAuthState._id}),[]),i=w((function(e){return e.auth.userAuthState.accessToken}));Object(r.useEffect)((function(){Object(u.a)(o.a.mark((function e(){var t,a,r,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([re(c),ue(c),ce(c,s)]);case 2:t=e.sent,a=Object(I.a)(t,3),r=a[0],i=a[1],u=a[2],n({type:"SET_MOVIE_ARTICLE_DATA",payload:{movieArticle:{_ownerId:r._ownerId,_id:r._id,title:r.title,price:r.price,description:r.description,img:r.img},movieArticleComments:i,movieArticleLikesFromUser:u}});case 8:case"end":return e.stop()}}),e)})))()}),[c,s]);var l=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(i,{movieId:c,author:t,content:a});case 2:r=e.sent,n({type:"ADD_MOVIE_ARTICLE_COMMENT",payload:r});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[c,i]),d=Object(r.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,i);case 2:n({type:"DELETE_MOVIE_ARTICLE_COMMENT",payload:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),m=Object(r.useCallback)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(i,{movieId:c});case 2:t=e.sent,n({type:"ADD_MOVIE_ARTICLE_LIKE",payload:t});case 4:case"end":return e.stop()}}),e)}))),[i,c]);return a.UI.isDataLoaded?Object(k.jsx)("section",{className:"Details",children:Object(k.jsxs)("div",{className:"Container",children:[Object(k.jsxs)("h1",{className:"ContainerTitle",children:["Movie title: ",a.data.movieArticle.title]}),Object(k.jsx)("img",{className:"ContainerImage",src:a.data.movieArticle.img,alt:"movie"}),Object(k.jsxs)("div",{className:"ContainerDetails",children:[Object(k.jsx)("h3",{className:"ContainerDetails__description",children:"Movie Description"}),Object(k.jsx)("p",{className:"ContainerDetails__p",children:a.data.movieArticle.description}),Object(k.jsx)(Te,{postMovieArticleLike:m,movieArticle:a.data.movieArticle,movieArticleLikesFromUser:a.data.movieArticleLikesFromUser}),Object(k.jsx)(Se,{postMovieArticleComment:l,removeMovieArticleCommentHandler:d,movieArticle:a.data.movieArticle,movieArticleComments:a.data.movieArticleComments})]})]})}):Object(k.jsx)(ve,{})},Fe=(a(201),function(e){var t=e._id,a=e.title,r=e.description,n=e.price,c=e.img,s=e.quantity,i=A();return Object(k.jsxs)("div",{className:"Item",children:[Object(k.jsx)("img",{src:c,alt:"item"}),Object(k.jsxs)("div",{className:"Details",children:[Object(k.jsx)("p",{className:"Details__title",children:a}),Object(k.jsx)("p",{className:"Details__description",children:r}),Object(k.jsxs)("p",{className:"Details__price",children:["$ ",n]})]}),Object(k.jsxs)("div",{className:"Actions",children:[Object(k.jsxs)("div",{className:"Actions__quantity",children:[Object(k.jsx)("button",{onClick:function(){return i(N.addNewCartItem({_id:t,title:a,description:r,price:n,img:c,quantity:s}))},className:"Actions__quantity__manipulate",children:"\u2191"}),Object(k.jsx)("label",{htmlFor:"qty",children:s}),Object(k.jsx)("button",{onClick:function(){return i(N.decreaseCartItemQuantity(t))},className:"Actions__quantity__manipulate",children:"\u2193"})]}),Object(k.jsx)("button",{onClick:function(){return i(N.deleteCartItem(t))},className:"Actions__btn",children:"\u274c"})]})]})});a(202);var Pe=function(){var e,t=w((function(e){return e.cart})),a=A(),r=null===t||void 0===t||null===(e=t.items)||void 0===e?void 0:e.length;return Object(k.jsxs)("div",{className:"Cart ".concat(!r&&"Cart--empty"),children:[t.items.map((function(e){return Object(k.jsx)(Fe,Object(L.a)({},e),e._id)})),Object(k.jsxs)("div",{className:"Summary",children:[Object(k.jsx)("h4",{className:"Summary__title",children:"Cart Summary"}),Object(k.jsxs)("div",{className:"CartDetails",children:[Object(k.jsxs)("span",{className:"CartDetails__items",children:["TOTAL: (",t.totalQuantity," items)"]}),Object(k.jsxs)("span",{className:"CartDetails__price",children:["$ ",t.totalPrice]})]}),Object(k.jsx)(O.b,{to:"/checkout",className:"Summary__btn",onClick:function(){return a(N.checkout())},children:"Proceed To Checkout"})]})]})};a(203);var qe=function(){return Object(k.jsxs)("div",{className:"Checkout",children:[Object(k.jsx)("h1",{children:"Your order was succesfsul!"}),Object(k.jsx)("h2",{children:"Thank you for choosing our movie shop!"}),Object(k.jsx)(O.b,{to:"/",children:"back to home page"})]})};var Ue=function(){var e=Object(x.g)().movieId,t=Object(x.f)(),a=t.location.state,r=a.title,n=a.img,c=a.price,s=a.description,i=we({title:r,img:n,price:c,description:s}),l=Object(I.a)(i,2),d=l[0],m=l[1],j=w((function(e){return e.auth.userAuthState.accessToken})),p=function(){var a=Object(u.a)(o.a.mark((function a(r){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),n={title:d.title,description:d.description,price:d.price,img:d.img},a.next=4,he(e,j,n);case 4:t.push("/movies/details/".concat(e));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(k.jsx)("section",{className:"Create",children:Object(k.jsxs)("div",{className:"CreateWrapper",children:[Object(k.jsx)("h2",{className:"FormTitle",children:"EDIT MOVIE ARTICLE"}),Object(k.jsxs)("form",{className:"Form",onSubmit:p,children:[Object(k.jsx)("input",{className:"Form__title",type:"text",name:"title",placeholder:"ENTER MOVIE TITLE",defaultValue:r,onChange:m}),Object(k.jsx)("textarea",{className:"Form__description",name:"description",placeholder:"ENTER MOVIE DESCRIPTION",defaultValue:s,onChange:m}),Object(k.jsx)("input",{className:"Form__image",type:"text",name:"img",placeholder:"ENTER MOVIE IMAGE URL",defaultValue:n,onChange:m}),Object(k.jsx)("input",{className:"Form__price",type:"number",name:"price",placeholder:"ENTER MOVIE PRICE",defaultValue:c,onChange:m}),Object(k.jsx)("button",{className:"Form__btn",type:"submit",children:"EDIT"})]})]})})};a(204);var Ve=function(){var e=Object(r.useState)(null),t=Object(I.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)([]),s=Object(I.a)(c,2),i=s[0],l=s[1],d=Object(r.useRef)(null);return Object(r.useEffect)((function(){d.current.focus()}),[]),Object(r.useEffect)((function(){var e;return e=setTimeout(Object(u.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.current.value!==a){e.next=6;break}return e.next=3,G();case 3:t=e.sent,r=t.reduce((function(e,t){var r="";for(var n in t)"title"!==n&&"description"!==n||(r+=t[n]);return r.toLowerCase().includes(a.toLowerCase())&&e.push(t),e}),[]),l(r);case 6:case"end":return e.stop()}}),e)}))),500),function(){clearTimeout(e)}}),[a]),Object(k.jsxs)("div",{className:"Search",children:[Object(k.jsx)("h2",{className:"Search__title",children:"Search Your Favourite Movies"}),Object(k.jsxs)("div",{className:"Filter",children:[Object(k.jsx)("input",{ref:d,value:a,onChange:function(e){return n(e.target.value)},type:"text",placeholder:"Search..."}),Object(k.jsx)("div",{className:"Filter__search"})]}),Object(k.jsx)("div",{className:"Search__results",children:i.length?i.map((function(e){return Object(k.jsx)(fe,Object(L.a)({},e),e._id)})):Object(k.jsx)("p",{className:"Search__notFound",children:"No currently found results from your search :("})})]})};var Be=function(){var e=A(),t=w((function(e){return e.auth}));return Object(r.useEffect)((function(){try{var t=JSON.parse(window.localStorage.getItem("user"));e(b({isAuthenticated:t.isAuthenticated,userAuthState:t.userAuthState}))}catch(a){console.error("Invalid auth state in the local storage!")}}),[e]),Object(r.useEffect)((function(){window.localStorage.setItem("user",JSON.stringify(t))}),[t]),Object(k.jsxs)(O.a,{children:[Object(k.jsx)(D,{}),Object(k.jsxs)(x.c,{children:[Object(k.jsx)(x.a,{path:"/",exact:!0,children:Object(k.jsx)(_e,{})}),Object(k.jsx)(x.a,{path:"/movies-react-app",exact:!0,children:Object(k.jsx)(_e,{})}),Object(k.jsx)(x.a,{path:"/auth/register",exact:!0,children:Object(k.jsx)(Ae,{})}),Object(k.jsx)(x.a,{path:"/auth/login",exact:!0,children:Object(k.jsx)(ge,{})}),Object(k.jsx)(x.a,{path:"/movies/create",exact:!0,children:Object(k.jsx)(Ee,{})}),Object(k.jsx)(x.a,{path:"/movies/details/:movieId",exact:!0,children:Object(k.jsx)(Re,{})}),Object(k.jsx)(x.a,{path:"/movies/edit/:movieId",exact:!0,children:Object(k.jsx)(Ue,{})}),Object(k.jsx)(x.a,{path:"/filter",exact:!0,children:Object(k.jsx)(Ve,{})}),Object(k.jsx)(x.a,{path:"/cart",exact:!0,children:Object(k.jsx)(Pe,{})}),Object(k.jsx)(x.a,{path:"/checkout",exact:!0,children:Object(k.jsx)(qe,{})})]})]})},Qe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,206)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(v.a,{store:g,children:Object(k.jsx)(Be,{})})}),document.getElementById("root")),Qe()},75:function(e,t,a){},76:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){}},[[205,1,2]]]);
//# sourceMappingURL=main.8eb43fe7.chunk.js.map