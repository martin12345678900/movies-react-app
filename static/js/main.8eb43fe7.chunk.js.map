{"version":3,"sources":["Cards/Loader/Loader.module.css","store/auth-slice.ts","store/cart-slice.ts","store/index.ts","components/Header/Logo/Logo.tsx","components/Header/Navigation/Hamburger/Hamburger.tsx","components/Header/Navigation/Navigation.tsx","components/Header/Header.tsx","components/Main/Home/MoviesForum/MoviesForum.tsx","utils/api.ts","utils/requests.ts","Cards/MovieCard/MovieCard.tsx","Cards/Loader/Loader.js","components/Main/Home/Home.tsx","schema/registerSchema.ts","components/hooks/useForm.ts","components/Main/Auth/Register/Register.tsx","components/Main/Auth/Login/Login.tsx","schema/createSchema.ts","components/Main/Decorate/Create/Create.tsx","Cards/CommentCard/CommentCard.tsx","components/Main/Details/CommentSection/CommentSection.tsx","components/Main/Details/DetailsButtons/DetailsButtons.tsx","components/Main/Details/DetailsReducer/reducer.ts","components/Main/Details/Details.tsx","Cards/CartItem/CartItem.tsx","components/Main/Cart/Cart.tsx","components/Main/Checkout/Checkout.tsx","components/Main/Decorate/Edit/Edit.tsx","components/Main/Filter/Filter.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["module","exports","defaultAuthState","isAuthenticated","userAuthState","accessToken","_id","username","authenticateAsyncThunk","createAsyncThunk","extraAuthData","a","fetch","endpoint","method","headers","body","JSON","stringify","userDataObj","response","json","authSlice","createSlice","name","initialState","reducers","handleLogout","state","setUserState","action","payload","extraReducers","builder","addCase","fulfilled","rejected","actions","cartSlice","items","totalPrice","totalQuantity","setCartItems","addNewCartItem","newCartItem","selectedItem","find","item","Number","price","quantity","push","deleteCartItem","cartItem","splice","indexOf","decreaseCartItemQuantity","checkout","cartSliceActions","store","configureStore","reducer","auth","cart","useAppSelector","useSelector","useAppDispatch","useDispatch","Logo","className","to","src","alt","Hamburger","React","memo","isActive","toogle","onClick","type","Navigation","useState","setIsActive","cartState","dispatch","toogleActiveState","useCallback","prevActiveState","Header","useEffect","cartStateFromLocalStorage","parse","window","localStorage","getItem","error","console","setItem","MoviesForum","request","URL","configOptions","ok","Error","message","data","alert","setOptions","authToken","options","baseURL","get","post","put","del","getMovieArticles","api","postMovieArticle","movieId","getMovieArticleLikesCount","getMovieArticleCommentsCount","getSpecificMovieArticle","getMovieArticleLikesFromUser","userId","postMovieArticleLike","getMovieArticleComments","postMovieArticleComment","deleteMovieArticleComment","commentId","updateMovieArticle","MovieCard","img","title","description","likesCount","setLikesCount","commentsCount","setCommentsCount","cartStateItems","isCardItem","Loader","style","loader","dot","dot1","join","dot2","dot3","dot4","Home","movies","setMovies","loading","setLoading","then","finally","map","movieArticle","registerValidationSchema","yup","shape","email","max","min","required","password","matches","repassword","oneOf","useForm","formData","setFormData","event","prevFormState","target","value","schema","validate","errors","Register","registerFormData","onInputChangeHandler","validateSchemaHandler","setError","history","useHistory","onRegisterSubmitHandler","preventDefault","result","onSubmit","placeholder","onChange","Login","loginFormData","onLoginSubmitHandler","createValidationSchema","Create","createFormData","onCreateSchemaValidate","userAuthToken","onCreateSubmitHandler","likes","CommentCard","content","author","deleteCurrentComment","CommentSection","movieArticleComments","removeMovieArticleCommentHandler","contentRef","useRef","onPostNewCommentSubmitHandler","current","movieArticleComment","_ownerId","bind","rows","cols","ref","DetailsButtons","movieArticleLikesFromUser","cartStateItmes","length","deleteMovieArticle","pathname","INITIAL_MOVIE_DETAILS_STATE","UI","isDataLoaded","filter","comment","Details","useReducer","details","useParams","useMemo","Promise","all","postMovieArticleCommentHandler","postMovieArticleLikeHandler","movieArticleLikeFromUser","CartItem","htmlFor","Cart","isEmpty","Checkout","Edit","location","editFormData","onEditMovieArticleSubmitHandler","editDetails","defaultValue","Filter","searchInput","setSearchInput","movieSeacrches","setMovieSearches","searchInputRef","focus","timer","setTimeout","movieArticles","inputSearchResults","reduce","acc","object","stringResult","key","toLowerCase","includes","clearTimeout","e","searchResult","App","authState","authStateFromLocalStorage","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"4HACAA,EAAOC,QAAU,CAAC,OAAS,uBAAuB,IAAM,oBAAoB,KAAO,qBAAqB,KAAO,qBAAqB,KAAO,qBAAqB,KAAO,qBAAqB,OAAS,uBAAuB,MAAQ,wB,0SCG9NC,EAAuC,CACzCC,iBAAiB,EACjBC,cAAe,CACXC,YAAa,KACbC,IAAK,KACLC,SAAU,OAILC,EAAyBC,YAClC,oBADkD,uCAC7B,WAAOC,GAAP,eAAAC,EAAA,sEACMC,MAAM,qDAAD,OAAsDF,EAAcG,UAAY,CACxGC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAUR,EAAcS,eAJtB,cACXC,EADW,gBAOJA,EAASC,OAPL,mFAD6B,uDAWhDC,EAAYC,YAAY,CAC1BC,KAAM,aACNC,aAAcvB,EACdwB,SAAU,CACNC,aADM,SACOC,GACTA,EAAMxB,cAAgBF,EAAiBE,cACvCwB,EAAMzB,gBAAkBD,EAAiBC,iBAE7C0B,aALM,SAKOD,EAAOE,GAChBF,EAAMzB,gBAAkB2B,EAAOC,QAAQ5B,gBACvCyB,EAAMxB,cAAgB0B,EAAOC,QAAQ3B,gBAG7C4B,cAAe,SAACC,GACZA,EAAQC,QAAQ1B,EAAuB2B,WAAW,SAACP,EAAOE,GACtDF,EAAMzB,iBAAkB,EACxByB,EAAMxB,cAAgB,CAClBC,YAAayB,EAAOC,QAAQ1B,YAC5BC,IAAKwB,EAAOC,QAAQzB,IACpBC,SAAUuB,EAAOC,QAAQxB,aAGjC0B,EAAQC,QAAQ1B,EAAuB4B,UAAU,SAACR,GAC9CA,EAAMzB,gBAAkBD,EAAiBC,gBACzCyB,EAAMxB,cAAgBF,EAAiBE,oBAM5C,EAAuCkB,EAAUe,QAAzCV,EAAR,EAAQA,aAAcE,EAAtB,EAAsBA,aAEdP,IAAf,Q,sBC5CMgB,EAAYf,YAAY,CAC1BC,KAAM,aACNC,aAVqC,CACrCc,MAAO,GACPC,WAAY,EACZC,cAAe,GAQff,SAAU,CACNgB,aADM,SACOd,EAAOE,GAChBF,EAAMW,MAAQT,EAAOC,QAAQQ,MAC7BX,EAAMY,WAAaV,EAAOC,QAAQS,WAClCZ,EAAMa,cAAgBX,EAAOC,QAAQU,eAEzCE,eANM,SAMSf,EAAOE,GAClB,IAAMc,EAAcd,EAAOC,QACrBc,EAAejB,EAAMW,MAAMO,MAAK,SAAAC,GAAI,OAAIA,EAAKzC,MAAQsC,EAAYtC,OAElEuC,GAIDjB,EAAMY,YAAcQ,OAAOH,EAAaI,OACxCJ,EAAaK,aAJbtB,EAAMW,MAAMY,KAAKP,GACjBhB,EAAMY,YAAcQ,OAAOJ,EAAYK,QAK3CrB,EAAMa,iBAEVW,eAnBM,SAmBSxB,EAAOE,GAClB,IAAMuB,EAAWzB,EAAMW,MAAMO,MAAK,SAAAC,GAAI,OAAIA,EAAKzC,MAAQwB,EAAOC,WAC9DH,EAAMW,MAAMe,OAAO1B,EAAMW,MAAMgB,QAAQF,GAAW,GAElDzB,EAAMa,eAAiBO,OAAOK,EAASH,UACvCtB,EAAMY,YAAcQ,OAAOK,EAASJ,OAASD,OAAOK,EAASH,WAEjEM,yBA1BM,SA0BmB5B,EAAOE,GAC5B,IAAMiB,EAAOnB,EAAMW,MAAMO,MAAK,SAAAC,GAAI,OAAIA,EAAKzC,MAAQwB,EAAOC,WAE1DH,EAAMY,YAAcQ,OAAOD,EAAKE,OAChCF,EAAKG,WACLtB,EAAMa,iBAEVgB,SAjCM,SAiCG7B,GACLA,EAAMW,MAAQ,GACdX,EAAMY,WAAa,EACnBZ,EAAMa,cAAgB,MAKrBiB,EAAmBpB,EAAUD,QAE3BC,IAAf,QCpDMqB,EAAQC,YAAe,CACzBC,QAAS,CACLC,KAAMxC,EACNyC,KAAMzB,KAOD0B,EAAkDC,IAClDC,EAAiB,kBAAMC,eAGrBR,I,eCNAS,MAVf,WACI,OACI,qBAAKC,UAAU,OAAf,SACI,cAAC,IAAD,CAAMC,GAAG,IAAT,SACI,qBAAKC,IAAI,iGAAiGC,IAAI,c,OCW/GC,G,YAX6BC,IAAMC,MAAK,YAA2B,IAAxBC,EAAuB,EAAvBA,SAAUC,EAAa,EAAbA,OAEhE,OACI,wBAAQC,QAASD,EAAQR,UAAS,oCAA+BO,GAAY,aAAeG,KAAK,SAAjG,SACI,sBAAMV,UAAU,gBAAhB,SACI,sBAAMA,UAAU,4BCoDjBW,MAvDf,WACI,MAAgCC,oBAAS,GAAzC,mBAAOL,EAAP,KAAiBM,EAAjB,KAEM/E,EAAkB6D,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,KAAK3D,mBACrDgF,EAAYnB,GAAe,SAAApC,GAAK,OAAIA,EAAMmC,QAC1CqB,EAAWlB,IAEXmB,EAAoBC,uBAAY,WAClCJ,GAAY,SAAAK,GAAe,OAAKA,OACjC,IAkCH,OACI,mCACI,sBAAKlB,UAAU,MAAf,UACI,oBAAIA,UAAS,oBAAeO,EAAQ,2CAApC,SAlCJzE,EAEI,eAAC,WAAD,WACI,6BACI,eAAC,IAAD,CAAMmE,GAAG,QAAT,kBAAuBa,EAAU1C,mBAErC,6BACI,cAAC,IAAD,CAAM6B,GAAG,iBAAT,oCAEJ,6BACI,cAAC,IAAD,CAAMA,GAAG,IAAIQ,QAAS,kBAAMM,EAASzD,MAArC,sBAEJ,6BACI,cAAC,IAAD,CAAM2C,GAAG,UAAT,gCAMR,eAAC,WAAD,WACI,6BACI,cAAC,IAAD,CAAMA,GAAG,iBAAT,uBAEJ,6BACI,cAAC,IAAD,CAAMA,GAAG,cAAT,4BAaR,cAAC,EAAD,CAAWM,SAAUA,EAAUC,OAAQQ,U,MClBxCG,MAjCf,WACI,IAAML,EAAYnB,GAAe,SAAApC,GAAK,OAAIA,EAAMmC,QAE1CqB,EAAWlB,IAsBjB,OApBAuB,qBAAU,WACN,IACI,IAAMC,EAA8CzE,KAAK0E,MAAMC,OAAOC,aAAaC,QAAQ,SAC3FV,EACI1B,EACKhB,aAAa,CACVH,MAAOmD,EAA0BnD,MACjCC,WAAYkD,EAA0BlD,WACtCC,cAAeiD,EAA0BjD,iBAGvD,MAAOsD,GACLC,QAAQD,MAAM,+CAEnB,CAACX,IAEJK,qBAAU,WACNG,OAAOC,aAAaI,QAAQ,OAAQhF,KAAKC,UAAUiE,MACpD,CAACA,IAGA,yBAAQd,UAAU,SAAlB,UACI,cAAC,EAAD,IACA,cAAC,EAAD,Q,aCrBG6B,MAbf,WACI,OACI,yBAAS7B,UAAU,cAAnB,SACI,yBAASA,UAAU,OAAnB,SACI,qBAAIA,UAAU,cAAd,UACI,sBAAMA,UAAU,qBAAhB,0BACA,sBAAMA,UAAU,2BAAhB,4G,SCRL8B,E,gFAAf,WAAuBC,EAAKC,GAA5B,iBAAA1F,EAAA,+EAE+BC,MAAMwF,EAAKC,GAF1C,WAEcjF,EAFd,QAIsBkF,GAJtB,6BAKsBC,MALtB,SAKmCnF,EAASC,OAL5C,yBAKoDmF,QALpD,wCAO+BpF,EAASC,OAPxC,eAOkBoF,EAPlB,yBASmBA,GATnB,gEAYQC,MAAM,KAAMF,SACN,IAAID,MAAM,KAAMC,SAAW,4BAbzC,2D,sBAiBA,SAASG,EAAW7F,EAAgB8F,EAAoB5F,GACpD,IAAI6F,EAOA,CACA/F,SACAC,QAAS,IAYb,OATI6F,IACAC,EAAQ9F,QAAQ,mBAAqB6F,GAGrC5F,IACA6F,EAAQ9F,QAAQ,gBAAkB,mBAClC8F,EAAQ7F,KAAOC,KAAKC,UAAUF,IAG3B6F,EAGX,IAAMC,EAAU,8C,SAEDC,E,8EAAf,WAAmBlG,GAAnB,SAAAF,EAAA,sEACiBwF,EAAQW,EAAUjG,EAAU8F,EAAW,QADxD,oF,+BAIeK,E,kFAAf,WAAoBnG,EAAkB+F,EAAmBH,GAAzD,SAAA9F,EAAA,sEACiBwF,EAAQW,EAAUjG,EAAU8F,EAAW,OAAQC,EAAWH,IAD3E,oF,+BAIeQ,E,kFAAf,WAAmBpG,EAAkB+F,EAAmBH,GAAxD,SAAA9F,EAAA,sEACiBwF,EAAQW,EAAUjG,EAAU8F,EAAW,MAAOC,EAAWH,IAD1E,oF,+BAIeS,E,gFAAf,WAAmBrG,EAAkB+F,GAArC,SAAAjG,EAAA,sEACiBwF,EAAQW,EAAUjG,EAAU8F,EAAW,SAAUC,IADlE,oF,sBCtDO,SAAeO,IAAtB,+B,4CAAO,sBAAAxG,EAAA,sEACUyG,EAAQ,gBADlB,oF,sBAIA,SAAeC,EAAtB,oC,4CAAO,WAAgCT,EAAWH,GAA3C,SAAA9F,EAAA,sEACUyG,EAAS,eAAgBR,EAAWH,GAD9C,oF,kEAIA,WAAkCa,EAASV,GAA3C,SAAAjG,EAAA,sEACUyG,EAAA,uBAAwBE,GAAWV,GAD7C,oF,sBAIA,SAAeW,EAAtB,mC,8CAAO,WAAyCD,GAAzC,SAAA3G,EAAA,sEACUyG,EAAA,yCAA0CE,EAA1C,gCADV,oF,sBAIA,SAAeE,GAAtB,mC,8CAAO,WAA4CF,GAA5C,SAAA3G,EAAA,sEACUyG,EAAA,4CAA6CE,EAA7C,gCADV,oF,sBAIA,SAAeG,GAAtB,mC,8CAAO,WAAuCH,GAAvC,SAAA3G,EAAA,sEACUyG,EAAA,uBAAwBE,IADlC,oF,sBAIA,SAAeI,GAAtB,qC,8CAAO,WAA4CJ,EAASK,GAArD,SAAAhH,EAAA,sEACUyG,EAAA,yCAA0CE,EAA1C,qCAA8EK,EAA9E,QADV,oF,sBAIA,SAAeC,GAAtB,qC,8CAAO,WAAoChB,EAAWH,GAA/C,SAAA9F,EAAA,sEACUyG,EAAS,cAAeR,EAAWH,GAD7C,oF,sBAIA,SAAeoB,GAAtB,mC,8CAAO,WAAuCP,GAAvC,SAAA3G,EAAA,sEACUyG,EAAA,4CAA6CE,EAA7C,QADV,oF,sBAIA,SAAeQ,GAAtB,qC,8CAAO,WAAuClB,EAAWH,GAAlD,SAAA9F,EAAA,sEACUyG,EAAS,iBAAkBR,EAAWH,GADhD,oF,sBAIA,SAAesB,GAAtB,qC,8CAAO,WAAyCC,EAAWpB,GAApD,SAAAjG,EAAA,sEACUyG,EAAA,yBAA0BY,GAAapB,GADjD,oF,sBAoBA,SAAeqB,GAAtB,uC,8CAAO,WAAkCX,EAASV,EAAWH,GAAtD,SAAA9F,EAAA,sEACUyG,EAAA,uBAAwBE,GAAWV,EAAWH,GADxD,oF,gCCUQyB,GAtD6B,SAAC,GAA6C,IAA3C5H,EAA0C,EAA1CA,IAAK6H,EAAqC,EAArCA,IAAKlF,EAAgC,EAAhCA,MAAOmF,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,YACnE,EAAoCpD,mBAAS,GAA7C,mBAAOqD,EAAP,KAAmBC,EAAnB,KACA,EAA0CtD,mBAAS,GAAnD,mBAAOuD,EAAP,KAAsBC,EAAtB,KACMrD,EAAWlB,IACXwE,EAAiB1E,GAAe,SAAApC,GAAK,OAAIA,EAAMmC,KAAKxB,SACpDpC,EAAkB6D,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,KAAK3D,mBAE3DsF,qBAAU,WACN,sBAAC,sBAAA9E,EAAA,kEACG4H,EADH,SACuBhB,EAA0BjH,GADjD,4EAAD,KAGD,CAACA,IAEJmF,qBAAU,WACN,sBAAC,sBAAA9E,EAAA,kEACG8H,EADH,SAC0BjB,GAA6BlH,GADvD,4EAAD,KAGD,CAACA,IAQJ,OACI,sBAAK+D,UAAU,cAAf,UACI,sBAAKA,UAAU,aAAf,UACI,oCACI,qBAAKA,UAAU,YAAYE,IAAK4D,EAAK3D,IAAI,eACzC,oBAAIH,UAAU,YAAd,SAA2B+D,OAE/B,yBAAS/D,UAAU,cAAnB,SACI,cAAC,IAAD,CAAMC,GAAE,0BAAqBhE,GAAO+D,UAAU,aAA9C,uBAEJ,uBAAMA,UAAU,YAAhB,UAA6BiE,EAA7B,yBACA,uBAAMjE,UAAU,eAAhB,UAAgCmE,EAAhC,+BAEJ,sBAAKnE,UAAU,YAAf,UACI,uBAAMA,UAAU,cAAhB,UAA+BpB,EAA/B,OACA,sBAAKoB,UAAU,gBAAf,UACClE,GAAmB,wBAChB2E,QAvBI,WAChB,IAAM6D,EAAaD,EAAe5F,MAAK,SAAAC,GAAI,OAAIA,EAAKzC,MAAQA,KACtD4C,EAAWyF,EAAaA,EAAWzF,SAAW,EACpDkC,EAAS1B,EAAiBf,eAAe,CAAEyF,QAAOlF,WAAUmF,cAAaF,MAAKlF,QAAO3C,UAqBzE+D,UAAU,gBACVU,KAAK,SAHW,yBAMpB,cAAC,IAAD,CAAMT,GAAE,0BAAqBhE,GAAO+D,UAAS,WAAMlE,GAAmB,0BAAzB,iBAA7C,qC,oBCnDDyI,OAXf,WACI,OACI,sBAAKvE,UAAWwE,KAAMC,OAAtB,UACI,qBAAKzE,UAAW,CAACwE,KAAME,IAAKF,KAAMG,MAAMC,KAAK,OAC7C,qBAAK5E,UAAW,CAACwE,KAAME,IAAKF,KAAMK,MAAMD,KAAK,OAC7C,qBAAK5E,UAAW,CAACwE,KAAME,IAAKF,KAAMM,MAAMF,KAAK,OAC7C,qBAAK5E,UAAW,CAACwE,KAAME,IAAKF,KAAMO,MAAMH,KAAK,W,MC+B1CI,OA7Bf,WACI,MAA4BpE,mBAAS,IAArC,mBAAOqE,EAAP,KAAeC,EAAf,KACA,EAA8BtE,oBAAS,GAAvC,mBAAOuE,EAAP,KAAgBC,EAAhB,KAQA,OANAhE,qBAAU,WACNgE,GAAW,GACXtC,IAAmBuC,MAAK,SAAAJ,GAAM,OAAIC,EAAUD,MAASK,SAAQ,kBAAMF,GAAW,QAC/E,IAGCD,EACO,cAAC,GAAD,IAIP,qCACI,cAAC,EAAD,IACA,kCACI,gCACI,oBAAInF,UAAU,UAAd,4BACA,qBAAKA,UAAU,iBAAf,SACMiF,EAAOM,KAAI,SAACC,GAAD,OAAkB,cAAC,GAAD,eAAsCA,GAAtBA,EAAavJ,mB,SC9BvEwJ,GAA2BC,OAAaC,MAAM,CACvDC,MAAOF,OACFE,MAAM,yBACNC,IAAI,GAAI,sDACRC,IAAI,GAAI,iDACRC,SAAS,yBACdC,SAAUN,OACLI,IAAI,EAAG,4CACPD,IAAI,GAAI,sDACRI,QAAQ,eAAgB,uEACxBF,SAAS,4BACdG,WAAYR,OACPS,MAAM,CAACT,KAAQ,YAAa,MAAO,yBACnCK,SAAS,8BACd7J,SAAUwJ,OACLO,QAAQ,oBAAqB,uFAC7BF,SAAS,8B,SCaHK,OA3Bf,SAAmChJ,GAC/B,MAAgCwD,mBAAYxD,GAA5C,mBAAOiJ,EAAP,KAAiBC,EAAjB,KAmBA,MAAO,CACHD,EAlByB,SAACE,GAC1BD,GAAY,SAACE,GACT,OAAO,2BACAA,GADP,mBAEKD,EAAME,OAAOtJ,KAAOoJ,EAAME,OAAOC,YAKjB,uCAAG,WAAOC,GAAP,SAAArK,EAAA,+EAEXqK,EAAOC,SAASP,GAFL,iGAIjB,KAAIQ,OAAO,IAJM,wDAAH,wD,MC2ElBC,OAzEf,WACI,MAAwEV,GAA0B,IAAlG,mBAAOW,EAAP,KAAyBC,EAAzB,KAA+CC,EAA/C,KACA,EAA0BrG,mBAAwB,MAAlD,mBAAOc,EAAP,KAAcwF,EAAd,KAEMnG,EAAWlB,IACXsH,EAAUC,cAEVC,EAAuB,uCAAG,WAAOd,GAAP,qBAAAjK,EAAA,6DAC5BiK,EAAMe,iBADsB,SAG2BL,EAAsBxB,IAHjD,OAKN,kBAFhB8B,EAHsB,QAMxBL,EAASK,IAED3B,EAA8B2B,EAA9B3B,MAAO1J,EAAuBqL,EAAvBrL,SAAU8J,EAAauB,EAAbvB,SAEzBjF,EACI5E,EAAuB,CACnBK,SAAU,WACVM,YAAa,CACT8I,QACA1J,WACA8J,eAGZmB,EAAQrI,KAAK,MAnBW,2CAAH,sDAuB7B,OACI,yBAASkB,UAAU,OAAnB,SACI,qBAAKA,UAAU,OAAf,SACI,qBAAKA,UAAU,aAAf,SACI,uBAAMwH,SAAUH,EAAhB,UACI,oBAAIrH,UAAU,oBAAd,4BACC0B,GAAS,qBAAK1B,UAAU,QAAf,SAAwB0B,IAClC,uBAAO1B,UAAU,mBACbU,KAAK,OACL+G,YAAY,8BACZtK,KAAK,WACLuK,SAAUV,EACVN,MAAOK,EAAiB7K,WAE5B,uBAAO8D,UAAU,oBACbU,KAAK,QACL+G,YAAY,0BACZtK,KAAK,QACLuK,SAAUV,EACVN,MAAOK,EAAiBnB,QAE5B,uBAAO5F,UAAU,mBACbU,KAAK,WACL+G,YAAY,wBACZtK,KAAK,WACLuK,SAAUV,EACVN,MAAOK,EAAiBf,WAE5B,uBAAOhG,UAAU,mBACbU,KAAK,WACL+G,YAAY,gCACZtK,KAAK,aACLuK,SAAUV,EACVN,MAAOK,EAAiBb,aAE5B,wBAAQxF,KAAK,SAASV,UAAU,kBAAhC,sCCtBT2H,OA/Cf,WACI,MAA8CvB,GAAuB,IAArE,mBAAOwB,EAAP,KAAsBZ,EAAtB,KACMjG,EAAWlB,IACXsH,EAAUC,cAEVS,EAAoB,uCAAG,WAAOtB,GAAP,SAAAjK,EAAA,sDACzBiK,EAAMe,iBAENvG,EACI5E,EAAuB,CACnBK,SAAU,QACVM,YAAa,CACT8I,MAAOgC,EAAchC,MACrBI,SAAU4B,EAAc5B,aAGpCmB,EAAQrI,KAAK,KAXY,2CAAH,sDAc1B,OACI,yBAASkB,UAAU,OAAnB,SACI,qBAAKA,UAAU,OAAf,SACI,qBAAKA,UAAU,aAAf,SACI,uBAAMwH,SAAUK,EAAhB,UACI,oBAAI7H,UAAU,oBAAd,qBACA,uBAAOA,UAAU,oBACbU,KAAK,QACLvD,KAAK,QACLsK,YAAY,0BACZC,SAAUV,EACVN,MAAOkB,EAAchC,QAEzB,uBAAO5F,UAAU,mBACbU,KAAK,WACLvD,KAAK,WACLsK,YAAY,wBACZC,SAAUV,EACVN,MAAOkB,EAAc5B,WAEzB,wBAAQtF,KAAK,SAASV,UAAU,kBAAhC,8BCnDX8H,GAAyBpC,OAAaC,MAAM,CACrD5B,MAAO2B,OAEFG,IAAI,GAAI,6CACRE,SAAS,yBACd/B,YAAa0B,OAERG,IAAI,IAAK,oDACTE,SAAS,+BACdjC,IAAK4B,OAEAK,SAAS,yBACdnH,MAAO8G,OAEFK,SAAS,2B,MC2DHgC,OA/Df,WACI,MAAuE3B,GAAsB,IAA7F,mBAAO4B,EAAP,KAAuBhB,EAAvB,KAA6CiB,EAA7C,KACA,EAA0BrH,mBAAwB,MAAlD,mBAAOc,EAAP,KAAcwF,EAAd,KAEMgB,EAAgBvI,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,KAAK1D,cAAcC,eACjEmL,EAAUC,cAEVe,EAAqB,uCAAG,WAAO5B,GAAP,uBAAAjK,EAAA,6DAC1BiK,EAAMe,iBADoB,SAG2BW,EAAuBH,IAHlD,UAKJ,kBAFhBP,EAHoB,wBAMtBL,EAASxF,GANa,8BAQdqC,EAAmCwD,EAAnCxD,MAAOC,EAA4BuD,EAA5BvD,YAAapF,EAAe2I,EAAf3I,MAAOkF,EAAQyD,EAARzD,IARb,UAUhBd,EAAiBkF,EAAe,CAAEnE,QAAOC,cAAapF,QAAOkF,MAAKsE,MAAO,IAVzD,QAWtBjB,EAAQrI,KAAK,KAXS,4CAAH,sDAe3B,OACI,yBAASkB,UAAU,SAAnB,SACI,sBAAKA,UAAU,gBAAf,UACI,oBAAIA,UAAU,YAAd,kCACA,uBAAMA,UAAU,OAAOwH,SAAUW,EAAjC,UACMzG,GAAS,qBAAK1B,UAAU,QAAf,SAAwB0B,IACnC,uBAAO1B,UAAU,cACbU,KAAK,OACLvD,KAAK,QACLsK,YAAY,oBACZC,SAAUV,EACVN,MAAOsB,EAAejE,QAE1B,0BAAU/D,UAAU,oBAChB7C,KAAK,cACLsK,YAAY,0BACZC,SAAUV,EACVN,MAAOsB,EAAehE,cAG1B,uBAAOhE,UAAU,cACbU,KAAK,OACLvD,KAAK,MACLsK,YAAY,wBACZC,SAAUV,EACVN,MAAOsB,EAAelE,MAE1B,uBAAO9D,UAAU,cACbU,KAAK,SACLvD,KAAK,QACLsK,YAAY,oBACZC,SAAUV,EACVN,MAAOsB,EAAepJ,QAE1B,wBAAQoB,UAAU,YAAYU,KAAK,SAAnC,6BC/CL2H,I,OAZiC,SAAC,GAA+C,IAA7CC,EAA4C,EAA5CA,QAASC,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,qBAChE,OACI,qBAAKxI,UAAU,cAAf,SACI,oBAAGA,UAAU,iBAAb,0BACesI,EACTE,GAAwB,wBAAQ/H,QAAS+H,EAAsBxI,UAAU,gBAAjD,oBAC1B,oBAAGA,UAAU,cAAb,eAA8BuI,YC8C/BE,I,OA7CgCpI,IAAMC,MAAK,YAAwG,IAArGkF,EAAoG,EAApGA,aAAckD,EAAsF,EAAtFA,qBAAsBjF,EAAgE,EAAhEA,wBAAyBkF,EAAuC,EAAvCA,iCAEhHC,EAAaC,iBAA4B,MACzC9M,EAAgB4D,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,QAE9CqJ,EAA6B,uCAAG,WAAOvC,GAAP,SAAAjK,EAAA,6DAClCiK,EAAMe,iBAD4B,SAG5B7D,EAAwB1H,EAAcA,cAAcG,SAAU0M,EAAWG,QAAQrC,OAHrD,OAIlCkC,EAAWG,QAAQrC,MAAQ,GAJO,2CAAH,sDAOnC,OACI,sBAAK1G,UAAU,WAAf,UACI,oBAAIA,UAAU,kBAAd,oDAEI0I,EAAqBnD,KAAI,SAACyD,GAAD,OACrB,cAAC,GAAD,CAEIV,QAASU,EAAoBV,QAC7BC,OAAQS,EAAoBT,OAC5BC,qBACIzM,EAAcA,cAAcE,MAAQ+M,EAAoBC,UACrDN,EAAiCO,KAAK,KAAMF,EAAoB/M,MALlE+M,EAAoB/M,QAUhCF,EAAcA,cAAcE,MAAQuJ,EAAayD,UAAYlN,EAAcD,iBAC5E,uBAAM0L,SAAUsB,EAA+B9I,UAAU,cAAzD,UACI,0BAAUA,UAAU,qBAChB7C,KAAK,UACLsK,YAAY,wCACZ0B,KAAM,EACNC,KAAM,GACNC,IAAKT,IAGT,wBAAQ5I,UAAU,sBAAsBU,KAAK,SAA7C,oCCkBL4I,I,OAtDsCjJ,IAAMC,MAAK,YAAwE,IAArEiD,EAAoE,EAApEA,qBAAsBiC,EAA8C,EAA9CA,aAAc+D,EAAgC,EAAhCA,0BAE7FxN,EAAgB4D,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,KAAK1D,iBACnDyN,EAAiB7J,GAAe,SAAApC,GAAK,OAAIA,EAAMmC,KAAKxB,SACpD6C,EAAWlB,IACXsH,EAAUC,cAEhB,IAAKrL,EAAcC,YAAe,OAAO,6BAezC,OACI,qBAAKgE,UAAU,iBAAf,SAEQjE,EAAcE,MAAQuJ,EAAayD,SAE/B,sBAAKjJ,UAAU,OAAf,UAE6C,IAArCuJ,EAA0BE,QAC1B,mCACI,wBAAQhJ,QAAS8C,EAAsBvD,UAAU,uBAAjD,iCAGR,wBAAQS,QAzBI,WAC5B,IAAM6D,EAAakF,EAAe/K,MAAK,SAAAC,GAAI,OAAIA,EAAKzC,MAAQuJ,EAAavJ,OACnE4C,EAAWyF,EAAaA,EAAWzF,SAAW,EACpDkC,EAAS1B,EAAiBf,eAAe,CACrCyF,MAAOyB,EAAazB,MACpBlF,WACAmF,YAAawB,EAAaxB,YAC1BF,IAAK0B,EAAa1B,IAClBlF,MAAO4G,EAAa5G,MACpB3C,IAAKuJ,EAAavJ,QAgBoC+D,UAAU,YAApD,oBAGJ,sBAAKA,UAAU,QAAf,UACI,wBAAQS,QAAS,kBZ9ClC,SAAP,oCY8C+CiJ,CAAmBlE,EAAavJ,IAAKF,EAAcC,aAAaqJ,MAAK,kBAAM8B,EAAQrI,KAAK,SAC3GkB,UAAU,2BADd,2BAIA,wBACIS,QAAS,kBAAM0G,EAAQrI,KAAK,CAAE6K,SAAS,gBAAD,OAAkBnE,EAAavJ,KAAOsB,MAAOiI,KACnFxF,UAAU,yBAFd,kC,SCzDX4J,GAA4C,CACrDxH,KAAM,CACFoD,aAAc,GACdkD,qBAAsB,GACtBa,0BAA2B,IAE/BM,GAAI,CACAC,cAAc,IAIP,SAAStK,GACpBjC,EACAE,GAEA,OAAQA,EAAOiD,MACX,IAAK,yBACD,MAAO,CACHmJ,GAAI,CACAC,cAAc,GAElB1H,KAAM,CACFoD,aAAc,CACVyD,SAAUxL,EAAOC,QAAQ8H,aAAayD,SACtClF,MAAOtG,EAAOC,QAAQ8H,aAAazB,MACnCC,YAAavG,EAAOC,QAAQ8H,aAAaxB,YACzC/H,IAAKwB,EAAOC,QAAQ8H,aAAavJ,IACjC6H,IAAKrG,EAAOC,QAAQ8H,aAAa1B,IACjClF,MAAOD,OAAOlB,EAAOC,QAAQ8H,aAAa5G,QAE9C8J,qBAAsBjL,EAAOC,QAAQgL,qBACrCa,0BAA2B9L,EAAOC,QAAQ6L,4BAGtD,IAAK,4BACD,OAAO,2BACAhM,GADP,IAEI6E,KAAK,2BACE7E,EAAM6E,MADT,IAEAsG,qBAAqB,GAAD,oBAAMnL,EAAM6E,KAAKsG,sBAAjB,CAAuCjL,EAAOC,cAG9E,IAAK,+BACD,OAAO,2BACAH,GADP,IAEI6E,KAAK,2BACE7E,EAAM6E,MADT,IAEAsG,qBAAsBnL,EAAM6E,KAAKsG,qBAAqBqB,QAAO,SAAAC,GAAO,OAAIA,EAAQ/N,MAAQwB,EAAOC,eAG3G,IAAK,yBACD,OAAO,2BACAH,GADP,IAEI6E,KAAK,2BACE7E,EAAM6E,MADT,IAEAmH,0BAA2B,CAAC9L,EAAOC,aAG/C,QACI,MAAM,IAAIwE,MAAM,2C,OC4Cb+H,OAzFf,WACI,MAA4BC,qBAAW1K,GAASoK,IAAhD,mBAAOO,EAAP,KAAgBpJ,EAAhB,KAEQkC,EAAYmH,cAAZnH,QACFK,EAAS+G,mBAAQ,WACnB,OAAOzN,KAAK0E,MAAMC,OAAOC,aAAaC,QAAQ,SAAS1F,cAAcE,MACtE,IACGD,EAAc2D,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,KAAK1D,cAAcC,eAErEoF,qBAAU,WACN,sBAAC,oCAAA9E,EAAA,sEACoJgO,QAAQC,IAAI,CACzJnH,GAAwBH,GACxBO,GAAwBP,GACxBI,GAA6BJ,EAASK,KAJ7C,mCACUkC,EADV,KACwBkD,EADxB,KAC8Ca,EAD9C,KAOGxI,EAAS,CACLL,KAAM,yBACNhD,QAAS,CACL8H,aAAc,CACVyD,SAAUzD,EAAayD,SACvBhN,IAAKuJ,EAAavJ,IAClB8H,MAAOyB,EAAazB,MACpBnF,MAAO4G,EAAa5G,MACpBoF,YAAawB,EAAaxB,YAC1BF,IAAK0B,EAAa1B,KAEtB4E,uBACAa,+BAnBX,0CAAD,KAuBD,CAACtG,EAASK,IAEb,IAAMkH,EAAiCvJ,sBAAW,uCAC9C,WAAOsH,EAAgBD,GAAvB,eAAAhM,EAAA,sEAC2DmH,GAAwBzH,EAAa,CACxFiH,UACAsF,SACAD,YAJR,OACUU,EADV,OAMIjI,EAAS,CAAEL,KAAM,4BAA6BhD,QAASsL,IAN3D,2CAD8C,wDAQ3C,CAAC/F,EAASjH,IAEX2M,EAAmC1H,sBAAW,uCAChD,WAAO0C,GAAP,SAAArH,EAAA,sEACUoH,GAA0BC,EAAW3H,GAD/C,OAEI+E,EAAS,CAAEL,KAAM,+BAAgChD,QAASiG,IAF9D,2CADgD,sDAI7C,CAAC3H,IAEFyO,EAA8BxJ,sBAAW,sBAC3C,4BAAA3E,EAAA,sEACqEiH,GAAqBvH,EAAa,CAAEiH,YADzG,OACUyH,EADV,OAEI3J,EAAS,CAAEL,KAAM,yBAA0BhD,QAASgN,IAFxD,2CAGG,CAAC1O,EAAaiH,IAErB,OAAKkH,EAAQN,GAAGC,aAKZ,yBAAS9J,UAAU,UAAnB,SACI,sBAAKA,UAAU,YAAf,UACI,qBAAIA,UAAU,iBAAd,0BAA6CmK,EAAQ/H,KAAKoD,aAAazB,SACvE,qBAAK/D,UAAU,iBAAiBE,IAAKiK,EAAQ/H,KAAKoD,aAAa1B,IAAK3D,IAAI,UACxE,sBAAKH,UAAU,mBAAf,UACI,oBAAIA,UAAU,gCAAd,+BACA,mBAAGA,UAAU,sBAAb,SACKmK,EAAQ/H,KAAKoD,aAAaxB,cAE/B,cAAC,GAAD,CACIT,qBAAsBkH,EACtBjF,aAAc2E,EAAQ/H,KAAKoD,aAC3B+D,0BAA2BY,EAAQ/H,KAAKmH,4BAE5C,cAAC,GAAD,CACI9F,wBAAyB+G,EACzB7B,iCAAkCA,EAClCnD,aAAc2E,EAAQ/H,KAAKoD,aAC3BkD,qBAAsByB,EAAQ/H,KAAKsG,+BAtB5C,cAAC,GAAD,KCnCAiC,I,OAhCkB,SAAC,GAAuD,IAArD1O,EAAoD,EAApDA,IAAK8H,EAA+C,EAA/CA,MAAOC,EAAwC,EAAxCA,YAAapF,EAA2B,EAA3BA,MAAOkF,EAAoB,EAApBA,IAAKjF,EAAe,EAAfA,SAC/DkC,EAAWlB,IAEjB,OACI,sBAAKG,UAAU,OAAf,UACI,qBAAKE,IAAK4D,EAAK3D,IAAI,SACnB,sBAAKH,UAAU,UAAf,UACI,mBAAGA,UAAU,iBAAb,SAA+B+D,IAC/B,mBAAG/D,UAAU,uBAAb,SAAqCgE,IACrC,oBAAGhE,UAAU,iBAAb,eAAiCpB,QAErC,sBAAKoB,UAAU,UAAf,UACI,sBAAKA,UAAU,oBAAf,UACI,wBAAQS,QAAS,kBAAMM,EAAS1B,EAAiBf,eAAe,CAC5DrC,MACA8H,QACAC,cACApF,QACAkF,MACAjF,eACCmB,UAAU,gCAPf,oBAQA,uBAAO4K,QAAQ,MAAf,SAAsB/L,IACtB,wBAAQ4B,QAAS,kBAAMM,EAAS1B,EAAiBF,yBAAyBlD,KAAO+D,UAAU,gCAA3F,uBAEJ,wBAAQS,QAAS,kBAAMM,EAAS1B,EAAiBN,eAAe9C,KAAO+D,UAAU,eAAjF,4B,OCMD6K,OA9Bf,WAAiB,IAAD,EACNnL,EAAOC,GAAe,SAAApC,GAAK,OAAIA,EAAMmC,QACrCqB,EAAWlB,IAEXiL,EAAO,OAAGpL,QAAH,IAAGA,GAAH,UAAGA,EAAMxB,aAAT,aAAG,EAAauL,OAE7B,OACI,sBAAKzJ,UAAS,gBAAW8K,GAAW,eAApC,UAEQpL,EAAKxB,MAAMqH,KAAI,SAACvG,GACZ,OAAO,cAAC,GAAD,eAAiCA,GAAlBA,EAAS/C,QAGvC,sBAAK+D,UAAU,UAAf,UACI,oBAAIA,UAAU,iBAAd,0BACA,sBAAKA,UAAU,cAAf,UACI,uBAAMA,UAAU,qBAAhB,qBAA8CN,EAAKtB,cAAnD,aACA,uBAAM4B,UAAU,qBAAhB,eAAwCN,EAAKvB,iBAEjD,cAAC,IAAD,CAAM8B,GAAG,YACLD,UAAU,eACVS,QAAS,kBAAMM,EAAS1B,EAAiBD,aAF7C,wC,OCZD2L,OAZf,WACI,OACI,sBAAK/K,UAAU,WAAf,UACI,4DACA,wEACA,cAAC,IAAD,CAAMC,GAAG,IAAT,mCCmEG+K,OA/Df,WACI,IAAQ/H,EAAYmH,cAAZnH,QACFkE,EAAUC,cAEhB,EAAyDD,EAAQ8D,SAAS1N,MAAlEwG,EAAR,EAAQA,MAAOD,EAAf,EAAeA,IAAKlF,EAApB,EAAoBA,MAAOoF,EAA3B,EAA2BA,YAC3B,EAA6CoC,GAAsB,CAAErC,QAAOD,MAAKlF,QAAOoF,gBAAxF,mBAAOkH,EAAP,KAAqBlE,EAArB,KAEMzE,EAAY5C,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,KAAK1D,cAAcC,eAE7DmP,EAA+B,uCAAG,WAAO5E,GAAP,eAAAjK,EAAA,6DACpCiK,EAAMe,iBAEA8D,EAAc,CAChBrH,MAAOmH,EAAanH,MACpBC,YAAakH,EAAalH,YAC1BpF,MAAOsM,EAAatM,MACpBkF,IAAKoH,EAAapH,KAPc,SAU9BF,GAAmBX,EAASV,EAAW6I,GAVT,OAWpCjE,EAAQrI,KAAR,0BAAgCmE,IAXI,2CAAH,sDAcrC,OACI,yBAASjD,UAAU,SAAnB,SACI,sBAAKA,UAAU,gBAAf,UACI,oBAAIA,UAAU,YAAd,gCACA,uBAAMA,UAAU,OAAOwH,SAAU2D,EAAjC,UACI,uBAAOnL,UAAU,cACbU,KAAK,OACLvD,KAAK,QACLsK,YAAY,oBACZ4D,aAActH,EACd2D,SAAUV,IAEd,0BAAUhH,UAAU,oBAChB7C,KAAK,cACLsK,YAAY,0BACZ4D,aAAcrH,EACd0D,SAAUV,IAGd,uBAAOhH,UAAU,cACbU,KAAK,OACLvD,KAAK,MACLsK,YAAY,wBACZ4D,aAAcvH,EACd4D,SAAUV,IAEd,uBAAOhH,UAAU,cACbU,KAAK,SACLvD,KAAK,QACLsK,YAAY,oBACZ4D,aAAczM,EACd8I,SAAUV,IAEd,wBAAQhH,UAAU,YAAYU,KAAK,SAAnC,2B,OCCL4K,OA5Df,WACI,MAAsC1K,mBAAiB,MAAvD,mBAAO2K,EAAP,KAAoBC,EAApB,KACA,EAA2C5K,mBAAyB,IAApE,mBAAO6K,EAAP,KAAuBC,EAAvB,KACMC,EAAiB9C,iBAAyB,MAqChD,OAnCAzH,qBAAU,WACNuK,EAAe5C,QAAQ6C,UACxB,IAEHxK,qBAAU,WACN,IAAIyK,EAyBJ,OAvBIA,EAAQC,WAAU,sBAAC,8BAAAxP,EAAA,yDACXqP,EAAe5C,QAAQrC,QAAU6E,EADtB,gCAEwCzI,IAFxC,OAELiJ,EAFK,OAGLC,EAAqBD,EAAcE,QAAO,SAACC,EAAqBC,GAClE,IAAIC,EAAe,GACnB,IAAK,IAAMC,KAAOF,EACF,UAARE,GAA2B,gBAARA,IACnBD,GAAgBD,EAAOE,IAM/B,OAFID,EAAaE,cAAcC,SAAShB,EAAYe,gBAAkBJ,EAAIpN,KAAKqN,GAExED,IACR,IAEHR,EAAiBM,GAhBN,2CAkBhB,KAKA,WACHQ,aAAaX,MAElB,CAACN,IAGA,sBAAKvL,UAAU,SAAf,UACI,oBAAIA,UAAU,gBAAd,0CACA,sBAAKA,UAAU,SAAf,UACI,uBAAOqJ,IAAKsC,EAAgBjF,MAAO6E,EAAa7D,SAAU,SAAA+E,GAAC,OAAIjB,EAAeiB,EAAEhG,OAAOC,QAAQhG,KAAK,OAAO+G,YAAY,cACvH,qBAAKzH,UAAW,sBAEpB,qBAAKA,UAAU,kBAAf,SAESyL,EAAehC,OAEVgC,EAAelG,KAAI,SAACmH,GAClB,OAAO,cAAC,GAAD,eAAsCA,GAAtBA,EAAazQ,QAFtC,mBAAG+D,UAAU,mBAAb,kEC2BX2M,OAjEf,WAEI,IAAM5L,EAAWlB,IACX+M,EAAYjN,GAAe,SAAApC,GAAK,OAAIA,EAAMkC,QAuBhD,OArBA2B,qBAAU,WACN,IACI,IAAMyL,EAA8CjQ,KAAK0E,MAAMC,OAAOC,aAAaC,QAAQ,SAG3FV,EACIvD,EAAa,CACT1B,gBAAiB+Q,EAA0B/Q,gBAC3CC,cAAe8Q,EAA0B9Q,iBAEnD,MAAO2F,GACLC,QAAQD,MAAM,+CAGnB,CAACX,IAGJK,qBAAU,WACNG,OAAOC,aAAaI,QAAQ,OAAQhF,KAAKC,UAAU+P,MACpD,CAACA,IAGA,eAAC,IAAD,WACI,cAAC,EAAD,IACA,eAAC,IAAD,WACI,cAAC,IAAD,CAAOE,KAAK,IAAIC,OAAK,EAArB,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,oBAAoBC,OAAK,EAArC,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,iBAAiBC,OAAK,EAAlC,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,cAAcC,OAAK,EAA/B,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,iBAAiBC,OAAK,EAAlC,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,2BAA2BC,OAAK,EAA5C,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,wBAAwBC,OAAK,EAAzC,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,UAAUC,OAAK,EAA3B,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,QAAQC,OAAK,EAAzB,SACI,cAAC,GAAD,MAEJ,cAAC,IAAD,CAAOD,KAAK,YAAYC,OAAK,EAA7B,SACI,cAAC,GAAD,aCnELC,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB7H,MAAK,YAAkD,IAA/C8H,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCCdO,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,IAAD,CAAUpO,MAAOA,EAAjB,SACI,cAAC,GAAD,QAGRqO,SAASC,eAAe,SAM5BZ,M","file":"static/js/main.8eb43fe7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1HtLa\",\"dot\":\"Loader_dot__2T9aA\",\"dot1\":\"Loader_dot1__2C5YS\",\"dot2\":\"Loader_dot2__NMjdT\",\"dot3\":\"Loader_dot3__17RD4\",\"dot4\":\"Loader_dot4__3eDyv\",\"reveal\":\"Loader_reveal__3s-I9\",\"slide\":\"Loader_slide__1Fty4\"};","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\nimport { ExtraDataType, UserAuthSliceState, UserAuth } from './auth-slice.types';\r\n\r\nconst defaultAuthState: UserAuthSliceState = {\r\n    isAuthenticated: false,\r\n    userAuthState: {\r\n        accessToken: null,\r\n        _id: null,\r\n        username: null\r\n    },\r\n};\r\n\r\nexport const authenticateAsyncThunk = createAsyncThunk(\r\n    'auth/authenticate', async (extraAuthData: ExtraDataType) => {\r\n        const response = await fetch(`https://cars-react-app-server.herokuapp.com/users/${extraAuthData.endpoint}`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(extraAuthData.userDataObj)\r\n        });\r\n\r\n        return await response.json();\r\n    });\r\n\r\nconst authSlice = createSlice({\r\n    name: 'auth-slice',\r\n    initialState: defaultAuthState,\r\n    reducers: {\r\n        handleLogout(state) {\r\n            state.userAuthState = defaultAuthState.userAuthState;\r\n            state.isAuthenticated = defaultAuthState.isAuthenticated;\r\n        },\r\n        setUserState(state, action: PayloadAction<UserAuthSliceState>) {\r\n            state.isAuthenticated = action.payload.isAuthenticated;\r\n            state.userAuthState = action.payload.userAuthState;\r\n        }\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder.addCase(authenticateAsyncThunk.fulfilled, (state, action: PayloadAction<UserAuth>) => {\r\n            state.isAuthenticated = true;\r\n            state.userAuthState = {\r\n                accessToken: action.payload.accessToken,\r\n                _id: action.payload._id,\r\n                username: action.payload.username\r\n            }\r\n        });\r\n        builder.addCase(authenticateAsyncThunk.rejected, (state) => {\r\n            state.isAuthenticated = defaultAuthState.isAuthenticated;\r\n            state.userAuthState = defaultAuthState.userAuthState;\r\n        })\r\n    }\r\n});\r\n\r\n\r\nexport const { handleLogout, setUserState } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\nimport { Item, CartSliceState } from './cart-slice.types';\r\n\r\nconst defaultCartState: CartSliceState = {\r\n    items: [],\r\n    totalPrice: 0,\r\n    totalQuantity: 0,\r\n}\r\n\r\n// dispatch(setCartItems({ items: [{ price: 10, title: 'Some tile'}, { price: 20, title: 'another title'}], totalPrice: 30, totalQuantity: 3}))\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart-slice',\r\n    initialState: defaultCartState,\r\n    reducers: {\r\n        setCartItems(state, action: PayloadAction<CartSliceState>) {\r\n            state.items = action.payload.items;\r\n            state.totalPrice = action.payload.totalPrice;\r\n            state.totalQuantity = action.payload.totalQuantity;\r\n        },\r\n        addNewCartItem(state, action: PayloadAction<Item>) {\r\n            const newCartItem = action.payload;\r\n            const selectedItem = state.items.find(item => item._id === newCartItem._id);\r\n\r\n            if (!selectedItem) {\r\n                state.items.push(newCartItem);\r\n                state.totalPrice += Number(newCartItem.price);\r\n            } else {\r\n                state.totalPrice += Number(selectedItem.price);\r\n                selectedItem.quantity++;\r\n            }\r\n            state.totalQuantity++;\r\n        },\r\n        deleteCartItem(state, action: PayloadAction<string>) {\r\n            const cartItem = state.items.find(item => item._id === action.payload);\r\n            state.items.splice(state.items.indexOf(cartItem), 1);\r\n\r\n            state.totalQuantity -= Number(cartItem.quantity);\r\n            state.totalPrice -= Number(cartItem.price) * Number(cartItem.quantity);\r\n        },\r\n        decreaseCartItemQuantity(state, action: PayloadAction<string>) {\r\n            const item = state.items.find(item => item._id === action.payload);\r\n\r\n            state.totalPrice -= Number(item.price);\r\n            item.quantity--;\r\n            state.totalQuantity--;\r\n        },\r\n        checkout(state) {\r\n            state.items = [];\r\n            state.totalPrice = 0;\r\n            state.totalQuantity = 0;\r\n        }\r\n    }\r\n});\r\n\r\nexport const cartSliceActions = cartSlice.actions;\r\n\r\nexport default cartSlice.reducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\n\r\nimport authSlice from \"./auth-slice\";\r\nimport cartSlice from './cart-slice';\r\n\r\nconst store = configureStore({\r\n    reducer: {\r\n        auth: authSlice,\r\n        cart: cartSlice,\r\n    },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\n\r\n\r\nexport default store;","import { Link } from 'react-router-dom';\r\n\r\nimport './_logo.scss';\r\n\r\nfunction Logo() {\r\n    return (\r\n        <div className=\"Logo\">\r\n            <Link to=\"/\">\r\n                <img src=\"https://th.bing.com/th/id/R.5eebdba556754091bfcae7839bd65da6?rik=7mP2jf6zMqYapw&pid=ImgRaw&r=0\" alt=\"logo\" />\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Logo;","import React from 'react';\r\nimport './_hamburger.scss';\r\n\r\ntype HamburgerProps = {\r\n    isActive: boolean;\r\n    toogle: () => void;\r\n}\r\n\r\nconst Hamburger: React.FC<HamburgerProps> = React.memo(({ isActive, toogle }) => {\r\n    //console.log(\"Hamburger component renders!\"); // :D\r\n    return (\r\n        <button onClick={toogle} className={`hamburger hamburger--spin ${isActive && 'is-active'}`} type=\"button\">\r\n            <span className=\"hamburger-box\">\r\n                <span className=\"hamburger-inner\"></span>\r\n            </span>\r\n        </button>\r\n    );\r\n});\r\n\r\nexport default Hamburger;\r\n\r\n","import { Fragment, useCallback, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { handleLogout } from '../../../store/auth-slice';\r\n\r\nimport './_navigation.scss';\r\n\r\nimport Hamburger from './Hamburger/Hamburger';\r\nimport { useAppDispatch, useAppSelector } from '../../../store';\r\n\r\nfunction Navigation() {\r\n    const [isActive, setIsActive] = useState(false);\r\n\r\n    const isAuthenticated = useAppSelector(state => state.auth.isAuthenticated);\r\n    const cartState = useAppSelector(state => state.cart);\r\n    const dispatch = useAppDispatch();\r\n\r\n    const toogleActiveState = useCallback(() => {\r\n        setIsActive(prevActiveState => !prevActiveState);\r\n    }, []);\r\n\r\n    const renderNavLinks = (): JSX.Element => {\r\n        if (isAuthenticated) {\r\n            return (\r\n                <Fragment>\r\n                    <li>\r\n                        <Link to=\"/cart\">Cart {cartState.totalQuantity}</Link>\r\n                    </li>\r\n                    <li>\r\n                        <Link to=\"/movies/create\">Create Movie Article</Link>\r\n                    </li>\r\n                    <li>\r\n                        <Link to=\"/\" onClick={() => dispatch(handleLogout())}>Logout</Link>\r\n                    </li>\r\n                    <li>\r\n                        <Link to=\"/filter\">Search Movies</Link>\r\n                    </li>\r\n                </Fragment>\r\n            )\r\n        } else {\r\n            return (\r\n                <Fragment>\r\n                    <li>\r\n                        <Link to=\"/auth/register\">Sign up</Link>\r\n                    </li>\r\n                    <li>\r\n                        <Link to=\"/auth/login\">Sign in</Link>\r\n                    </li>\r\n                </Fragment>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <nav className=\"Nav\">\r\n                <ul className={`Nav__list ${isActive ? `Nav__list--active` : `Nav__list--unactive`}`}>\r\n                    {renderNavLinks()}\r\n                </ul>\r\n                <Hamburger isActive={isActive} toogle={toogleActiveState} />\r\n            </nav>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Navigation;\r\n","import { useEffect } from 'react';\r\nimport { useAppDispatch, useAppSelector } from '../../store';\r\nimport { cartSliceActions } from '../../store/cart-slice';\r\nimport Logo from './Logo/Logo';\r\nimport Navigation from './Navigation/Navigation';\r\n\r\nimport './_header.scss';\r\n\r\nfunction Header() {\r\n    const cartState = useAppSelector(state => state.cart);\r\n\r\n    const dispatch = useAppDispatch();\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const cartStateFromLocalStorage: typeof cartState = JSON.parse(window.localStorage.getItem('cart'));\r\n            dispatch(\r\n                cartSliceActions\r\n                    .setCartItems({\r\n                        items: cartStateFromLocalStorage.items,\r\n                        totalPrice: cartStateFromLocalStorage.totalPrice,\r\n                        totalQuantity: cartStateFromLocalStorage.totalQuantity\r\n                    })\r\n            );\r\n        } catch (error) {\r\n            console.error(\"Invalid cart state in the local storage!\");\r\n        }\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        window.localStorage.setItem('cart', JSON.stringify(cartState));\r\n    }, [cartState]);\r\n\r\n    return (\r\n        <header className=\"Header\">\r\n            <Logo />\r\n            <Navigation />\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import './_moviesForum.scss';\r\n\r\nfunction MoviesForum() {\r\n    return (\r\n        <section className=\"HomeWrapper\">\r\n            <article className=\"Home\">\r\n                <h2 className=\"HomeDetails\">\r\n                    <span className=\"HomeDetails__title\">Movies Forum</span>\r\n                    <span className=\"HomeDetails__description\">Search for newest movies, post new movies, share opinions and likes anywhere, anytime!</span>\r\n                </h2>\r\n            </article>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default MoviesForum;","async function request(URL, configOptions) {\r\n    try {\r\n        const response = await fetch(URL, configOptions);\r\n\r\n        if (!response.ok) {\r\n            throw new Error((await response.json()).message);\r\n        } else {\r\n            const data = await response.json();\r\n\r\n            return data;\r\n        }\r\n    } catch (error) {\r\n        alert(error.message);\r\n        throw new Error(error.message || \"Something went wrong !!!\");\r\n    }\r\n}\r\n\r\nfunction setOptions(method: string, authToken?: string, body?: any) {\r\n    let options: {\r\n        method: string;\r\n        headers: {\r\n            authToken?: string;\r\n            'Content-Type'?: 'application/json'\r\n        };\r\n        body?: any\r\n    } = {\r\n        method,\r\n        headers: {},\r\n    }\r\n\r\n    if (authToken) {\r\n        options.headers['X-Authorization'] = authToken;\r\n    }\r\n\r\n    if (body) {\r\n        options.headers['Content-Type'] = 'application/json';\r\n        options.body = JSON.stringify(body);\r\n    }\r\n\r\n    return options;\r\n}\r\n\r\nconst baseURL = 'https://cars-react-app-server.herokuapp.com';\r\n\r\nasync function get(endpoint: string) {\r\n    return await request(baseURL + endpoint, setOptions('GET'));\r\n}\r\n\r\nasync function post(endpoint: string, authToken: string, data: any) {\r\n    return await request(baseURL + endpoint, setOptions('POST', authToken, data));\r\n}\r\n\r\nasync function put(endpoint: string, authToken: string, data: any) {\r\n    return await request(baseURL + endpoint, setOptions('PUT', authToken, data));\r\n}\r\n\r\nasync function del(endpoint: string, authToken: string) {\r\n    return await request(baseURL + endpoint, setOptions('DELETE', authToken));\r\n}\r\n\r\nexport {\r\n    get,\r\n    post,\r\n    put,\r\n    del,\r\n}\r\n\r\nexport default request;","import * as api from './api';\r\n\r\nexport async function getMovieArticles() {\r\n    return await api.get('/data/movies');\r\n}\r\n\r\nexport async function postMovieArticle(authToken, data) {\r\n    return await api.post('/data/movies', authToken, data);\r\n}\r\n\r\nexport async function deleteMovieArticle(movieId, authToken) {\r\n    return await api.del(`/data/movies/${movieId}`, authToken);\r\n}\r\n\r\nexport async function getMovieArticleLikesCount(movieId) {\r\n    return await api.get(`/data/likes?where=movieId%3D%22${movieId}%22&distinct=_ownerId&count`)\r\n}\r\n\r\nexport async function getMovieArticleCommentsCount(movieId) {\r\n    return await api.get(`/data/comments?where=movieId%3D%22${movieId}%22&distinct=_ownerId&count`);\r\n}\r\n\r\nexport async function getSpecificMovieArticle(movieId) {\r\n    return await api.get(`/data/movies/${movieId}`);\r\n}\r\n\r\nexport async function getMovieArticleLikesFromUser(movieId, userId) {\r\n    return await api.get(`/data/likes?where=movieId%3D%22${movieId}%22%20and%20_ownerId%3D%22${userId}%22`)\r\n}\r\n\r\nexport async function postMovieArticleLike(authToken, data) {\r\n    return await api.post('/data/likes', authToken, data);\r\n}\r\n\r\nexport async function getMovieArticleComments(movieId) {\r\n    return await api.get(`/data/comments?where=movieId%3D%22${movieId}%22`)\r\n}\r\n\r\nexport async function postMovieArticleComment(authToken, data) {\r\n    return await api.post('/data/comments', authToken, data);\r\n}\r\n\r\nexport async function deleteMovieArticleComment(commentId, authToken) {\r\n    return await api.del(`/data/comments/${commentId}`, authToken);\r\n}\r\n\r\nexport async function logout() {\r\n    return await api.get('/users/logout');\r\n}\r\n\r\nexport async function getCartItems() {\r\n    return await api.get('/data/cart');\r\n}\r\n\r\nexport async function addCartItem(authToken, data) {\r\n    return await api.post('/data/cart', authToken, data);\r\n}\r\n\r\nexport async function deleteCartItem(cartId, authToken) {\r\n    return await api.del(`/data/cart/${cartId}`, authToken);\r\n}\r\n\r\nexport async function updateMovieArticle(movieId, authToken, data) {\r\n    return await api.put(`/data/movies/${movieId}`, authToken, data);\r\n}\r\n\r\nexport async function updateMovieArticleLikes(movieId, authToken, data) {\r\n    return await api.put(`/data/movies/${movieId}`, authToken, data);\r\n}","import { Link } from 'react-router-dom';\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nimport { getMovieArticleCommentsCount, getMovieArticleLikesCount } from '../../utils/requests';\r\nimport { useAppDispatch, useAppSelector } from '../../store/index';\r\nimport { cartSliceActions } from '../../store/cart-slice';\r\n\r\nimport './_movieCard.scss';\r\n\r\ntype MovieCardProps = {\r\n    title: string;\r\n    price: number;\r\n    _id: string;\r\n    img: string;\r\n    description: string;\r\n}\r\n\r\n\r\nconst MovieCard: React.FC<MovieCardProps> = ({ _id, img, price, title, description }) => {\r\n    const [likesCount, setLikesCount] = useState(0);\r\n    const [commentsCount, setCommentsCount] = useState(0);\r\n    const dispatch = useAppDispatch();\r\n    const cartStateItems = useAppSelector(state => state.cart.items);\r\n    const isAuthenticated = useAppSelector(state => state.auth.isAuthenticated);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            setLikesCount(await getMovieArticleLikesCount(_id));\r\n        })();\r\n    }, [_id]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            setCommentsCount(await getMovieArticleCommentsCount(_id));\r\n        })();\r\n    }, [_id]);\r\n\r\n    const onAddToCart = () => {\r\n        const isCardItem = cartStateItems.find(item => item._id === _id);\r\n        const quantity = isCardItem ? isCardItem.quantity : 1;\r\n        dispatch(cartSliceActions.addNewCartItem({ title, quantity, description, img, price, _id }));\r\n    }\r\n\r\n    return (\r\n        <div className=\"CardWrapper\">\r\n            <div className=\"Card Front\">\r\n                <article>\r\n                    <img className=\"CardImage\" src={img} alt=\"Movie Card\" />\r\n                    <h3 className=\"CardTitle\">{title}</h3>\r\n                </article>\r\n                <article className=\"card-footer\">\r\n                    <Link to={`/movies/details/${_id}`} className=\"CardButton\">Details</Link>\r\n                </article>\r\n                <span className=\"CardLikes\">{likesCount} Likes &#128077;</span>\r\n                <span className=\"CardComments\">{commentsCount} Comments &#128173;</span>\r\n            </div>\r\n            <div className=\"Card Back\">\r\n                <span className=\"Back__price\">{price}$</span>\r\n                <div className=\"Back__buttons\">\r\n                {isAuthenticated && <button\r\n                    onClick={onAddToCart}\r\n                    className=\"Back__cartBtn\"\r\n                    type=\"button\">\r\n                    Add To Cart\r\n                </button>}\r\n                <Link to={`/movies/details/${_id}`} className={`${!isAuthenticated && 'Back__detBtn--incorrect'} Back__detBtn`}>Check Details</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default MovieCard;","import style from './Loader.module.css';\r\n\r\n\r\nfunction Loader() {\r\n    return (\r\n        <div className={style.loader}>\r\n            <div className={[style.dot, style.dot1].join(' ')}></div>\r\n            <div className={[style.dot, style.dot2].join(' ')}></div>\r\n            <div className={[style.dot, style.dot3].join(' ')}></div>\r\n            <div className={[style.dot, style.dot4].join(' ')}></div> \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loader;","import { useEffect, useState } from 'react';\r\n\r\nimport MoviesForum from './MoviesForum/MoviesForum';\r\nimport MovieCard from '../../../Cards/MovieCard/MovieCard';\r\n\r\nimport Loader from '../../../Cards/Loader/Loader';\r\n\r\nimport { getMovieArticles } from '../../../utils/requests';\r\n\r\nimport './_home.scss';\r\n\r\nfunction Home() {\r\n    const [movies, setMovies] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        getMovieArticles().then(movies => setMovies(movies)).finally(() => setLoading(false));\r\n    }, []);\r\n\r\n\r\n    if (loading) {\r\n        return <Loader />\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <MoviesForum />\r\n            <section>\r\n                <div>\r\n                    <h1 className=\"Heading\">Movie Articles</h1>\r\n                    <div className=\"HeadingWrapper\">\r\n                        { movies.map((movieArticle) => <MovieCard key={movieArticle._id} {...movieArticle} />) }\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","import * as yup from 'yup';\r\n\r\nexport const registerValidationSchema = yup.object().shape({\r\n    email: yup.string()\r\n        .email('Invalid email format!')\r\n        .max(25, 'Your email must not be longer than 25 charackters!')\r\n        .min(10, 'Your email should be at least 10 charackters!')\r\n        .required('Required email field!'),\r\n    password: yup.string()\r\n        .min(6, 'Password must be at least 6 charcakters!')\r\n        .max(15, 'Password should not be longer than 15 charackters!')\r\n        .matches(/[A-Za-z0-9]+/, 'Password should contain uppercase,lowercase charackters and digits!')\r\n        .required('Required password field!'),\r\n    repassword: yup.string()\r\n        .oneOf([yup.ref('password'), null], 'Passwords must match!')\r\n        .required('Required repassword field!'),\r\n    username: yup.string()\r\n        .matches(/[A-Z][A-Za-z0-9]+/, 'Username have to start with uppercase letter and continue with lowercase or digits!')\r\n        .required('Required username field!')\r\n});","import { ChangeEvent, ChangeEventHandler, useState } from 'react';\r\nimport { SchemaLike } from \"yup/lib/types\"\r\n\r\n\r\nfunction useForm<T extends object>(initialState: T): [T, ChangeEventHandler<HTMLInputElement | HTMLTextAreaElement>, Function] {\r\n    const [formData, setFormData] = useState<T>(initialState);\r\n\r\n    const onInputChangeHandler = (event: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>): void => {\r\n        setFormData((prevFormState): T => {\r\n            return {\r\n                ...prevFormState,\r\n                [event.target.name]: event.target.value\r\n            }\r\n        });\r\n    }\r\n\r\n    const onValidateSubmitHandler = async (schema: SchemaLike): Promise<T | string> => {\r\n        try {\r\n            return await schema.validate(formData);\r\n        } catch (err) {\r\n            return err.errors[0];\r\n        }\r\n    }\r\n\r\n    return [\r\n        formData,\r\n        onInputChangeHandler,\r\n        onValidateSubmitHandler,\r\n    ]\r\n}\r\n\r\nexport default useForm;\r\n// That's here are custom hooks\r\n\r\n// I think that U should not be a generic and should be a schema validation type\r\n// Sorry I don't know how to really do this, and I'm not super great at generics.\\\r\n// in some components where im not using validations i should ... \r\n// Then you should either write another handler called just onSumbitHandler or\r\n// make thae schema in the onValidateSumbitHandler optional and skip... well no \r\n// because the validation handler just validates\r\n\r\n\r\n\r\n\r\n// I do but it wasn't doing anything.\r\n// Don't u have intelisense when u are importing the  thins\r\n// Looks good. Nice use of generics. :)//\r\n// using here yup for validation\r\n\r\n// Now you don't have to check isSchema because Typescript should enforce that.\r\n// aha alright :D\r\n\r\n// Something like that if you don't mind me making some changes.\r\n// in some components ","import { useHistory } from 'react-router-dom';\r\nimport { FormEvent, useState } from 'react';\r\n\r\nimport { authenticateAsyncThunk } from '../../../../store/auth-slice';\r\n\r\nimport { registerValidationSchema } from '../../../../schema/registerSchema';\r\nimport useForm from '../../../hooks/useForm';\r\n\r\nimport '../_auth.scss';\r\nimport { useAppDispatch } from '../../../../store';\r\n\r\ntype RegisterAuthType = {\r\n    email: string;\r\n    password: string;\r\n    username: string;\r\n    repassword: string;\r\n}\r\n\r\nfunction Register() {\r\n    const [registerFormData, onInputChangeHandler, validateSchemaHandler] = useForm<RegisterAuthType>({} as RegisterAuthType);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const dispatch = useAppDispatch();\r\n    const history = useHistory();\r\n\r\n    const onRegisterSubmitHandler = async (event: FormEvent<HTMLFormElement>): Promise<void> => {\r\n        event.preventDefault();\r\n\r\n        const result: typeof registerFormData | string = await validateSchemaHandler(registerValidationSchema);\r\n\r\n        if (typeof result !== 'object') {\r\n            setError(result);\r\n        } else {\r\n            const { email, username, password } = result;\r\n\r\n            dispatch(\r\n                authenticateAsyncThunk({\r\n                    endpoint: 'register',\r\n                    userDataObj: {\r\n                        email,\r\n                        username,\r\n                        password\r\n                    },\r\n                }));\r\n            history.push('/');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <section className=\"Auth\">\r\n            <div className=\"Main\">\r\n                <div className=\"AuthCreate\">\r\n                    <form onSubmit={onRegisterSubmitHandler}>\r\n                        <h2 className=\"AuthCreate__title\">CREATE ACCOUNT</h2>\r\n                        {error && <div className=\"error\">{error}</div>}\r\n                        <input className=\"AuthCreate__user\"\r\n                            type=\"text\"\r\n                            placeholder=\"&#128273;  YOUR USERNAME\"\r\n                            name=\"username\"\r\n                            onChange={onInputChangeHandler}\r\n                            value={registerFormData.username}\r\n                        />\r\n                        <input className=\"AuthCreate__email\"\r\n                            type=\"email\"\r\n                            placeholder=\"&#128231; YOUR EMAIL\"\r\n                            name=\"email\"\r\n                            onChange={onInputChangeHandler}\r\n                            value={registerFormData.email}\r\n                        />\r\n                        <input className=\"AuthCreate__pass\"\r\n                            type=\"password\"\r\n                            placeholder=\"&#128274; PASSWORD\"\r\n                            name=\"password\"\r\n                            onChange={onInputChangeHandler}\r\n                            value={registerFormData.password}\r\n                        />\r\n                        <input className=\"AuthCreate__pass\"\r\n                            type=\"password\"\r\n                            placeholder=\"&#128275; CONFIRM PASSWORD\"\r\n                            name=\"repassword\"\r\n                            onChange={onInputChangeHandler}\r\n                            value={registerFormData.repassword}\r\n                        />\r\n                        <button type=\"submit\" className=\"AuthCreate__btn\">Create Account</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n","import { FormEvent } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useAppDispatch } from '../../../../store';\r\nimport { authenticateAsyncThunk } from '../../../../store/auth-slice';\r\n\r\nimport useForm from '../../../hooks/useForm';\r\n\r\nimport '../_auth.scss';\r\n\r\ntype LoginAuthType = {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\nfunction Login() {\r\n    const [loginFormData, onInputChangeHandler] = useForm<LoginAuthType>({} as LoginAuthType);\r\n    const dispatch = useAppDispatch();\r\n    const history = useHistory();\r\n\r\n    const onLoginSubmitHandler = async (event: FormEvent<HTMLFormElement>): Promise<void> => {\r\n        event.preventDefault();\r\n\r\n        dispatch(\r\n            authenticateAsyncThunk({\r\n                endpoint: 'login',\r\n                userDataObj: {\r\n                    email: loginFormData.email,\r\n                    password: loginFormData.password\r\n                }\r\n            }));\r\n        history.push('/');\r\n    }\r\n\r\n    return (\r\n        <section className=\"Auth\">\r\n            <div className=\"Main\">\r\n                <div className=\"AuthCreate\">\r\n                    <form onSubmit={onLoginSubmitHandler}>\r\n                        <h2 className=\"AuthCreate__title\">SIGN UP</h2>\r\n                        <input className=\"AuthCreate__email\"\r\n                            type=\"email\"\r\n                            name=\"email\"\r\n                            placeholder=\"&#128231; YOUR EMAIL\"\r\n                            onChange={onInputChangeHandler}\r\n                            value={loginFormData.email}\r\n                        />\r\n                        <input className=\"AuthCreate__pass\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"&#128274; PASSWORD\"\r\n                            onChange={onInputChangeHandler}\r\n                            value={loginFormData.password}\r\n                        />\r\n                        <button type=\"submit\" className=\"AuthCreate__btn\">LOG IN</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n","import * as yup from 'yup';\r\n\r\nexport const createValidationSchema = yup.object().shape({\r\n    title: yup\r\n        .string()\r\n        .max(20, 'Title must not be longer than 20 symbols!')\r\n        .required('Required title field!'),\r\n    description: yup\r\n        .string()\r\n        .max(100, 'Description must not be longer than 100 symbols!')\r\n        .required('Required description field!'),\r\n    img: yup\r\n        .string()\r\n        .required('Required image field!'),\r\n    price: yup\r\n        .number()\r\n        .required('Required price field!')\r\n});","import { useHistory } from 'react-router';\r\nimport { useState } from 'react';\r\n\r\nimport useForm from '../../../hooks/useForm';\r\nimport { createValidationSchema } from '../../../../schema/createSchema';\r\nimport { postMovieArticle } from '../../../../utils/requests';\r\nimport { useAppSelector } from '../../../../store';\r\n\r\nimport '../_decorate.scss';\r\nimport { FormEvent } from 'react';\r\nimport { DecorateType } from '../Decorate.types';\r\n\r\nfunction Create() {\r\n    const [createFormData, onInputChangeHandler, onCreateSchemaValidate] = useForm<DecorateType>({} as DecorateType);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const userAuthToken = useAppSelector(state => state.auth.userAuthState.accessToken);\r\n    const history = useHistory();\r\n\r\n    const onCreateSubmitHandler = async (event: FormEvent<HTMLFormElement>): Promise<void> => {\r\n        event.preventDefault();\r\n\r\n        const result: typeof createFormData | string = await onCreateSchemaValidate(createValidationSchema);\r\n\r\n        if (typeof result !== 'object') {\r\n            setError(error);\r\n        } else {\r\n            const { title, description, price, img } = result;\r\n            \r\n            await postMovieArticle(userAuthToken, { title, description, price, img, likes: 0 });\r\n            history.push('/');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <section className=\"Create\">\r\n            <div className=\"CreateWrapper\">\r\n                <h2 className=\"FormTitle\">CREATE MOVIE ARTICLE</h2>\r\n                <form className=\"Form\" onSubmit={onCreateSubmitHandler}>\r\n                    { error && <div className=\"error\">{error}</div>}\r\n                    <input className=\"Form__title\"\r\n                        type=\"text\"\r\n                        name=\"title\"\r\n                        placeholder=\"ENTER MOVIE TITLE\"\r\n                        onChange={onInputChangeHandler}\r\n                        value={createFormData.title}\r\n                    />\r\n                    <textarea className=\"Form__description\"\r\n                        name=\"description\"\r\n                        placeholder=\"ENTER MOVIE DESCRIPTION\"\r\n                        onChange={onInputChangeHandler}\r\n                        value={createFormData.description}\r\n                    >\r\n                    </textarea>\r\n                    <input className=\"Form__image\"\r\n                        type=\"text\"\r\n                        name=\"img\"\r\n                        placeholder=\"ENTER MOVIE IMAGE URL\"\r\n                        onChange={onInputChangeHandler}\r\n                        value={createFormData.img}\r\n                    />\r\n                    <input className=\"Form__price\"\r\n                        type=\"number\"\r\n                        name=\"price\"\r\n                        placeholder=\"ENTER MOVIE PRICE\"\r\n                        onChange={onInputChangeHandler}\r\n                        value={createFormData.price}\r\n                    />\r\n                    <button className=\"Form__btn\" type=\"submit\">CREATE</button>\r\n                </form>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Create;\r\n","import React from 'react';\r\nimport './_commentCard.scss';\r\n\r\ntype CommentCardProps = {\r\n    content: string;\r\n    author: string;\r\n    deleteCurrentComment?: () => void;\r\n}\r\n\r\nconst CommentCard: React.FC<CommentCardProps> = ({ content, author, deleteCurrentComment }) => {\r\n    return (\r\n        <div className=\"CommentUser\">\r\n            <p className=\"CommentContent\">\r\n                &#128173; {content}\r\n                { deleteCurrentComment && <button onClick={deleteCurrentComment} className=\"CommentDelete\">&#10006;</button> }\r\n                <i className=\"CommentName\">- {author}</i>\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CommentCard;\r\n","import React, { useRef } from 'react';\r\n\r\nimport CommentCard from '../../../../Cards/CommentCard/CommentCard';\r\n\r\nimport './_commentSection.scss';\r\nimport { useAppSelector } from '../../../../store';\r\n\r\nimport { MovieArticle, MovieArticleComment } from '../DetailsReducer/reducer.types';\r\n\r\ntype CommentProps = {\r\n    movieArticle: MovieArticle,\r\n    movieArticleComments: MovieArticleComment[],\r\n    postMovieArticleComment: (username: string, content: string) => Promise<void>\r\n    removeMovieArticleCommentHandler: (commentId: string) => Promise<void>\r\n}\r\n\r\nconst CommentSection: React.FC<CommentProps> = React.memo(({ movieArticle, movieArticleComments, postMovieArticleComment, removeMovieArticleCommentHandler }) => {\r\n    // console.log('CommentSection Component Just Rendered!');\r\n    const contentRef = useRef<HTMLTextAreaElement>(null);\r\n    const userAuthState = useAppSelector(state => state.auth);\r\n\r\n    const onPostNewCommentSubmitHandler = async (event: React.FormEvent<HTMLFormElement>): Promise<void> => {\r\n        event.preventDefault();\r\n\r\n        await postMovieArticleComment(userAuthState.userAuthState.username, contentRef.current.value);\r\n        contentRef.current.value = '';\r\n    };\r\n\r\n    return (\r\n        <div className=\"Comments\">\r\n            <h2 className=\"Comments__title\">Leave your comments here: &#128172;</h2>\r\n            {\r\n                movieArticleComments.map((movieArticleComment) =>\r\n                    <CommentCard\r\n                        key={movieArticleComment._id}\r\n                        content={movieArticleComment.content}\r\n                        author={movieArticleComment.author}\r\n                        deleteCurrentComment={\r\n                            userAuthState.userAuthState._id === movieArticleComment._ownerId \r\n                            && removeMovieArticleCommentHandler.bind(null, movieArticleComment._id)\r\n                        }\r\n                    />)\r\n            }\r\n            {\r\n                (userAuthState.userAuthState._id !== movieArticle._ownerId && userAuthState.isAuthenticated) &&\r\n                <form onSubmit={onPostNewCommentSubmitHandler} className=\"CommentForm\">\r\n                    <textarea className=\"CommentForm__input\"\r\n                        name=\"content\"\r\n                        placeholder=\"Enter your expression from this movie\"\r\n                        rows={5}\r\n                        cols={50}\r\n                        ref={contentRef}\r\n                    >\r\n                    </textarea>\r\n                    <button className=\"CommentForm__submit\" type=\"submit\">Post comment</button>\r\n                </form>\r\n            }\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default CommentSection;\r\n","import { useHistory } from 'react-router-dom';\r\nimport React, { Fragment } from 'react';\r\n\r\nimport { cartSliceActions } from '../../../../store/cart-slice';\r\n\r\nimport { deleteMovieArticle } from '../../../../utils/requests';\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../../../store';\r\n\r\nimport './_detailsButtons.scss';\r\nimport { MovieArticle, MovieArticleLikeFromUser } from '../DetailsReducer/reducer.types';\r\n\r\ntype DetailsButtonsType = {\r\n    movieArticle: MovieArticle,\r\n    movieArticleLikesFromUser: MovieArticleLikeFromUser[],\r\n    postMovieArticleLike: () => Promise<void>\r\n}\r\n\r\nconst DetailsButtons: React.FC<DetailsButtonsType> = React.memo(({ postMovieArticleLike, movieArticle, movieArticleLikesFromUser }) => {\r\n    // console.log('DetailsButtons Component Just Rendered!');\r\n    const userAuthState = useAppSelector(state => state.auth.userAuthState);\r\n    const cartStateItmes = useAppSelector(state => state.cart.items);\r\n    const dispatch = useAppDispatch();\r\n    const history = useHistory();\r\n\r\n    if (!userAuthState.accessToken) { return <></>; };\r\n\r\n    const onAddToCartClickHandler = () => {\r\n        const isCardItem = cartStateItmes.find(item => item._id === movieArticle._id);\r\n        const quantity = isCardItem ? isCardItem.quantity : 1;\r\n        dispatch(cartSliceActions.addNewCartItem({ \r\n            title: movieArticle.title, \r\n            quantity, \r\n            description: movieArticle.description, \r\n            img: movieArticle.img, \r\n            price: movieArticle.price, \r\n            _id: movieArticle._id \r\n        }));\r\n    };\r\n\r\n    return (\r\n        <div className=\"ButtonsWrapper\">\r\n            {\r\n                userAuthState._id !== movieArticle._ownerId\r\n                    ?\r\n                    <div className=\"User\">\r\n                        {\r\n                            movieArticleLikesFromUser.length === 0 &&\r\n                            <>\r\n                                <button onClick={postMovieArticleLike} className='User__like User__btn'>Like &#128077;</button>\r\n                            </>\r\n                        }\r\n                        <button onClick={onAddToCartClickHandler} className='User__add'>Add</button>\r\n                    </div>\r\n                    :\r\n                    <div className=\"Owner\">\r\n                        <button onClick={() => deleteMovieArticle(movieArticle._id, userAuthState.accessToken).then(() => history.push('/'))}\r\n                            className='Owner__delete Owner__btn'>\r\n                            &#10060; Delete\r\n                        </button>\r\n                        <button\r\n                            onClick={() => history.push({ pathname: `/movies/edit/${movieArticle._id}`, state: movieArticle })}\r\n                            className='Owner__edit Owner__btn'\r\n                        >\r\n                            &#9997; Edit\r\n                        </button>\r\n                    </div>\r\n            }\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default DetailsButtons;\r\n","import { DetailsState, AddMovieArticleCommentAction, PostMovieArticleLikeAction, DeleteMovieArticleCommentAction, SetMovieArticleDataAction, MovieArticle } from './reducer.types';\r\n\r\n\r\nexport const INITIAL_MOVIE_DETAILS_STATE: DetailsState = {\r\n    data: {\r\n        movieArticle: {} as MovieArticle,\r\n        movieArticleComments: [],\r\n        movieArticleLikesFromUser: [],\r\n    },\r\n    UI: {\r\n        isDataLoaded: false,\r\n    }\r\n}\r\n\r\nexport default function reducer(\r\n    state: DetailsState,\r\n    action: AddMovieArticleCommentAction | PostMovieArticleLikeAction | DeleteMovieArticleCommentAction | SetMovieArticleDataAction\r\n) {\r\n    switch (action.type) {\r\n        case 'SET_MOVIE_ARTICLE_DATA':\r\n            return {\r\n                UI: {\r\n                    isDataLoaded: true\r\n                },\r\n                data: {\r\n                    movieArticle: {\r\n                        _ownerId: action.payload.movieArticle._ownerId,\r\n                        title: action.payload.movieArticle.title,\r\n                        description: action.payload.movieArticle.description,\r\n                        _id: action.payload.movieArticle._id,\r\n                        img: action.payload.movieArticle.img,\r\n                        price: Number(action.payload.movieArticle.price),\r\n                    },\r\n                    movieArticleComments: action.payload.movieArticleComments,\r\n                    movieArticleLikesFromUser: action.payload.movieArticleLikesFromUser\r\n                }\r\n            }\r\n        case 'ADD_MOVIE_ARTICLE_COMMENT':\r\n            return {\r\n                ...state,\r\n                data: {\r\n                    ...state.data,\r\n                    movieArticleComments: [...state.data.movieArticleComments, action.payload]\r\n                }\r\n            }\r\n        case 'DELETE_MOVIE_ARTICLE_COMMENT':\r\n            return {\r\n                ...state,\r\n                data: {\r\n                    ...state.data,\r\n                    movieArticleComments: state.data.movieArticleComments.filter(comment => comment._id !== action.payload)\r\n                }\r\n            }\r\n        case 'ADD_MOVIE_ARTICLE_LIKE':\r\n            return {\r\n                ...state,\r\n                data: {\r\n                    ...state.data,\r\n                    movieArticleLikesFromUser: [action.payload]\r\n                }\r\n            }\r\n        default:\r\n            throw new Error(\"Should not reach that case!Bad action!\");\r\n    }\r\n}\r\n","import { useEffect, useReducer, useMemo, useCallback } from 'react';\r\n\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport CommentSection from './CommentSection/CommentSection';\r\nimport DetailsButtons from './DetailsButtons/DetailsButtons';\r\n\r\nimport reducer, { INITIAL_MOVIE_DETAILS_STATE } from \"./DetailsReducer/reducer\";\r\n\r\nimport './_details.scss';\r\n\r\nimport Loader from '../../../Cards/Loader/Loader';\r\nimport { useAppSelector } from '../../../store/index';\r\nimport { getMovieArticleComments, getMovieArticleLikesFromUser, getSpecificMovieArticle, postMovieArticleLike, postMovieArticleComment, deleteMovieArticleComment } from '../../../utils/requests';\r\nimport { MovieArticle, MovieArticleComment, MovieArticleLikeFromUser } from './DetailsReducer/reducer.types';\r\n\r\n\r\nfunction Details() {\r\n    const [details, dispatch] = useReducer(reducer, INITIAL_MOVIE_DETAILS_STATE);\r\n\r\n    const { movieId } = useParams();\r\n    const userId = useMemo((): string => {\r\n        return JSON.parse(window.localStorage.getItem('user')).userAuthState._id;\r\n    }, []);\r\n    const accessToken = useAppSelector(state => state.auth.userAuthState.accessToken);\r\n\r\n    useEffect(() => {\r\n        (async function () {\r\n            const [movieArticle, movieArticleComments, movieArticleLikesFromUser]: [MovieArticle, MovieArticleComment[], MovieArticleLikeFromUser[]] = await Promise.all([\r\n                getSpecificMovieArticle(movieId),\r\n                getMovieArticleComments(movieId),\r\n                getMovieArticleLikesFromUser(movieId, userId)\r\n            ]);\r\n\r\n            dispatch({\r\n                type: 'SET_MOVIE_ARTICLE_DATA',\r\n                payload: {\r\n                    movieArticle: {\r\n                        _ownerId: movieArticle._ownerId,\r\n                        _id: movieArticle._id,\r\n                        title: movieArticle.title,\r\n                        price: movieArticle.price,\r\n                        description: movieArticle.description,\r\n                        img: movieArticle.img,\r\n                    },\r\n                    movieArticleComments,\r\n                    movieArticleLikesFromUser\r\n                }\r\n            });\r\n        })();\r\n    }, [movieId, userId]);\r\n\r\n    const postMovieArticleCommentHandler = useCallback(\r\n        async (author: string, content: string): Promise<void> => {\r\n            const movieArticleComment: MovieArticleComment = await postMovieArticleComment(accessToken, {\r\n                movieId,\r\n                author,\r\n                content\r\n            });\r\n            dispatch({ type: 'ADD_MOVIE_ARTICLE_COMMENT', payload: movieArticleComment });\r\n        }, [movieId, accessToken]);\r\n\r\n    const removeMovieArticleCommentHandler = useCallback(\r\n        async (commentId: string): Promise<void> => {\r\n            await deleteMovieArticleComment(commentId, accessToken);\r\n            dispatch({ type: 'DELETE_MOVIE_ARTICLE_COMMENT', payload: commentId });\r\n        }, [accessToken]);\r\n\r\n    const postMovieArticleLikeHandler = useCallback(\r\n        async (): Promise<void> => {\r\n            const movieArticleLikeFromUser: MovieArticleLikeFromUser = await postMovieArticleLike(accessToken, { movieId });\r\n            dispatch({ type: 'ADD_MOVIE_ARTICLE_LIKE', payload: movieArticleLikeFromUser });\r\n        }, [accessToken, movieId]);\r\n\r\n    if (!details.UI.isDataLoaded) {\r\n        return <Loader />\r\n    }\r\n\r\n    return (\r\n        <section className=\"Details\">\r\n            <div className=\"Container\">\r\n                <h1 className=\"ContainerTitle\">Movie title: {details.data.movieArticle.title}</h1>\r\n                <img className=\"ContainerImage\" src={details.data.movieArticle.img} alt=\"movie\" />\r\n                <div className=\"ContainerDetails\">\r\n                    <h3 className=\"ContainerDetails__description\">Movie Description</h3>\r\n                    <p className=\"ContainerDetails__p\">\r\n                        {details.data.movieArticle.description}\r\n                    </p>\r\n                    <DetailsButtons\r\n                        postMovieArticleLike={postMovieArticleLikeHandler}\r\n                        movieArticle={details.data.movieArticle}\r\n                        movieArticleLikesFromUser={details.data.movieArticleLikesFromUser}\r\n                    />\r\n                    <CommentSection\r\n                        postMovieArticleComment={postMovieArticleCommentHandler}\r\n                        removeMovieArticleCommentHandler={removeMovieArticleCommentHandler}\r\n                        movieArticle={details.data.movieArticle}\r\n                        movieArticleComments={details.data.movieArticleComments}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\n\r\nexport default Details;\r\n","import React from 'react';\r\nimport { useAppDispatch } from '../../store';\r\n\r\nimport { cartSliceActions } from '../../store/cart-slice';\r\nimport './_cartItem.scss';\r\n\r\nimport { Item } from '../../store/cart-slice.types';\r\n\r\nconst CartItem: React.FC<Item> = ({ _id, title, description, price, img, quantity }) => {\r\n    const dispatch = useAppDispatch();\r\n\r\n    return (\r\n        <div className=\"Item\">\r\n            <img src={img} alt=\"item\" />\r\n            <div className=\"Details\">\r\n                <p className=\"Details__title\">{title}</p>\r\n                <p className=\"Details__description\">{description}</p>\r\n                <p className=\"Details__price\">$ {price}</p>\r\n            </div>\r\n            <div className=\"Actions\">\r\n                <div className=\"Actions__quantity\">\r\n                    <button onClick={() => dispatch(cartSliceActions.addNewCartItem({\r\n                        _id,\r\n                        title,\r\n                        description,\r\n                        price,\r\n                        img,\r\n                        quantity\r\n                    }))} className=\"Actions__quantity__manipulate\">&#8593;</button>\r\n                    <label htmlFor=\"qty\">{quantity}</label>\r\n                    <button onClick={() => dispatch(cartSliceActions.decreaseCartItemQuantity(_id))} className=\"Actions__quantity__manipulate\">&#8595;</button>\r\n                </div>\r\n                <button onClick={() => dispatch(cartSliceActions.deleteCartItem(_id))} className=\"Actions__btn\">\r\n                    &#10060;\r\n                </button>\r\n            </div>\r\n        </div >\r\n    )\r\n};\r\n\r\nexport default CartItem;","import { useAppDispatch, useAppSelector } from '../../../store';\r\n\r\nimport CartItem from '../../../Cards/CartItem/CartItem';\r\nimport { cartSliceActions } from '../../../store/cart-slice';\r\n\r\nimport './_cart.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Cart() {\r\n    const cart = useAppSelector(state => state.cart);\r\n    const dispatch = useAppDispatch();\r\n    \r\n    const isEmpty = cart?.items?.length;\r\n\r\n    return (\r\n        <div className={`Cart ${!isEmpty && 'Cart--empty'}`}>\r\n            {\r\n                cart.items.map((cartItem) => {\r\n                    return <CartItem key={cartItem._id} {...cartItem} />\r\n                })\r\n            }\r\n            <div className=\"Summary\">\r\n                <h4 className=\"Summary__title\">Cart Summary</h4>\r\n                <div className=\"CartDetails\">\r\n                    <span className=\"CartDetails__items\">TOTAL: ({cart.totalQuantity} items)</span>\r\n                    <span className=\"CartDetails__price\">$ {cart.totalPrice}</span>\r\n                </div>\r\n                <Link to=\"/checkout\"\r\n                    className=\"Summary__btn\"\r\n                    onClick={() => dispatch(cartSliceActions.checkout())}\r\n                >\r\n                    Proceed To Checkout\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cart;\r\n","import './_checkout.scss';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Checkout() {\r\n    return (\r\n        <div className=\"Checkout\">\r\n            <h1>Your order was succesfsul!</h1>\r\n            <h2>Thank you for choosing our movie shop!</h2>\r\n            <Link to=\"/\">\r\n                back to home page\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout;","import { FormEvent } from 'react';\r\n\r\nimport { useParams, useHistory } from 'react-router-dom';\r\nimport { useAppSelector } from '../../../../store';\r\n\r\nimport { updateMovieArticle } from '../../../../utils/requests';\r\nimport useForm from '../../../hooks/useForm';\r\nimport { MovieArticle } from '../../Details/DetailsReducer/reducer.types';\r\nimport { DecorateType } from '../Decorate.types';\r\n\r\nimport '../_decorate.scss';\r\n\r\nfunction Edit() {\r\n    const { movieId } = useParams();\r\n    const history = useHistory();\r\n\r\n    const { title, img, price, description }: MovieArticle = history.location.state;\r\n    const [editFormData, onInputChangeHandler] = useForm<DecorateType>({ title, img, price, description });\r\n    \r\n    const authToken = useAppSelector(state => state.auth.userAuthState.accessToken);\r\n\r\n    const onEditMovieArticleSubmitHandler = async (event: FormEvent<HTMLFormElement>): Promise<void> => {\r\n        event.preventDefault();\r\n\r\n        const editDetails = {\r\n            title: editFormData.title,\r\n            description: editFormData.description,\r\n            price: editFormData.price,\r\n            img: editFormData.img\r\n        };\r\n\r\n        await updateMovieArticle(movieId, authToken, editDetails);\r\n        history.push(`/movies/details/${movieId}`);\r\n    }\r\n\r\n    return (\r\n        <section className=\"Create\">\r\n            <div className=\"CreateWrapper\">\r\n                <h2 className=\"FormTitle\">EDIT MOVIE ARTICLE</h2>\r\n                <form className=\"Form\" onSubmit={onEditMovieArticleSubmitHandler}>\r\n                    <input className=\"Form__title\"\r\n                        type=\"text\"\r\n                        name=\"title\"\r\n                        placeholder=\"ENTER MOVIE TITLE\"\r\n                        defaultValue={title}\r\n                        onChange={onInputChangeHandler}\r\n                    />\r\n                    <textarea className=\"Form__description\"\r\n                        name=\"description\"\r\n                        placeholder=\"ENTER MOVIE DESCRIPTION\"\r\n                        defaultValue={description}\r\n                        onChange={onInputChangeHandler}\r\n                    >\r\n                    </textarea>\r\n                    <input className=\"Form__image\"\r\n                        type=\"text\"\r\n                        name=\"img\"\r\n                        placeholder=\"ENTER MOVIE IMAGE URL\"\r\n                        defaultValue={img}\r\n                        onChange={onInputChangeHandler}\r\n                    />\r\n                    <input className=\"Form__price\"\r\n                        type=\"number\"\r\n                        name=\"price\"\r\n                        placeholder=\"ENTER MOVIE PRICE\"\r\n                        defaultValue={price}\r\n                        onChange={onInputChangeHandler}\r\n                    />\r\n                    <button className=\"Form__btn\" type=\"submit\">EDIT</button>\r\n                </form>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Edit;\r\n","import { useState, useEffect, useRef } from \"react\";\r\nimport MovieCard from \"../../../Cards/MovieCard/MovieCard\";\r\n\r\nimport { MovieArticle } from \"../Details/DetailsReducer/reducer.types\";\r\n\r\nimport { getMovieArticles } from '../../../utils/requests';\r\n\r\nimport './_filter.scss';\r\n\r\nfunction Filter() {\r\n    const [searchInput, setSearchInput] = useState<string>(null);\r\n    const [movieSeacrches, setMovieSearches] = useState<MovieArticle[]>([]);\r\n    const searchInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        searchInputRef.current.focus();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        let timer: NodeJS.Timeout;\r\n        const getSearchResults = () => {\r\n            timer = setTimeout(async () => {\r\n                if (searchInputRef.current.value === searchInput) {\r\n                    const movieArticles: typeof movieSeacrches = await getMovieArticles();\r\n                    const inputSearchResults = movieArticles.reduce((acc: MovieArticle[], object: MovieArticle): MovieArticle[] => {\r\n                        let stringResult = '';\r\n                        for (const key in object) {\r\n                            if (key === 'title' || key === 'description') {\r\n                                stringResult += object[key];\r\n                            }\r\n                        }\r\n\r\n                        if (stringResult.toLowerCase().includes(searchInput.toLowerCase())) { acc.push(object) };\r\n\r\n                        return acc;\r\n                    }, []);\r\n\r\n                    setMovieSearches(inputSearchResults);\r\n                }\r\n            }, 500);\r\n        }\r\n\r\n        getSearchResults();\r\n\r\n        return () => {\r\n            clearTimeout(timer);\r\n        };\r\n    }, [searchInput]);\r\n\r\n    return (\r\n        <div className=\"Search\">\r\n            <h2 className=\"Search__title\">Search Your Favourite Movies</h2>\r\n            <div className=\"Filter\">\r\n                <input ref={searchInputRef} value={searchInput} onChange={e => setSearchInput(e.target.value)} type=\"text\" placeholder=\"Search...\" />\r\n                <div className =\"Filter__search\"></div>\r\n            </div>\r\n            <div className=\"Search__results\">\r\n                {\r\n                    !movieSeacrches.length\r\n                        ? <p className=\"Search__notFound\">No currently found results from your search :(</p>\r\n                        : movieSeacrches.map((searchResult) => {\r\n                            return <MovieCard key={searchResult._id} {...searchResult} />\r\n                        })\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter;\r\n","import './App.scss';\n\nimport { useEffect } from 'react';\nimport { setUserState } from './store/auth-slice';\n\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\nimport Header from './components/Header/Header';\nimport Home from './components/Main/Home/Home';\nimport Register from './components/Main/Auth/Register/Register';\nimport Login from './components/Main/Auth/Login/Login';\nimport Create from './components/Main/Decorate/Create/Create';\nimport Details from './components/Main/Details/Details';\nimport Cart from './components/Main/Cart/Cart';\nimport Checkout from './components/Main/Checkout/Checkout';\nimport Edit from './components/Main/Decorate/Edit/Edit';\nimport Filter from './components/Main/Filter/Filter';\n\n\nimport { useAppDispatch, useAppSelector } from './store';\n\nfunction App() {\n    //console.log(\"App component just rendered!\");\n    const dispatch = useAppDispatch();\n    const authState = useAppSelector(state => state.auth); // { isAuthenticated: false, userAuthState: {} }\n\n    useEffect(() => {\n        try {\n            const authStateFromLocalStorage: typeof authState = JSON.parse(window.localStorage.getItem('user'));\n\n\n            dispatch(\n                setUserState({\n                    isAuthenticated: authStateFromLocalStorage.isAuthenticated,\n                    userAuthState: authStateFromLocalStorage.userAuthState\n                }));\n        } catch (error) {\n            console.error(\"Invalid auth state in the local storage!\");\n        }\n\n    }, [dispatch]); // dispatch never gonna be a reason for pre-invoking the callback in useEffect\n\n\n    useEffect(() => {\n        window.localStorage.setItem('user', JSON.stringify(authState));\n    }, [authState]); // every time we change the auth state or cart state it gonna be changed in the localStorage too\n\n    return (\n        <Router>\n            <Header />\n            <Switch>\n                <Route path=\"/\" exact>\n                    <Home />\n                </Route>\n                <Route path=\"/movies-react-app\" exact>\n                    <Home />\n                </Route>\n                <Route path=\"/auth/register\" exact>\n                    <Register />\n                </Route>\n                <Route path=\"/auth/login\" exact>\n                    <Login />\n                </Route>\n                <Route path=\"/movies/create\" exact>\n                    <Create />\n                </Route>\n                <Route path=\"/movies/details/:movieId\" exact>\n                    <Details />\n                </Route>\n                <Route path=\"/movies/edit/:movieId\" exact>\n                    <Edit />\n                </Route>\n                <Route path=\"/filter\" exact>\n                    <Filter />\n                </Route>\n                <Route path=\"/cart\" exact>\n                    <Cart />\n                </Route>\n                <Route path=\"/checkout\" exact>\n                    <Checkout />\n                </Route>\n            </ Switch>\n        </ Router>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport store from './store/index';\nimport { Provider } from 'react-redux';\n\nReactDOM.render(\n    <React.StrictMode >\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}