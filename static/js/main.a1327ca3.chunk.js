(this["webpackJsonpmovie-react-app-updated"]=this["webpackJsonpmovie-react-app-updated"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},16:function(e,t,a){e.exports={loader:"Loader_loader__2y3t2",dot:"Loader_dot__H9eJx",dot1:"Loader_dot1__30nbw",dot2:"Loader_dot2__Fr4J3",dot3:"Loader_dot3__1WDe9",dot4:"Loader_dot4__1X3Rj",reveal:"Loader_reveal__3Dyqj",slide:"Loader_slide__1aB-I"}},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(39),s=a.n(c),i=(a(92),a(93),a(94),a(4)),o=a(2),u=a.n(o),l=a(3),m=a(28),d=function(e,t){return function(){var a=Object(l.a)(u.a.mark((function a(r){var n,c;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("https://cars-react-app-server.herokuapp.com/users/".concat(e.toLowerCase()),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=a.sent,a.next=6,n.json();case 6:if(c=a.sent,!1!==n.ok){a.next=11;break}throw new Error("Failed while authenticating!");case 11:r(j.actions.handleAuthenticate({authToken:c.accessToken,userId:c._id,username:c.username}));case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),alert(a.t0.message);case 17:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}()},j=Object(m.b)({name:"auth-slice",initialState:{isAuthenticated:!1,userAuthState:{}},reducers:{handleAuthenticate:function(e,t){e.userAuthState={authToken:t.payload.authToken,userId:t.payload.userId,username:t.payload.username},e.isAuthenticated=!0},handleLogout:function(e){e.userAuthState={authToken:null,userId:null,username:null},e.isAuthenticated=!1},setUserState:function(e,t){e.isAuthenticated=t.payload.isAuthenticated,e.userAuthState=t.payload.userAuthState}}}),p=j.actions,h=j,_=a(10),b=(a(99),a(0));var O=function(){return Object(b.jsx)("div",{className:"Logo",children:Object(b.jsx)(_.b,{to:"/",children:Object(b.jsx)("img",{className:"Logo__image",src:"https://th.bing.com/th/id/R.5eebdba556754091bfcae7839bd65da6?rik=7mP2jf6zMqYapw&pid=ImgRaw&r=0",alt:"logo"})})})},f=a(5),v=Object(m.b)({name:"cart-slice",initialState:{items:[],totalPrice:0,totalQuantity:0},reducers:{setCartItems:function(e,t){e.items=t.payload.items,e.totalPrice=t.payload.totalPrice,e.totalQuantity=t.payload.totalQuantity},removeCartItems:function(e){e.items=[],e.totalPrice=0,e.totalQuantity=0},addNewCartItem:function(e,t){var a=t.payload,r=e.items.find((function(e){return e._id===a._id}));r?(e.totalPrice+=Number(r.price),r.quantity++):(e.items.push(a),e.totalPrice+=Number(a.price)),e.totalQuantity++},deleteCartItem:function(e,t){var a=e.items.find((function(e){return e._id===t.payload}));e.items=e.items.filter((function(e){return e._id!==t.payload})),e.totalQuantity-=Number(a.quantity),e.totalPrice-=Number(a.price)*Number(a.quantity)},decreaseCartItemQuantity:function(e,t){var a=e.items.find((function(e){return e._id===t.payload}));e.totalPrice-=Number(a.price),a.quantity--,e.totalQuantity--}}}),x=v.actions,N=v;a(102),a(103);var y=function(e){var t=e.isActive,a=e.setIsActive;return Object(b.jsx)("button",{onClick:function(){return a((function(e){return!e}))},className:"hamburger hamburger--spin ".concat(t&&"is-active"),type:"button",children:Object(b.jsx)("span",{className:"hamburger-box",children:Object(b.jsx)("span",{className:"hamburger-inner"})})})};var w=function(){var e=Object(r.useState)(!1),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(i.c)((function(e){return e.auth.isAuthenticated})),s=Object(i.c)((function(e){return e.cart.totalQuantity})),o=Object(i.c)((function(e){return e.cart})),u=Object(i.b)();return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cart"))||{items:[],totalPrice:0,totalQuantity:0};u(x.setCartItems({items:e.items,totalPrice:e.totalPrice,totalQuantity:e.totalQuantity}))}),[u]),Object(r.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(o))}),[o]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("nav",{className:"Nav",children:[Object(b.jsx)("ul",{className:"Nav__list ".concat(a?"Nav__list--active":"Nav__list--unactive"),children:c?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("li",{className:"Nav__list__item",children:[Object(b.jsx)(_.b,{to:"/cart",children:"Cart\ud83d\uded2"}),Object(b.jsx)("span",{className:"Nav__list__item__total",children:s})]}),Object(b.jsx)("li",{className:"Nav__list__item",children:Object(b.jsx)(_.b,{to:"/movies/create",children:"Create Movie Article"})}),Object(b.jsx)("li",{className:"Nav__list__item",children:Object(b.jsx)(_.b,{onClick:function(){console.log("logouted"),u(p.handleLogout())},to:"/",children:"Logout"})}),Object(b.jsx)("li",{className:"Nav__list__item",children:Object(b.jsx)(_.b,{to:"/filter",children:"Search Movies"})})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("li",{className:"Nav__list__item",children:Object(b.jsx)(_.b,{to:"/auth/register",children:"Sign up"})}),Object(b.jsx)("li",{className:"Nav__list__item",children:Object(b.jsx)(_.b,{to:"/auth/login",children:"Log in"})})]})}),Object(b.jsx)(y,{isActive:a,setIsActive:n})]})})};a(104);var C=function(){return Object(b.jsxs)("header",{className:"Header",children:[Object(b.jsx)(O,{}),Object(b.jsx)(w,{})]})},g=a(8),A=a(7);a(105);var I=function(){return Object(b.jsx)("section",{children:Object(b.jsxs)("article",{className:"Home",children:[Object(b.jsx)("img",{className:"Home__image",src:"https://slicksmovieblog.files.wordpress.com/2014/08/cropped-movie-banner-e1408372575210.jpg",alt:"Movie"}),Object(b.jsxs)("h2",{className:"Home__details",children:[Object(b.jsx)("span",{className:"Home__details__title",children:"Movies Forum"}),Object(b.jsx)("span",{className:"Home__details__description",children:"Search for newest movies, post new movies, share opinions and likes anywhere, anytime!"})]})]})})};a(106);function k(e,t){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(u.a.mark((function e(t,a){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,a);case 3:if((r=e.sent).ok){e.next=15;break}return e.t0=Error,e.next=8,r.json();case 8:if(e.t1=e.sent.message,e.t1){e.next=11;break}e.t1="Something went wrong!";case 11:throw e.t2=e.t1,new e.t0(e.t2);case 15:return e.next=17,r.json();case 17:return n=e.sent,e.abrupt("return",n);case 19:e.next=24;break;case 21:e.prev=21,e.t3=e.catch(0),alert(e.t3.message);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}function E(e,t,a){var r={method:e,headers:{}};return t&&(r.headers["X-Authorization"]=t),a&&(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(a)),r}var T="https://cars-react-app-server.herokuapp.com";function L(e){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(T+t,E("GET"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,a){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(u.a.mark((function e(t,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(T+t,E("POST",a,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,a){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(u.a.mark((function e(t,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(T+t,E("PUT",a,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(T+t,E("DELETE",a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=k;function Q(){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/data/movies");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,a){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(u.a.mark((function e(t,a,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/data/movies/".concat(t),a,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/movies/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/data/likes?where=movieId%3D%22".concat(t,"%22&distinct=_ownerId&count"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/data/comments?where=movieId%3D%22".concat(t,"%22&distinct=_ownerId&count"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/data/movies/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(l.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/data/likes?where=movieId%3D%22".concat(t,"%22%20and%20_ownerId%3D%22").concat(a,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(l.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("/data/likes",t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/data/comments?where=movieId%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(l.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M("/data/comments",t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(l.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("/data/comments/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(e){var t=e.title,a=e.img,n=e._id,c=e.price,s=Object(r.useState)(0),i=Object(f.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)(0),m=Object(f.a)(l,2),d=m[0],j=m[1];return Object(r.useEffect)((function(){return function(e){return W.apply(this,arguments)}(n).then(u)}),[n]),Object(r.useEffect)((function(){return function(e){return z.apply(this,arguments)}(n).then(j)}),[n]),Object(b.jsxs)("div",{className:"Card",children:[Object(b.jsxs)("article",{className:"card-header-main",children:[Object(b.jsx)("img",{className:"Card__image",src:a,alt:"Movie Card"}),Object(b.jsx)("h3",{className:"Card__title",children:t})]}),Object(b.jsx)("article",{className:"card-footer",children:Object(b.jsx)(_.b,{to:"/movies/details/".concat(n),className:"Card__button",children:"Details"})}),Object(b.jsxs)("span",{className:"Card__likes",children:[o," Likes \ud83d\udc4d"]}),Object(b.jsxs)("span",{className:"Card__comments",children:[d," Comments \ud83d\udcad"]}),Object(b.jsxs)("span",{className:"Card__price",children:["Price: ",c,"$"]})]})},ce=a(16),se=a.n(ce);var ie=function(){return Object(b.jsxs)("div",{className:se.a.loader,children:[Object(b.jsx)("div",{className:[se.a.dot,se.a.dot1].join(" ")}),Object(b.jsx)("div",{className:[se.a.dot,se.a.dot2].join(" ")}),Object(b.jsx)("div",{className:[se.a.dot,se.a.dot3].join(" ")}),Object(b.jsx)("div",{className:[se.a.dot,se.a.dot4].join(" ")})]})};a(107);var oe=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!0),s=Object(f.a)(c,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){Q().then((function(e){n(e),o(!1)})).catch((function(e){return alert(e.message)}))}),[]),i?Object(b.jsx)(ie,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(I,{}),Object(b.jsx)("section",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{style:{fontSize:40,fontWeight:550,textAlign:"center",marginTop:30},children:"Movie Articles"}),Object(b.jsx)("div",{className:"Wrapper",children:a.map((function(e,t){return Object(b.jsx)(ne,Object(A.a)({},e),t)}))})]})})]})},ue=(a(58),a(87)),le=a(25);var me=function(){var e=Object(i.b)(),t=Object(g.f)(),a=Object(ue.a)({initialValues:{username:"",email:"",password:"",repassword:""},validateOnChange:!1,validationSchema:le.a().shape({email:le.c().email("Invalid email format!").max(25,"Your email must not be longer than 25 charackters!").min(10,"Your email should be at least 10 charackters!").required("This field is required!"),password:le.c().min(6,"Password must be at least 6 charcakters!").max(15,"Password should not be longer than 15 charackters!").matches(/[A-Za-z0-9]+/,"Password should contain uppercase,lowercase charackters and digits!").required("This field is required!"),repassword:le.c().oneOf([le.b("password"),null],"Passwords must match!").required("This field is required!"),username:le.c().matches(/[A-Z][A-Za-z0-9]+/,"Username have to start with uppercase letter and continue with lowercase or digits!").trim().required("Username is required!")}),onSubmit:function(){var a=Object(l.a)(u.a.mark((function a(r){var n,c,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=r.username,c=r.email,s=r.password;try{e(d("REGISTER",{username:n,email:c,password:s})).then(t.push("/"))}catch(i){alert(i.message)}case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}),r=a.handleSubmit,n=a.handleChange,c=a.handleBlur,s=a.errors,o=a.values,m=a.touched;return Object(b.jsx)("section",{className:"Auth",children:Object(b.jsx)("div",{className:"Auth__cont",children:Object(b.jsx)("div",{className:"Auth__cont__main",children:Object(b.jsx)("div",{className:"Auth__cont__main__create",children:Object(b.jsxs)("form",{onSubmit:r,children:[Object(b.jsx)("h2",{className:"Auth__cont__main__create__title",children:"CREATE ACCOUNT"}),m.username&&s.username&&Object(b.jsx)("div",{className:"error",children:s.username}),Object(b.jsx)("input",{className:"Auth__cont__main__create__user",type:"text",placeholder:"\ud83d\udd11  YOUR USERNAME",name:"username",onChange:n,onBlur:c,value:o.username}),m.email&&s.email&&Object(b.jsx)("div",{className:"error",children:s.email}),Object(b.jsx)("input",{className:"Auth__cont__main__create__email",type:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",name:"email",onChange:n,onBlur:c,value:o.email}),m.password&&s.password&&Object(b.jsx)("div",{className:"error",children:s.password}),Object(b.jsx)("input",{className:"Auth__cont__main__create__pass",type:"password",placeholder:"\ud83d\udd12 PASSWORD",name:"password",onChange:n,onBlur:c,value:o.password}),m.repassword&&s.repassword&&Object(b.jsx)("div",{className:"error",children:s.repassword}),Object(b.jsx)("input",{className:"Auth__cont__main__create__pass",type:"password",placeholder:"\ud83d\udd13 CONFIRM PASSWORD",name:"repassword",onChange:n,onBlur:c,value:o.repassword}),Object(b.jsx)("button",{type:"submit",className:"Auth__cont__main__create__btn",children:"Create Account"})]})})})})})};var de=function(e){var t=e.history,a=Object(i.b)(),n={emailField:Object(r.useRef)(""),passwordField:Object(r.useRef)("")},c=function(){var e=Object(l.a)(u.a.mark((function e(r){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),c=n.emailField.current.value,s=n.passwordField.current.value;try{a(d("LOGIN",{email:c,password:s})).then(t.push("/"))}catch(i){alert(i.message)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("section",{className:"Auth",children:Object(b.jsx)("div",{className:"Auth__cont",children:Object(b.jsx)("div",{className:"Auth__cont__main",children:Object(b.jsx)("div",{className:"Auth__cont__main__create",children:Object(b.jsxs)("form",{onSubmit:c,children:[Object(b.jsx)("h2",{className:"Auth__cont__main__create__title",children:"SIGN UP"}),Object(b.jsx)("input",{className:"Auth__cont__main__create__email",type:"email",name:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",ref:n.emailField}),Object(b.jsx)("input",{className:"Auth__cont__main__create__pass",type:"password",name:"password",placeholder:"\ud83d\udd12 PASSWORD",ref:n.passwordField}),Object(b.jsx)("button",{type:"submit",className:"Auth__cont__main__create__btn",children:"LOG IN"})]})})})})})},je=(a(81),a(41));var pe=function(e,t,a){var n=Object(r.useState)(e),c=Object(f.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)(""),m=Object(f.a)(o,2),d=m[0],j=m[1];return[s,function(e){i(Object(A.a)(Object(A.a)({},s),{},Object(je.a)({},e.target.name,e.target.value)))},function(){var e=Object(l.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.prev=1,e.next=4,V(t,{method:a.method,headers:a.headers,body:JSON.stringify(Object(A.a)({},s))});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(1),j(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),function(){i(Object.fromEntries(Object.entries(s).map((function(e){var t=Object(f.a)(e,2),a=t[0];t[1];return[a,""]}))))},d,j]};var he=function(e){var t=e.history,a=Object(i.c)((function(e){return e.auth.userAuthState.authToken})),r=pe({title:"",description:"",img:"",price:0},"https://cars-react-app-server.herokuapp.com/data/movies",{method:"POST",headers:{"Content-Type":"application/json","X-Authorization":a}}),n=Object(f.a)(r,3),c=n[0],s=n[1],o=n[2];return Object(b.jsx)("section",{className:"Create",children:Object(b.jsxs)("div",{className:"Create__wrapper",children:[Object(b.jsx)("h2",{className:"Create__wrapper__formTitle",children:"CREATE MOVIE ARTICLE"}),Object(b.jsxs)("form",{className:"Create__wrapper_form",onSubmit:function(e){return o(e).then(t.push("/"))},children:[Object(b.jsx)("input",{className:"Create__wrapper__form__title",type:"text",name:"title",placeholder:"ENTER MOVIE TITLE",onChange:s,value:c.movieTitle}),Object(b.jsx)("textarea",{className:"Create__wrapper__form__description",type:"text",name:"description",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",onChange:s,value:c.movieDescription}),Object(b.jsx)("input",{className:"Create__wrapper__form__image",type:"text",name:"img",placeholder:"ENTER MOVIE IMAGE URL",onChange:s,value:c.img}),Object(b.jsx)("input",{className:"Create__wrapper__form__price",type:"number",name:"price",placeholder:"ENTER MOVIE PRICE",onChange:s,value:c.price}),Object(b.jsx)("button",{className:"Create__wrapper__form__btn",type:"submit",children:"CREATE"})]})]})})};a(206),a(207);var _e=function(e){var t=e.content,a=e.author,r=e.deleteCurrentComment;return Object(b.jsx)("div",{className:"CommentUser",children:Object(b.jsxs)("p",{className:"CommentUser__content",children:["\ud83d\udcad ",t,r&&Object(b.jsx)("button",{onClick:function(){return r()},className:"CommentUser__delete",children:"\u2716"}),Object(b.jsxs)("i",{className:"CommentUser__name",children:["- ",a]})]})})},be="get-movie-article",Oe="load-movie-article-comments",fe="get-movie-article-likes-from-user",ve="modify-movie-article-comment",xe="like-movie-article",Ne={movieArticle:{},movieArticleComments:[],movieArticleLikesFromUser:[],areCommentsLoading:!0,isFormSubmited:!1,isLiked:!1,isMovieLoading:!0};function ye(e,t){var a=t.type,r=t.payload;switch(a){case be:return Object(A.a)(Object(A.a)({},e),{},{movieArticle:{_ownerId:r._ownerId,title:r.title,description:r.description,img:r.img,_id:r._id,price:r.price},isMovieLoading:!1});case Oe:return Object(A.a)(Object(A.a)({},e),{},{areCommentsLoading:!1,isFormSubmited:!e.isFormSubmited,movieArticleComments:r});case fe:return Object(A.a)(Object(A.a)({},e),{},{isLiked:!e.isLiked,movieArticleLikesFromUser:r});case ve:return Object(A.a)(Object(A.a)({},e),{},{isFormSubmited:!e.isFormSubmited});case xe:return Object(A.a)(Object(A.a)({},e),{},{isLiked:!e.isLiked});default:return e}}a(208);var we=function(){var e=Object(r.useRef)(""),t=Object(i.c)((function(e){return e.auth})),a=Object(r.useContext)(ke),n=a.movieArticle,c=a.dispatch,s=function(){var a=Object(l.a)(u.a.mark((function a(r){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.next=3,te(t.userAuthState.authToken,{author:t.userAuthState.username,content:e.current.value,movieId:n._id});case 3:r.target.reset(),c({type:ve});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return t.userAuthState.userId!==n._ownerId&&t.isAuthenticated&&Object(b.jsxs)("form",{onSubmit:s,className:"CommentForm",children:[Object(b.jsx)("textarea",{className:"CommentForm__input",name:"content",rows:"4",cols:"50",placeholder:"Enter your expression from this movie",ref:e}),Object(b.jsx)("button",{className:"CommentForm__submit",type:"submit",children:"Post comment"})]})};a(209);var Ce=function(){var e=Object(r.useContext)(ke),t=e.movieArticle,a=e.isFormSubmited,n=e.areCommentsLoading,c=e.movieArticleComments,s=e.dispatch,o=Object(i.c)((function(e){return e.auth}));return Object(r.useEffect)((function(){(function(e){return ee.apply(this,arguments)})(t._id).then((function(e){return s({type:Oe,payload:e})}))}),[t._id,a,s]),Object(b.jsxs)("div",{className:"Comments",children:[Object(b.jsx)("h2",{className:"Comments__title",children:"Leave your comments here: \ud83d\udcac"}),n?Object(b.jsx)(ie,{}):c.map((function(e,t){return Object(b.jsx)(_e,{content:e.content,author:e.author,deleteCurrentComment:o.userAuthState.userId===e._ownerId?function(){return function(e,t){return re.apply(this,arguments)}(e._id,o.userAuthState.authToken).then(s({type:ve}))}:null},t)})),Object(b.jsx)(we,{})]})};a(210),a(211);var ge=function(e){var t=e.authToken,a=e.movieId,r=Object(g.f)();return Object(b.jsxs)("div",{className:"Owner",children:[Object(b.jsx)("button",{onClick:Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(a,t);case 2:r.push("/");case 3:case"end":return e.stop()}}),e)}))),className:"Owner__delete Owner__btn",children:"\u274c Delete"}),Object(b.jsx)(_.b,{to:"/movies/edit/".concat(a),className:"Owner__edit Owner__btn",children:"\u270d Edit"})]})};a(212);var Ae=function(e){var t=e.currentAuthState,a=Object(r.useContext)(ke),n=a.dispatch,c=a.movieArticle,s=a.isLiked,o=a.movieArticleLikesFromUser,u=Object(i.b)();return Object(r.useEffect)((function(){(function(e,t){return $.apply(this,arguments)})(c._id,t.userAuthState.userId).then((function(e){return n({type:fe,payload:e})}))}),[c._id,t.userAuthState.userId,s,n]),Object(b.jsxs)("div",{className:"User",children:[!o.length&&Object(b.jsx)(r.Fragment,{children:Object(b.jsx)("button",{onClick:function(){(function(e,t){return K.apply(this,arguments)})(t.userAuthState.authToken,{movieId:c._id}).then(n({type:xe}))},className:"User__like User__btn",children:"Like \ud83d\udc4d"})}),Object(b.jsx)("button",{onClick:function(){return u(x.addNewCartItem({_id:c._id,title:c.title,description:c.description,img:c.img,price:c.price,quantity:1}))},className:"User__add",children:"Add"})]})};var Ie=function(){var e=Object(r.useContext)(ke).movieArticle,t=Object(i.c)((function(e){return e.auth})),a=t.userAuthState.authToken;return Object(b.jsx)("div",{className:"ButtonsWrapper",children:t.isAuthenticated?t.userAuthState.userId!==e._ownerId?Object(b.jsx)(r.Fragment,{children:Object(b.jsx)(Ae,{currentAuthState:t})}):Object(b.jsx)(r.Fragment,{children:Object(b.jsx)(ge,{authToken:a,movieId:e._id})}):null})},ke=Object(r.createContext)("NO CURRENTLY PROVIDED DATA");var Se=function(){var e=Object(g.g)().movieId,t=Object(r.useReducer)(ye,Ne),a=Object(f.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){X(e).then((function(e){return c({type:be,payload:{_ownerId:e._ownerId,title:e.title,description:e.description,img:e.img,_id:e._id,price:e.price}})}))}),[e]),Object(b.jsx)(r.Fragment,{children:n.isMovieLoading?Object(b.jsx)(ie,{}):Object(b.jsx)("section",{children:Object(b.jsxs)("div",{className:"Container",children:[Object(b.jsxs)("h1",{className:"Container__title",children:["Movie title: ",n.movieArticle.title]}),Object(b.jsx)("img",{className:"Container__image",src:n.movieArticle.img,alt:"movie"}),Object(b.jsxs)("div",{className:"Container__details",children:[Object(b.jsx)("h3",{className:"Container__details__description",children:"Movie Description"}),Object(b.jsx)("p",{className:"Container__details__p",children:n.movieArticle.description}),Object(b.jsxs)(ke.Provider,{value:Object(A.a)(Object(A.a)({},n),{},{dispatch:c}),children:[Object(b.jsx)(Ie,{}),Object(b.jsx)(Ce,{})]})]})]})})})};var Ee=function(){var e=Object(r.useState)({}),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(g.g)().movieId,s=Object(g.f)(),o=Object(i.c)((function(e){return e.auth.userAuthState.authToken}));Object(r.useEffect)((function(){return X(c).then(n)}),[c]);var m=function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,n,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target,r=a.title,n=a.description,i=a.img,l=a.price,e.next=4,J(c,o,{title:r.value,description:n.value,img:i.value,price:Number(l.value)});case 4:s.push("/movies/details/".concat(c));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("section",{className:"Create",children:Object(b.jsxs)("div",{className:"Create__wrapper",children:[Object(b.jsx)("h2",{className:"Create__wrapper_formTitle",children:"EDIT MOVIE ARTICLE"}),Object(b.jsxs)("form",{className:"Create__wrapper__form",onSubmit:m,children:[Object(b.jsx)("input",{className:"Create__wrapper__form__title",type:"text",name:"title",placeholder:"ENTER MOVIE TITLE",defaultValue:a.title}),Object(b.jsx)("textarea",{className:"Create__wrapper__form__description",type:"text",name:"description",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",defaultValue:a.description}),Object(b.jsx)("input",{className:"Create__wrapper__form__image",type:"text",name:"img",placeholder:"ENTER MOVIE IMAGE URL",defaultValue:a.img}),Object(b.jsx)("input",{className:"Create__wrapper__form__price",type:"number",name:"price",placeholder:"ENTER MOVIE PRICE",defaultValue:a.price}),Object(b.jsx)("button",{className:"Create__wrapper__form__btn",type:"submit",children:"EDIT"})]})]})})};a(213);var Te=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!0),s=Object(f.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(""),l=Object(f.a)(u,2),m=l[0],d=l[1];return Object(r.useEffect)((function(){Q().then((function(e){var t=e.reduce((function(e,t){var a="";for(var r in t)"title"!==r&&"description"!==r||(a+=t[r]);return a.toLowerCase().includes(m.toLowerCase())&&e.push(t),e}),[]);n(t)})).catch((function(e){return console.error(e)})).finally(o(!1))}),[m]),Object(b.jsxs)("div",{className:"Main",children:[Object(b.jsxs)("form",{className:"form-group Main__hasSearch",children:[Object(b.jsx)("h3",{className:"Main__hasSearch__field",children:"Search Your Favourite Movie"}),Object(b.jsx)("span",{className:"Main__hasSearch__feedback"}),Object(b.jsx)("input",{type:"text",className:"Main__hasSearch__formControl",placeholder:"Search",value:m,onChange:function(e){return d(e.target.value)}})]}),Object(b.jsx)("div",{className:"Main__flex",children:i?Object(b.jsx)(ie,{}):a.length?a.map((function(e,t){return Object(b.jsx)(ne,Object(A.a)({},e),t)})):Object(b.jsx)("p",{className:"Main__flex__notFound",children:"No currently found results from your search :("})})]})};a(214);var Le=function(e){var t=e.title,a=e.description,r=e.img,n=e.quantity,c=e.price,s=e._id,o=Object(i.b)();return Object(b.jsxs)("div",{className:"Item",children:[Object(b.jsx)("img",{className:"Item__image",src:r,alt:"item"}),Object(b.jsxs)("div",{className:"Item__details",children:[Object(b.jsx)("p",{className:"Item__details__title",children:t}),Object(b.jsx)("p",{className:"Item__details__description",children:a}),Object(b.jsxs)("p",{className:"Item__details__price",children:["$ ",c]})]}),Object(b.jsxs)("div",{className:"Item__actions",children:[Object(b.jsxs)("div",{className:"Item__actions__quantity",children:[Object(b.jsx)("button",{onClick:function(){return o(x.addNewCartItem({_id:s,title:t,description:a,price:c,img:r,quantity:n}))},className:"Item__actions__quantity__manipulate",children:"\u2191"}),Object(b.jsx)("label",{htmlFor:"qty",children:n}),Object(b.jsx)("button",{onClick:function(){return o(x.decreaseCartItemQuantity(s))},className:"Item__actions__quantity__manipulate",children:"\u2193"})]}),Object(b.jsx)("button",{onClick:function(){return o(x.deleteCartItem(s))},className:"Item__actions__btn",children:"\u274c"})]})]})};a(215),a(216);var Re=function(e){var t=e.message,a=e.closeModalClickHandler,r=e.cancelActionHandler;return Object(b.jsx)("div",{className:"Overlay",children:Object(b.jsxs)("div",{className:"Overlay__modal",children:[Object(b.jsx)("p",{className:"Overlay__modal__message",children:t}),Object(b.jsx)("button",{onClick:a,className:"Overlay__modal__action",children:"Okay"}),r?Object(b.jsx)("button",{onClick:r,className:"Overlay__modal__action",children:"Cancel"}):null]})})};var Me=function(e){var t=e.history,a=Object(r.useState)(null),n=Object(f.a)(a,2),c=n[0],s=n[1],o=Object(i.c)((function(e){return e.cart.items})),u=Object(i.c)((function(e){return e.cart.totalQuantity})),l=Object(i.c)((function(e){return e.cart.totalPrice})),m=Object(i.b)();return c?Object(b.jsx)(Re,{message:c,closeModalClickHandler:function(){m(x.removeCartItems()),t.push("/")}}):Object(b.jsxs)("div",{className:"Cart",children:[o.map((function(e,t){return Object(b.jsx)(Le,Object(A.a)({},e),t)})),Object(b.jsxs)("div",{className:"Cart__summary",children:[Object(b.jsx)("h4",{className:"Cart__summary__title",children:"Cart Summary"}),Object(b.jsxs)("div",{className:"Cart__summary__details",children:[Object(b.jsxs)("span",{className:"Cart__summary__details__items",children:["TOTAL: (",u," items)"]}),Object(b.jsxs)("span",{className:"Cart__summary__details__price",children:["$ ",l]})]}),Object(b.jsx)("button",{onClick:function(){return s("YOUR ORDER HAS BEEN ACCEPTED!")},className:"Cart__summary__btn",children:"Proceed To Checkout"})]})]})};var Fe=function(){return Object(b.jsxs)(g.c,{children:[Object(b.jsx)(g.a,{path:"/",exact:!0,component:oe}),Object(b.jsx)(g.a,{path:"/auth/register",exact:!0,component:me}),Object(b.jsx)(g.a,{path:"/auth/login",exact:!0,component:de}),Object(b.jsx)(g.a,{path:"/movies/create",exact:!0,component:he}),Object(b.jsx)(g.a,{path:"/movies/details/:movieId",exact:!0,component:Se}),Object(b.jsx)(g.a,{path:"/movies/edit/:movieId",exact:!0,component:Ee}),Object(b.jsx)(g.a,{path:"/filter",exact:!0,component:Te}),Object(b.jsx)(g.a,{path:"/cart",exact:!0,component:Me})]})};var Pe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth}));return Object(r.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"))||{userAuthState:{authToken:null,userId:null,username:null},isAuthenticated:!1};e(p.setUserState({isAuthenticated:t.isAuthenticated,userAuthState:t.userAuthState}))}),[e]),Object(r.useEffect)((function(){localStorage.setItem("user",JSON.stringify(t))}),[t]),Object(b.jsxs)(_.a,{children:[Object(b.jsx)(C,{}),Object(b.jsx)(Fe,{})]})},De=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,218)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))},Ue=Object(m.a)({reducer:{auth:h.reducer,cart:N.reducer}});s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(i.a,{store:Ue,children:Object(b.jsx)(Pe,{})})}),document.getElementById("root")),De()},58:function(e,t,a){},81:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){},99:function(e,t,a){}},[[217,1,2]]]);
//# sourceMappingURL=main.a1327ca3.chunk.js.map