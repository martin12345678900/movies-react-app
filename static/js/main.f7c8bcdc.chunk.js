(this["webpackJsonpmovie-react-app"]=this["webpackJsonpmovie-react-app"]||[]).push([[0],{10:function(e,t,a){e.exports={createPage:"Decorate_createPage__3Wn0Q",createFormWrapper:"Decorate_createFormWrapper__2FwBu",createFormTitle:"Decorate_createFormTitle__1yns7",movieTitle:"Decorate_movieTitle__3I_Y7",movieDescription:"Decorate_movieDescription__3j-t1",movieImageURL:"Decorate_movieImageURL__2UDhI",createMovieBtn:"Decorate_createMovieBtn__2OGDp"}},100:function(e,t,a){},101:function(e,t,a){},13:function(e,t,a){e.exports={navListItem:"Navigation_navListItem__2qYtC",navListLink:"Navigation_navListLink__V8qGO",navListWrapper:"Navigation_navListWrapper__4BGZB",searchFormWrapper:"Navigation_searchFormWrapper__1D6k6",searchInput:"Navigation_searchInput__3njbn",searchBtn:"Navigation_searchBtn__20J2k"}},19:function(e,t,a){e.exports={loader:"Loader_loader__2y3t2",dot:"Loader_dot__H9eJx",dot1:"Loader_dot1__30nbw",dot2:"Loader_dot2__Fr4J3",dot3:"Loader_dot3__1WDe9",dot4:"Loader_dot4__1X3Rj",reveal:"Loader_reveal__3Dyqj",slide:"Loader_slide__1aB-I"}},206:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(88),c=a.n(s),i=(a(100),a(8)),o=(a(101),a(4)),u=a(11),l=a(61),m=a.n(l),d=a(0);var p=function(){return Object(d.jsx)("div",{className:m.a.logo,children:Object(d.jsx)(u.b,{className:m.a.navListLink,to:"/",children:Object(d.jsx)("img",{src:"https://th.bing.com/th/id/R.5eebdba556754091bfcae7839bd65da6?rik=7mP2jf6zMqYapw&pid=ImgRaw&r=0",alt:"logo"})})})},h=a(2),v=a.n(h),j=a(3),b=a(13),O=a.n(b);function x(e,t){return f.apply(this,arguments)}function f(){return(f=Object(j.a)(v.a.mark((function e(t,a){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,a);case 3:if(!1!==(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:throw r=e.sent,new Error(r.message);case 11:return e.prev=11,e.next=14,n.json();case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(11),e.abrupt("return",n);case 20:e.next=26;break;case 22:throw e.prev=22,e.t1=e.catch(0),alert(e.t1.message),e.t1;case 26:case"end":return e.stop()}}),e,null,[[0,22],[11,17]])})))).apply(this,arguments)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n={method:e,headers:{}};return t&&(n.headers["X-Authorization"]=t),a&&(n.headers["Content-Type"]="application/json",n.body=JSON.stringify(a)),n}var g="https://cars-react-app-server.herokuapp.com";function I(e){return w.apply(this,arguments)}function w(){return(w=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("get"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t,a){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(v.a.mark((function e(t,a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("post",a,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,a){return D.apply(this,arguments)}function D(){return(D=Object(j.a)(v.a.mark((function e(t,a,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("put",a,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(g+t,_("delete",a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return L.apply(this,arguments)}function L(){return(L=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/movies");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return A.apply(this,arguments)}function A(){return(A=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/movies/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,a,n){return B.apply(this,arguments)}function B(){return(B=Object(j.a)(v.a.mark((function e(t,a,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/data/movies",r,{title:t,description:a,img:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,a,n,r){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(v.a.mark((function e(t,a,n,r,s){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("/data/movies/".concat(r),s,{title:t,description:a,img:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/data/movies/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/data/likes",a,{movieId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return(H=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/likes?where=movieId%3D%22".concat(t,"%22&distinct=_ownerId&count"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/likes?where=movieId%3D%22".concat(t,"%22%20and%20_ownerId%3D%22").concat(a,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return J.apply(this,arguments)}function J(){return(J=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/movies?where=title%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return K.apply(this,arguments)}function K(){return(K=Object(j.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("/data/comments?where=movieId%3D%22".concat(t,"%22"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,a,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(j.a)(v.a.mark((function e(t,a,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("/data/comments",r,{author:t,content:a,movieId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(j.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/data/comments/"+t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=r.a.createContext("No Provider :("),ae=a(31),ne=a.n(ae);var re=function(e){var t=e.message,a=e.closeModalClickHandler,n=e.cancelActionHandler;return Object(d.jsx)("div",{className:ne.a.overlay,children:Object(d.jsxs)("div",{className:ne.a.modal,children:[Object(d.jsx)("p",{className:ne.a.message,children:t}),Object(d.jsx)("button",{onClick:a,className:ne.a.action,children:"Okay"}),n?Object(d.jsx)("button",{onClick:n,className:ne.a.action,children:"Cancel"}):null]})})},se=a(95);var ce=function(e,t,a,n){var r=Object(se.a)({initialValues:e,validateOnChange:a,validationSchema:t,onSubmit:n});return{handleSubmit:r.handleSubmit,handleChange:r.handleChange,handleBlur:r.handleBlur,touched:r.touched,errors:r.errors,values:r.values}};var ie=function(e){var t=e.history,a=e.location,r=Object(n.useState)(null),s=Object(i.a)(r,2),c=s[0],o=s[1],l=Object(n.useContext)(te),m=l.currentUserData,p=l.setCurrentUserData,h=ce({searchMovie:""},void 0,!1,function(){var e=Object(j.a)(v.a.mark((function e(a,n){var r,s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.searchMovie,s=n.resetForm,e.next=4,G(r);case 4:void 0===(c=e.sent)[0]?o("Sorry, there are no search results :("):t.push("/movies/details/".concat(c[0]._id)),s();case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),b=h.handleSubmit,x=h.handleChange,f=h.values;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("nav",{children:Object(d.jsxs)("ul",{className:O.a.navListWrapper,children:[m.authorizationToken&&m.userId?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:O.a.navListItem,children:Object(d.jsx)(u.b,{className:O.a.navListLink,to:"/movies/create",children:"Create Movie Article"})}),Object(d.jsx)("li",{className:O.a.navListItem,children:Object(d.jsx)(u.b,{onClick:Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cars-react-app-server.herokuapp.com/users/logout");case 2:p({authToken:null,userId:null,username:null});case 3:case"end":return e.stop()}}),e)}))),to:"/",className:O.a.navListLink,children:"Logout \u270b"})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:O.a.navListItem,children:Object(d.jsx)(u.b,{className:O.a.navListLink,to:"/auth/register",children:"Sign up \u270d"})}),Object(d.jsx)("li",{className:O.a.navListItem,children:Object(d.jsx)(u.b,{className:O.a.navListLink,to:"/auth/login",children:"Log in \ud83d\udd11"})})]}),Object(d.jsx)("li",{className:[O.a.navListItem,O.a.searchFormWrapper].join(" "),children:Object(d.jsxs)("form",{onSubmit:b,children:[Object(d.jsx)("input",{className:O.a.searchInput,type:"text",name:"searchMovie",placeholder:"SEARCH MOVIE...",onChange:x,value:f.searchMovie}),Object(d.jsx)("button",{className:O.a.searchBtn,type:"submit",children:"\ud83d\udd0d"})]})})]})}),c&&Object(d.jsx)(re,{message:c,closeModalClickHandler:function(){o(null),t.push(a.pathname)}})]})},oe=a(91),ue=a.n(oe);var le=function(){return Object(d.jsxs)("header",{className:ue.a.header,children:[Object(d.jsx)(p,{}),Object(d.jsx)(o.a,{component:ie})]})},me=a(9),de=a(39),pe=a.n(de);var he=function(){return Object(d.jsx)("section",{children:Object(d.jsxs)("article",{className:pe.a.homePage,children:[Object(d.jsx)("img",{className:pe.a.moviesBackgroundImage,src:"https://slicksmovieblog.files.wordpress.com/2014/08/cropped-movie-banner-e1408372575210.jpg",alt:"Movie"}),Object(d.jsx)("h2",{className:pe.a.moviesForumTitle,children:"Movies Forum"}),Object(d.jsx)("p",{className:pe.a.moviesForumDescription,children:"Search for newest movies, post new movies, share opinions and likes anywhere, anytime!"})]})})},ve=a(32),je=a.n(ve),be=a(15);var Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,s=Object(n.useState)(e),c=Object(i.a)(s,2),o=c[0],u=c[1],l=Object(n.useState)(!1),m=Object(i.a)(l,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(void 0,Object(be.a)(a));case 2:n=e.sent,u(n),p(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,t]),r?[o,d]:o};var xe=function(e){var t=e.title,a=e.img,n=e._id,r=Oe(0,z,[n],!1);return Object(d.jsxs)("div",{className:je.a.movieCard,children:[Object(d.jsxs)("article",{className:"card-header-main",children:[Object(d.jsx)("img",{className:je.a.movieCardImage,src:a,alt:"Movie Card"}),Object(d.jsx)("h3",{className:je.a.movieCardTitle,children:t})]}),Object(d.jsx)("article",{className:"card-footer",children:Object(d.jsx)(u.b,{to:"/movies/details/".concat(n),className:je.a.movieCardButton,children:"Details"})}),Object(d.jsxs)("span",{className:je.a.movieLikes,children:[r," Likes \ud83d\udc4d"]})]})},fe=a(19),_e=a.n(fe);var ge=function(){return Object(d.jsxs)("div",{className:_e.a.loader,children:[Object(d.jsx)("div",{className:[_e.a.dot,_e.a.dot1].join(" ")}),Object(d.jsx)("div",{className:[_e.a.dot,_e.a.dot2].join(" ")}),Object(d.jsx)("div",{className:[_e.a.dot,_e.a.dot3].join(" ")}),Object(d.jsx)("div",{className:[_e.a.dot,_e.a.dot4].join(" ")})]})};var Ie=function(){var e=Oe([],T,[],!0),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(he,{}),Object(d.jsx)("section",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{style:{fontSize:40,fontWeight:550,textAlign:"center",marginTop:40},children:"Movie Articles"}),Object(d.jsx)("div",{className:"card-wrapper",children:n?a.map((function(e,t){return Object(d.jsx)(xe,Object(me.a)({},e),t)})):Object(d.jsx)(ge,{})})]})})]})},we=a(6),Ce=a.n(we),Ne=a(12);var ye=function(e){var t=e.history,a=Object(n.useContext)(te).setCurrentUserData,r=Ne.a().shape({email:Ne.c().email("Invalid email format!").max(25,"Your email must not be longer than 25 charackters!").min(10,"Your email should be at least 10 charackters!").required("This field is required!"),password:Ne.c().min(6,"Password must be at least 6 charcakters!").max(15,"Password should not be longer than 15 charackters!").matches(/[A-Za-z0-9]+/,"Password should contain uppercase,lowercase charackters and digits!").required("This field is required!"),repassword:Ne.c().oneOf([Ne.b("password"),null],"Passwords must match!").required("This field is required!"),username:Ne.c().matches(/[A-Z][A-Za-z0-9]+/,"Username have to start with uppercase letter and continue with lowercase or digits!").trim().required("Username is required!")}),s=ce({email:"",password:"",username:""},r,!1,function(){var e=Object(j.a)(v.a.mark((function e(n){var r,s,c,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,s=n.password,c=n.username,e.next=3,fetch("https://cars-react-app-server.herokuapp.com/users/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s,username:c})});case 3:return i=e.sent,e.next=6,i.json();case 6:o=e.sent,a({authorizationToken:o.accessToken,userId:o._id,username:o.username}),t.push("/");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=s.handleSubmit,i=s.handleChange,o=s.handleBlur,u=s.touched,l=s.errors,m=s.values;return Object(d.jsx)("section",{className:Ce.a.authView,children:Object(d.jsx)("div",{className:Ce.a.cont,children:Object(d.jsx)("div",{className:Ce.a.mainBox,children:Object(d.jsx)("div",{className:Ce.a.create,children:Object(d.jsxs)("form",{onSubmit:c,children:[Object(d.jsx)("h2",{className:Ce.a.authTitle,children:"CREATE ACCOUNT"}),u.username&&l.username&&Object(d.jsx)("div",{className:"error",children:l.username}),Object(d.jsx)("input",{className:Ce.a.user,type:"text",placeholder:"\ud83d\udd11  YOUR USERNAME",name:"username",onChange:i,onBlur:o,value:m.username}),u.email&&l.email&&Object(d.jsx)("div",{className:"error",children:l.email}),Object(d.jsx)("input",{className:Ce.a.email,type:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",name:"email",onChange:i,onBlur:o,value:m.email}),u.password&&l.password&&Object(d.jsx)("div",{className:"error",children:l.password}),Object(d.jsx)("input",{className:Ce.a.pass,type:"password",placeholder:"\ud83d\udd12 PASSWORD",name:"password",onChange:i,onBlur:o,value:m.password}),u.repassword&&l.repassword&&Object(d.jsx)("div",{className:"error",children:l.repassword}),Object(d.jsx)("input",{className:Ce.a.pass,type:"password",placeholder:"\ud83d\udd13 CONFIRM PASSWORD",name:"repassword",onChange:i,onBlur:o,value:m.repassword}),Object(d.jsx)("button",{type:"submit",className:Ce.a.auth,children:"Create Account"})]})})})})})};var De=function(e){var t=e.history,a=Object(n.useContext)(te).setCurrentUserData,r=Object(n.useState)(""),s=Object(i.a)(r,2),c=s[0],o=s[1],u=ce({email:"",password:""},void 0,!1,function(){var e=Object(j.a)(v.a.mark((function e(n,r){var s,c,i,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.email,c=n.password,r.resetForm,e.next=4,fetch("https://cars-react-app-server.herokuapp.com/users/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:c})});case 4:return i=e.sent,e.next=7,i.json();case 7:u=e.sent,!1===i.ok?o("There occured an error while trying to login: ".concat(u.message)):(a({authorizationToken:u.accessToken,userId:u._id,username:u.username}),t.push("/"));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),l=u.handleSubmit,m=u.handleChange,p=u.values;return Object(d.jsxs)("section",{className:Ce.a.authView,children:[Object(d.jsx)("div",{className:Ce.a.cont,children:Object(d.jsx)("div",{className:Ce.a.mainBox,children:Object(d.jsx)("div",{className:Ce.a.create,children:Object(d.jsxs)("form",{onSubmit:l,children:[Object(d.jsx)("h2",{className:Ce.a.authTitle,children:"SIGN UP"}),Object(d.jsx)("input",{className:Ce.a.email,type:"email",name:"email",placeholder:"\ud83d\udce7 YOUR EMAIL",onChange:m,value:p.email}),Object(d.jsx)("input",{className:Ce.a.pass,type:"password",name:"password",placeholder:"\ud83d\udd12 PASSWORD",onChange:m,value:p.passsword}),Object(d.jsx)("button",{type:"submit",className:Ce.a.auth,children:"LOG IN"})]})})})}),c&&Object(d.jsx)(re,{message:c,closeModalClickHandler:function(){return o("")}})]})},ke=a(10),Ee=a.n(ke);var Te=function(e){var t=e.history,a=Object(n.useContext)(te).currentUserData,r=Ne.a().shape({movieTitle:Ne.c().matches(/[A-Z][a-z0-9]+/,"Title should start with uppercase and continue with lowercase and numbers").min(6,"Movie title should be at least 6 symbols!").max(50,"Movie title should not be longer than 50 symbols!").required("This field is required!"),movieDescription:Ne.c().max(100,"Movie description should not be longer than 100 symbols!")}),s=ce({movieTitle:"",movieDescription:"",movieImage:""},r,!1,function(){var e=Object(j.a)(v.a.mark((function e(n){var r,s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.movieTitle,s=n.movieDescription,c=n.movieImage,e.next=3,S(r,s,c,a.authorizationToken);case 3:t.push("/");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=s.handleSubmit,i=s.handleChange,o=s.handleBlur,u=s.errors,l=s.values,m=s.touched;return Object(d.jsx)("section",{className:Ee.a.createPage,children:Object(d.jsxs)("div",{className:Ee.a.createFormWrapper,children:[Object(d.jsx)("h2",{className:Ee.a.createFormTitle,children:"CREATE MOVIE ARTICLE"}),Object(d.jsxs)("form",{onSubmit:c,children:[m.movieTitle&&u.movieTitle&&Object(d.jsx)("div",{className:"error",children:u.movieTitle}),Object(d.jsx)("input",{className:Ee.a.movieTitle,type:"text",name:"movieTitle",placeholder:"ENTER MOVIE TITLE",onChange:i,onBlur:o,value:l.movieTitle}),m.movieDescription&&u.movieDescription&&Object(d.jsx)("div",{className:"error",children:u.movieDescription}),Object(d.jsx)("textarea",{className:Ee.a.movieDescription,type:"text",name:"movieDescription",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",onChange:i,onBlur:o,value:l.movieDescription}),m.movieImage&&u.movieImage&&Object(d.jsx)("div",{className:"error",children:u.movieImage}),Object(d.jsx)("input",{className:Ee.a.movieImageURL,type:"text",name:"movieImage",placeholder:"ENTER MOVIE IMAGE URL",onChange:i,onBlur:o,value:l.movieImage}),Object(d.jsx)("button",{className:Ee.a.createMovieBtn,type:"submit",children:"CREATE"})]})]})})},Le=a(29),Me=a.n(Le),Ae=a(40),Se=a.n(Ae),Be=a(41),Fe=a.n(Be);var Re=function(e){var t=e.content,a=e.author,n=e.deleteCurrentComment;return Object(d.jsx)("div",{className:Fe.a.commentUser,children:Object(d.jsxs)("p",{className:Fe.a.commentUserContent,children:["\ud83d\udcad ",t,n&&Object(d.jsx)("button",{onClick:n,className:Fe.a.deleteComment,children:"\u2716"}),Object(d.jsxs)("i",{className:Fe.a.commentUserName,children:["- ",a]})]})})};var Ue=function(e){var t=e.movieId,a=e.ownerId,r=e.dispatch,s=e.state,c=Object(n.useContext)(te).currentUserData;Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,Z(t);case 3:e.t1=e.sent,e.t2={type:"LOAD-MOVIE-ARTICLES",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,s.isFormSubmited,r]);var i=Ne.a().shape({content:Ne.c().max(100,"Your comment should not be longer than 100 charackters!").min(1,"Your comment should be at lest 1 charackter long!").trim()}),o=ce({content:""},i,!0,function(){var e=Object(j.a)(v.a.mark((function e(a,n){var s,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.content,i=n.resetForm,e.next=4,X(c.username,s,t,c.authorizationToken);case 4:r({type:"MODIFY-MOVIE-ARTICLE-COMMENT"}),i();case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),u=o.handleSubmit,l=o.handleChange,m=o.values,p=o.errors,h=o.touched;return Object(d.jsxs)("div",{className:Se.a.comments,children:[Object(d.jsx)("h2",{className:Se.a.commentTitle,children:"Leave your comments here: \ud83d\udcac"}),s.areCommentsLoading?Object(d.jsx)(ge,{}):s.movieArticleComments.map((function(e,t){return Object(d.jsx)(Re,{content:e.content,author:e.author,deleteCurrentComment:c.userId===e._ownerId?Object(j.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e._id,c.authorizationToken);case 2:r({type:"MODIFY-MOVIE-ARTICLE-COMMENT"});case 3:case"end":return t.stop()}}),t)}))):null},t)})),c.userId!==a&&c.userId&&Object(d.jsxs)("form",{onSubmit:u,children:[h.content&&p.content&&Object(d.jsx)("div",{className:"error",children:p.content}),Object(d.jsx)("textarea",{className:Se.a.commentInput,name:"content",rows:"4",cols:"50",placeholder:"Enter your expression from this movie",onChange:l,value:m.content}),Object(d.jsx)("button",{className:Se.a.commentSubmit,type:"submit",children:"Post comment"})]})]})},Ve=a(25),Pe=a.n(Ve);var We=function(e){var t=e.ownerId,a=e.movieId,r=e.dispatch,s=e.state,c=Object(n.useContext)(te).currentUserData,i=Object(o.f)();Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,q(a,c.userId);case 3:e.t1=e.sent,e.t2={type:"GET-MOVIE-LIKES-FROM-USER",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,c.userId,s.isLiked,r]);var l=function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(a,c.authorizationToken);case 2:r({type:"SET-IS-LIKED-TO-TRUE"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:Pe.a.movieDetailsButtonWrapper,children:[c.userId?c.userId!==t?Object(d.jsx)(d.Fragment,{children:!s.movieArticleLikesFromUser.length&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{onClick:l,className:[Pe.a.movieDetailsBtnLike,Pe.a.movieBtn].join(" "),children:"Like \ud83d\udc4d"})})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:function(){return r({type:"DELETE-CURRENT-MOVIE"})},className:[Pe.a.movieDetailsBtnDelete,Pe.a.movieBtn].join(" "),children:"\u274c Delete"}),Object(d.jsx)(u.b,{to:"/movies/edit/".concat(a),className:[Pe.a.movieDetailsBtnEdit,Pe.a.movieBtn].join(" "),children:"\u270d Edit"})]}):null,s.deleteMovieArticleConfirmation&&Object(d.jsx)(re,{message:s.deleteMovieArticleConfirmation,closeModalClickHandler:Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(a,c.authorizationToken);case 2:i.push("/");case 3:case"end":return e.stop()}}),e)}))),cancelActionHandler:function(){return r({type:"CANCEL-DELETE-MOVIE"})}})]})})},ze="LOAD-MOVIE-ARTICLES",He="MODIFY-MOVIE-ARTICLE-COMMENT",qe="GET-MOVIE-ARTICLE",Ye="GET-MOVIE-LIKES-FROM-USER",Ge="SET-IS-LIKED-TO-TRUE",Je="DELETE-CURRENT-MOVIE",Ze="CANCEL-DELETE-MOVIE";var Ke=function(e,t){switch(t.type){case ze:return Object(me.a)(Object(me.a)({},e),{},{movieArticleComments:t.payload,areCommentsLoading:!1,isFormSubmited:!1});case He:return Object(me.a)(Object(me.a)({},e),{},{isFormSubmited:!0});case qe:return Object(me.a)(Object(me.a)({},e),{},{movieArticle:t.payload,isMovieLoading:!1});case Ye:return Object(me.a)(Object(me.a)({},e),{},{movieArticleLikesFromUser:t.payload});case Ge:return Object(me.a)(Object(me.a)({},e),{},{isLiked:!0});case Je:return Object(me.a)(Object(me.a)({},e),{},{deleteMovieArticleConfirmation:"Are u sure u want to delete this movie article?!"});case Ze:return Object(me.a)(Object(me.a)({},e),{},{deleteMovieArticleConfirmation:null});default:return e}};var Xe=function(e){var t=e.match.params.movieId,a=Object(n.useReducer)(Ke,{movieArticle:{},movieArticleComments:[],areCommentsLoading:!0,isFormSubmited:!1,numberOfLikes:0,movieArticleLikesFromUser:[],isLiked:!1,deleteMovieArticleConfirmation:null,isMovieLoading:!0}),r=Object(i.a)(a,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){!function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,M(t);case 3:e.t1=e.sent,e.t2={type:"GET-MOVIE-ARTICLE",payload:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(d.jsx)(d.Fragment,{children:s.isMovieLoading?Object(d.jsx)(ge,{}):Object(d.jsx)("section",{id:"details-view",children:Object(d.jsxs)("div",{className:Me.a.movieContainer,children:[Object(d.jsxs)("h1",{className:Me.a.movieDetailsTitle,children:["Movie title: ",s.movieArticle.title]}),Object(d.jsx)("img",{className:Me.a.movieDetailsImg,src:s.movieArticle.img,alt:"movie"}),Object(d.jsxs)("div",{className:Me.a.movieDetailsInfo,children:[Object(d.jsx)("h3",{className:Me.a.movieDetailsInfoImg,children:"Movie Description"}),Object(d.jsx)("p",{className:Me.a.movieDetailsInfoParagraph,children:s.movieArticle.description}),Object(d.jsx)(We,{dispatch:c,movieId:t,ownerId:s.movieArticle._ownerId,state:s}),Object(d.jsx)(Ue,{dispatch:c,movieId:t,ownerId:s.movieArticle._ownerId,state:s})]})]})})})};var Qe=function(e){var t=e.match,a=e.history,r=Object(n.useContext)(te).currentUserData,s=Oe({},M,[t.params.movieId],!1),c=function(){var e=Object(j.a)(v.a.mark((function e(n){var s,c,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=n.target,c=s.movieTitle,i=s.movieDescription,o=s.movieImage,e.next=4,F(c.value,i.value,o.value,t.params.movieId,r.authorizationToken);case 4:a.push("/movies/details/".concat(t.params.movieId));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("section",{className:Ee.a.createPage,children:Object(d.jsxs)("div",{className:Ee.a.createFormWrapper,children:[Object(d.jsx)("h2",{className:Ee.a.createFormTitle,children:"EDIT MOVIE ARTICLE"}),Object(d.jsxs)("form",{onSubmit:c,children:[Object(d.jsx)("input",{className:Ee.a.movieTitle,type:"text",name:"movieTitle",placeholder:"ENTER MOVIE TITLE",defaultValue:s.title}),Object(d.jsx)("textarea",{className:Ee.a.movieDescription,type:"text",name:"movieDescription",placeholder:"ENTER MOVIE DESCRIPTION",rows:"4",columns:"50",defaultValue:s.description}),Object(d.jsx)("input",{className:Ee.a.movieImageURL,type:"text",name:"movieImage",placeholder:"ENTER MOVIE IMAGE URL",defaultValue:s.img}),Object(d.jsx)("button",{className:Ee.a.createMovieBtn,type:"submit",children:"EDIT"})]})]})})};var $e=function(){return Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{path:"/",exact:!0,component:Ie}),Object(d.jsx)(o.a,{path:"/auth/register",exact:!0,component:ye}),Object(d.jsx)(o.a,{path:"/auth/login",exact:!0,component:De}),Object(d.jsx)(o.a,{path:"/movies/create",exact:!0,component:Te}),Object(d.jsx)(o.a,{path:"/movies/details/:movieId",exact:!0,component:Xe}),Object(d.jsx)(o.a,{path:"/movies/edit/:movieId",exact:!0,component:Qe})]})};var et=function(){var e=Object(n.useState)({authorizationToken:null,userId:null,username:null}),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(te.Provider,{value:{currentUserData:a,setCurrentUserData:r},children:[Object(d.jsx)(le,{}),Object(d.jsx)($e,{})]})})},tt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,207)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(u.a,{children:Object(d.jsx)(o.a,{component:et,exact:!0})})}),document.getElementById("root")),tt()},25:function(e,t,a){e.exports={movieDetailsButtonWrapper:"DetailsButtons_movieDetailsButtonWrapper__3mvip",movieDetailsBtnDelete:"DetailsButtons_movieDetailsBtnDelete__1iHRH",movieDetailsBtnEdit:"DetailsButtons_movieDetailsBtnEdit__29_wv",movieDetailsBtnLike:"DetailsButtons_movieDetailsBtnLike__2UFd_",movieBtn:"DetailsButtons_movieBtn__2_EDE"}},29:function(e,t,a){e.exports={movieContainer:"Details_movieContainer__bXLeu",movieDetailsImg:"Details_movieDetailsImg__HdUz9",movieDetailsTitle:"Details_movieDetailsTitle__fsiae",movieDetailsInfo:"Details_movieDetailsInfo__1pco2",movieDetailsInfoImg:"Details_movieDetailsInfoImg__1C1Zm",movieDetailsInfoParagraph:"Details_movieDetailsInfoParagraph__kE1fQ"}},31:function(e,t,a){e.exports={overlay:"Modal_overlay__1vrlA",modal:"Modal_modal__1avHu",action:"Modal_action__3uZn8",message:"Modal_message__77rZH"}},32:function(e,t,a){e.exports={movieCard:"MovieCard_movieCard__2xRsx",movieCardTitle:"MovieCard_movieCardTitle__1pj1T",movieCardImage:"MovieCard_movieCardImage__1JM2n",movieCardButton:"MovieCard_movieCardButton__tbmFH",movieLikes:"MovieCard_movieLikes__3TvS0"}},39:function(e,t,a){e.exports={homePage:"MoviesForum_homePage__3zcuu",moviesBackgroundImage:"MoviesForum_moviesBackgroundImage__32-7u",moviesForumTitle:"MoviesForum_moviesForumTitle__1QG1M",moviesForumDescription:"MoviesForum_moviesForumDescription__1ioAS"}},40:function(e,t,a){e.exports={comments:"CommentSection_comments__1X8sj",commentTitle:"CommentSection_commentTitle__1PSk6",commentInput:"CommentSection_commentInput__7tDii",commentSubmit:"CommentSection_commentSubmit__3LZYb"}},41:function(e,t,a){e.exports={commentUser:"CommentCard_commentUser__NVcTS",commentUserContent:"CommentCard_commentUserContent__2iR1j",commentUserName:"CommentCard_commentUserName__Ranbw",deleteComment:"CommentCard_deleteComment__3AbPF",delete:"CommentCard_delete__jjNbJ"}},6:function(e,t,a){e.exports={authView:"Auth_authView__155wR",cont:"Auth_cont__2nI8n",mainBox:"Auth_mainBox__3-RK2",create:"Auth_create__2iWT1",authTitle:"Auth_authTitle__1WxSV",user:"Auth_user__BuWuK",email:"Auth_email__1z0K8",pass:"Auth_pass__1ZWqY",auth:"Auth_auth__3J_oc"}},61:function(e,t,a){e.exports={logo:"Logo_logo__2DDgH",navListLink:"Logo_navListLink__3iPSU"}},91:function(e,t,a){e.exports={header:"Header_header__39cre"}}},[[206,1,2]]]);
//# sourceMappingURL=main.f7c8bcdc.chunk.js.map